/*! For license information please see published-v10-site-libs.js.LICENSE.txt */
(()=>{var e={5026:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getMainWindowWithProperty=t.getAppWindowWithProperty=void 0;var n=t.getAppWindowWithProperty=function e(t){try{var n=window;while(true){if(n.App&&n.App[t])return n;if(n===window.top)return null;n=n.parent}}catch(e){return null}};var i=t.getMainWindowWithProperty=function e(t){try{var n=window;while(true){if(n[t])return n;if(n===window.top)return n;n=n.parent}}catch(e){return window}}},4752:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;"value"in i&&(i.writable=true);Object.defineProperty(e,i.key,i)}}function a(e,t,n){t&&i(e.prototype,t);n&&i(e,n);Object.defineProperty(e,"prototype",{writable:false});return e}var r=function(){function e(){n(this,e)}a(e,[{key:"load",value:function e(t){return new Promise(function(e,n){if(!t.clientId||!t.merchantId||!t.currency){n("Client ID, Merchant ID or Currency missing");return}this.scriptTagAlreadyPresent()?e():this.addScriptTag(e,t)}.bind(this))}},{key:"scriptTagAlreadyPresent",value:function e(){return null!==document.getElementById("js-paypal-commerce-script")}},{key:"addScriptTag",value:function e(t,n){var i=this.getHeadTag();var a=this.buildScriptTag(t,n);i.appendChild(a)}},{key:"buildScriptTag",value:function e(t,n){var i=this.createScriptTag();var a=this.getScriptSource(n);i.id="js-paypal-commerce-script";i.setAttribute("data-csp-nonce",App.nonce);i.nonce=App.nonce;i.addEventListener("load",t);i.src=a;i.setAttribute("async","");return i}},{key:"createScriptTag",value:function e(){return document.createElement("script")}},{key:"getScriptSource",value:function e(t){return"https://www.paypal.com/sdk/js?client-id=".concat(t.clientId,"&merchant-id=").concat(t.merchantId,"&currency=").concat(t.currency)}},{key:"getHeadTag",value:function e(){return document.getElementsByTagName("head")[0]}}]);return e}();var o=t["default"]=r},1836:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;"value"in i&&(i.writable=true);Object.defineProperty(e,i.key,i)}}function a(e,t,n){t&&i(e.prototype,t);n&&i(e,n);Object.defineProperty(e,"prototype",{writable:false});return e}var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e);this.key=t.key;this.visible=false}a(e,[{key:"isShowing",value:function e(){return this.visible}},{key:"isLoaded",value:function e(){return"undefined"!==typeof window.grecaptcha}},{key:"isVerified",value:function e(){return""!==window.grecaptcha.getResponse()}},{key:"getToken",value:function e(){return window.grecaptcha.getResponse()}},{key:"render",value:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.sitekey=this.key;window.grecaptcha.render(t,n);this.visible=true}},{key:"display",value:function e(t,n){this.isLoaded()?this.render(t,n):s(this.render.bind(this,t,n))}}]);return e}();var o=t["default"]=r;function s(e){var t=document.createElement("script");var n="recpatcha".concat(Math.random().toString(36).slice(2));var i="https://www.google.com/recaptcha/api.js?render=explicit";var a=false;if("function"===typeof e){window[n]=e;a=n}"undefined"!==typeof e&&"function"===typeof window[e]&&(a=e);a&&(i+="&onload=".concat(a));t.type="application/javascript";t.src=i;document.body.appendChild(t)}},3760:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;window.App=window.App||{};var n=function e(t,n,i){return new Promise((function(e,a){var r={type:t,payload:i};var o=new MessageChannel;o.port1.onmessage=function(t){var n=t.data;o.port1.close();n.error?a(n.error):e(n.response)};n.postMessage(r,"*",[o.port2])}))};App.sendCrossOriginMessage=n;var i=t["default"]=n},1944:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n={isScriptAllowedByCookieConsent:function e(t,n){var i=!!t.getData("cookieWarningUrl");if(!i)return true;var a="1"===n.getItem("bk-cookie-warning-advertising");var r="1"===n.getItem("bk-cookie-warning-preferences");var o="1"===n.getItem("bk-cookie-warning-analytics");return a&&r&&o}};var i=t["default"]=n},219:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.deviceFeaturesHelper=void 0;t.getInputType=g;t.hasOrientation=d;t.isLargeDevice=u;t.isMobileDevice=p;t.isSmallDevice=c;t.isSmallTouchDevice=f;t.isTouchDevice=h;var i=a(n(1985));function a(e){return e&&e.__esModule?e:{default:e}}var r="(max-width: 616px) and (orientation: portrait)";var o="(orientation: landscape) and (max-height: 616px)";var s="(min-width: 617px) and (orientation: portrait)";var l="(orientation: landscape) and (min-height: 617px)";function c(){return window.matchMedia("".concat(r,", ").concat(o)).matches}function u(){return window.matchMedia("".concat(s,", ").concat(l)).matches}function d(e){return window.matchMedia("(orientation: ".concat(e,")")).matches}function f(){return"coarse"===this.getInputType()&&(i.default.isMobileWebKit()||i.default.isFirefox())}function h(){return"ontouchstart"in window}function p(){return i.default.isMobileWebKit()}function g(){if(h())return"coarse";return"fine"}var m=t.deviceFeaturesHelper={isSmallDevice:c,isLargeDevice:u,hasOrientation:d,isSmallTouchDevice:f,getInputType:g,isTouchDevice:h,isMobileDevice:p};window.BaseKit&&(window.BaseKit.deviceFeaturesHelper=m)},2047:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toggleHiddenAttribute=t.remove=t.emptyElement=t["default"]=t.append=void 0;function n(e){return o(e)||r(e)||a(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function o(e){if(Array.isArray(e))return s(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var l=function e(t){t.setAttribute("hidden",true)};var c=function e(t){t.removeAttribute("hidden")};var u=t.toggleHiddenAttribute=function e(t,n){null===t.getAttribute("hidden")||n?l(t):c(t)};var d=t.emptyElement=function e(t){while(t.firstChild)t.removeChild(t.firstChild)};var f=t.append=function e(t,i){var a=new DOMParser;var r=a.parseFromString(i,"text/html");if(!r)return;n(r.querySelectorAll("body > *")).forEach((function(e){var n=document.importNode(e,true);t.appendChild(n)}))};var h=t.remove=function e(t){t.remove?t.remove():t.parentElement.removeChild(t)};var p=t["default"]={toggleHiddenAttribute:u,emptyElement:d,append:f,remove:h}},16:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.normalisedLocaleKeyMapping=t.getMonthsForLocale=void 0;var n=t.normalisedLocaleKeyMapping={cmn:"zh-cn",en:"en-gb",en_US:"en-us",id_ID:"id",no:"nb",pt_BR:"pt-br",zh_Hans:"zh-cn",zh_Hant:"zh-tw"};var i=t.getMonthsForLocale=function e(t){var n=new Intl.DateTimeFormat(t,{month:"long"});var i=[];for(var a=0;a<12;a++){var r=new Date(Date.UTC(2e3,a,1,0,0,0));i.push(n.format(r))}return i}},7402:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=s;n(4841);var i=a(n(3760));function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i,a,r,o){try{var s=e[r](o);var l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(i,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,l,"next",e)}function l(e){r(o,i,a,s,l,"throw",e)}s(void 0)}))}}function s(){return l.apply(this,arguments)}function l(){l=o(regeneratorRuntime.mark((function e(){var t,n,a,r;return regeneratorRuntime.wrap((function e(o){while(1)switch(o.prev=o.next){case 0:t={};o.next=3;return(0,i.default)("getUrl",window.top);case 3:n=o.sent;a=n.match(/\?(.+)/);if(a){r=a[1].split("&");r.reduce((function(e,t){var n=t.split("=");2===n.length&&(e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]));return e}),t)}return o.abrupt("return",t);case 7:case"end":return o.stop()}}),e)})));return l.apply(this,arguments)}},6342:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;t.getTranslationFromData=h;var i=r(n(7402));var a=n(5026);function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return d(e)||u(e,t)||l(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function u(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i=[];var a=true;var r=false;var o,s;try{for(n=n.call(e);!(a=(o=n.next()).done);a=true){i.push(o.value);if(t&&i.length===t)break}}catch(e){r=true;s=e}finally{try{a||null==n["return"]||n["return"]()}finally{if(r)throw s}}return i}function d(e){if(Array.isArray(e))return e}var f=function e(t,n){for(var a=arguments.length,r=new Array(a>2?a-2:0),o=2;o<a;o++)r[o-2]=arguments[o];var s={debugkeys:g.bind(null,t),debugvalues:m.bind(null,t),translate:v.bind.apply(v,[null,t,n].concat(r))};return s[(0,i.default)().translate||"translate"]()};function h(e){var t=(0,a.getAppWindowWithProperty)("i18n");var n=e.match(/^(.+?)\.(.+)$/),i=o(n,3),r=i[1],s=i[2];if("undefined"!==typeof t.App.i18n[r]&&"undefined"!==typeof t.App.i18n[r][s])return t.App.i18n[r][s];return null}function p(){var e=(0,a.getAppWindowWithProperty)("frontEndBucket");if(!e)return false;return 0!==parseInt(e.App.frontEndBucket.useDefaultTranslations,10)}function g(e){return e}function m(e){var t=h(e);if(""===t)return"MASTER";if(t)return"TRANSLATED";return"DEFAULT"}function v(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];var r=h(e);var o=t||"";var s=r||(p()?o:"");var l=s.replace(/%([1-9])/g,(function(e,t){return"undefined"!==typeof i[t-1]?i[t-1]:""}));return l||e}var b=t["default"]=f},1985:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;t.iOSFixRequired=l;t.iOSVersion=o;t.isAndroidChrome=h;t.isEdge=g;t.isFirefox=f;t.isIE=p;t.isMobileWebKit=d;t.isiOS=r;t.isiOS13OrAbove=s;t.isiOSSafari=a;t.isiOSTablet=c;t.isiPadOS=u;var i=n(219);function a(){var e=/Version\/[\d.]+.*Safari/.test(navigator.userAgent);return e&&r()}function r(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return e||u()}function o(){if(r()){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(e)return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)];if(u())return[13,0,0]}return""}function s(){var e=o();return""!==e&&e[0]>=13}function l(){return r()&&!s()}function c(){return/iPad/.test(navigator.platform)}function u(){return"MacIntel"===navigator.platform&&(0,i.isTouchDevice)()}function d(){var e=navigator.userAgent;var t=new RegExp(" AppleWebKit/").test(e);var n=t&&new RegExp(" Android").test(e);var i=t&&new RegExp(" Silk/").test(e);var a=t&&new RegExp(" Mobile/").test(e);var r=t&&u();var o=new RegExp("^basekit-app").test(e);return a||n||i||o||r}function f(){var e=navigator.userAgent;var t=new RegExp(" Gecko").test(e);var n=t&&new RegExp("rv:").test(e);return n}function h(){var e=navigator.userAgent;var t=new RegExp("^basekit-app").test(e);var n=new RegExp(" AppleWebKit/").test(e)&&new RegExp(" Android").test(e);return n||t}function p(){var e=new RegExp("/Trident/.*rv:([0-9]{1,}[.0-9]{0,})/");return e.test(navigator.userAgent)}function g(){var e=new RegExp("/ Edge//");return e.test(navigator.userAgent)}var m={isiOSSafari:a,isiOS:r,iOSVersion:o,isiOS13OrAbove:s,iOSFixRequired:l,isiOSTablet:c,isMobileWebKit:d,isAndroidChrome:h,isFirefox:f,isIE:p,isEdge:g};window.BaseKit&&(BaseKit.UserAgentSniffer=m);var v=t["default"]=m},985:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({initialize:function e(){return this}});BaseKit.Widget.AbstractModel=o;var s=i=o},1619:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return d(e)||u(e,t)||l(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function u(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i=[];var a=true;var r=false;var o,s;try{for(n=n.call(e);!(a=(o=n.next()).done);a=true){i.push(o.value);if(t&&i.length===t)break}}catch(e){r=true;s=e}finally{try{a||null==n["return"]||n["return"]()}finally{if(r)throw s}}return i}function d(e){if(Array.isArray(e))return e}var f=a.default.extend({initialize:function e(t){t.abstractWidget&&this.extendView(t.abstractWidget);this.delegateEvents();BaseKit.Widget.CoreView.prototype.initialize.call(this,t)},extendView:function e(t){for(var n=0,i=Object.entries(t);n<i.length;n++){var a=o(i[n],2),r=a[0],s=a[1];this[r]=s}}});BaseKit.Widget.AbstractView=f;var h=i=f},4675:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{email:"profile",text:App.t("widgets.advancedcontactform.default_button_text","Send"),formTitle:App.t("widgets.advancedcontactform.default_title","Subject"),fromEmailLabel:App.t("widgets.advancedcontactform.default_from_email_label","Your Email:"),fromEmailPlaceholder:App.t("widgets.advancedcontactform.default_from_email_placeholder","Type your email"),collectEmailAddress:1,marketingConsentEnabled:false,marketingConsentText:App.t("widgets.advancedcontactform.marketing_consent_text_default","I consent to receive marketing communications."),formName:""},temporary:{},transformWidgetData:function e(t){Object.keys(t).forEach((function(e){"formFields"===e&&(t[e]=JSON.parse(t[e]))}));return t}});BaseKit.Widget.AdvancedcontactformModel=o;var s=i=o},7765:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;i=s;var a=o(n(5705));var r=o(n(1836));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=/^(singleline|multiline|radiobutton|checkbox|dropdown)_(\d)$/;var n=t.exec(e);if(null!==n)return{type:n[1],index:parseInt(n[2],10)};return}var l=a.default.extend({template:"widget_advancedcontactform",recaptcha:null,events:{"submit .js-form":"onFormSubmit"},store:null,initialize:function e(t){a.default.prototype.initialize.call(this,t);this.gdprEnabled=t.enablePolicyPages;this.store=t.store},throwFormFieldError:function e(t,n){this.$(t).attr("aria-invalid",true).attr("aria-describedby",n)},onFormSubmit:function e(t){t.preventDefault();var n=this.getFormData();var i=this.validateFormData(n);this.$("[aria-invalid]").on("change",(function(){bk$(this).removeAttr("aria-invalid").removeAttr("aria-describedby")}));if(i.length){this.enableForm();return}this.submitFormData(n)},showRecaptcha:function e(t){var n=this;null===this.recaptcha&&(this.recaptcha=new r.default({key:t}));this.recaptcha.isShowing()||this.recaptcha.display(this.$el.find(".js-recaptcha").get(0),{callback:function e(){return n.onFormSubmit(new Event("submit"))}})},getFormData:function e(){var t=this;var n={};var i=this.model.toJSON();this.getDefaultFieldData(i,n);var a=this.model.get("formFields");a&&a.length?a.forEach((function(e){n[e.title]=t.getCustomFieldData(e.type,t.$(".js-input-".concat(e.id)))})):Object.keys(i).forEach((function(e){""!==i[e]&&t.addCustomFieldData(e,i[e],n)}));return n},getDefaultFieldData:function e(t,n){n.useProfile="profile"===t.email?1:0;delete t.email;delete t.formTitle;n.collectEmailAddress=this.model.get("collectEmailAddress");n.emailFrom=this.$(".js-email-input").val();n.widgetId=this.$el.attr("id");n.widgetRef=this.properties.ref;n.pageRef=App.session.get("pageRef");n.pageLanguage=App.session.get("pageLanguage");this.gdprEnabled&&(n.termsTicked=this.el.querySelector(".js-terms-input").checked);null!==this.recaptcha&&this.recaptcha.isShowing()&&this.recaptcha.isVerified()&&(n.recaptchaResponse=this.recaptcha.getToken());"1"===this.model.get("marketingConsentEnabled")&&(n.marketingConsentEnabled=this.el.querySelector(".js-marketing-consent-input").checked)},addCustomFieldData:function e(t,n,i){var a=s(t);"undefined"!==typeof a&&(i[n]=this.getCustomFieldData(a.type,this.$(".js-input-".concat(t))))},getCustomFieldData:function e(t,n){switch(t){case"singleline":case"multiline":case"dropdown":return n.val();case"radiobutton":return this.$(".js-input-radio[name=".concat(n.attr("name"),"]:checked")).val();case"checkbox":return this.$(".js-input-checkbox[name=".concat(n.attr("name"),"]:checked")).map((function(e,t){return t.getAttribute("value")})).toArray().join(",")}return""},validateFormData:function e(t){var n=this;var i=/.+@.+/;var a=this.model.get("collectEmailAddress");var r=a&&"0"!==a;var o=this.el.querySelectorAll('[aria-required="true"]');var s=this.el.querySelector(".js-terms-input");var l=[];var c=this.$el.attr("id");r&&!t.emailFrom.length?l.push({selector:".js-email-input",message:App.t("widgets.form.empty_email","Please enter an email address."),ariaDescribedBy:"".concat(c,"-input--email--error")}):r&&!i.test(t.emailFrom)&&l.push({selector:".js-email-input",message:App.t("widgets.form.invalid_email","Please enter a valid email address."),ariaDescribedBy:"".concat(c,"-input--valid-email--error")});o.forEach((function(e){var t=e.getAttribute("name");var n=e.classList.contains("js-singleline-input");var i=e.classList.contains("js-message-input");!e.value.trim()&&n&&l.push({selector:'[name="'.concat(t,'"]'),message:App.t("widgets.form.empty_input","Please enter a value."),ariaDescribedBy:"".concat(t,"-input--singleline--error")});!e.value.trim()&&i&&l.push({selector:'[name="'.concat(t,'"]'),message:App.t("widgets.form.empty_message","Please enter a message."),ariaDescribedBy:"".concat(t,"-input--message--error")})}));this.gdprEnabled&&s&&!t.termsTicked&&l.push({selector:".js-terms-input",message:App.t("widgets.form.terms_unticked","Please agree to submitting your data to this organisation."),ariaDescribedBy:"".concat(c,"-input--terms--error")});if(l.length){var u=l.map((function(e){var t=e.message,n=e.ariaDescribedBy;return{message:t,ariaDescribedBy:n}}));this.showMessage(u,"fail");l.forEach((function(e){var t=e.selector,i=e.ariaDescribedBy;n.throwFormFieldError(t,i)}));return l}return true},disableForm:function e(){this.$(".js-form").attr("aria-busy","true");this.$(".js-loading-spinner").removeClass("hidden");this.$(".js-submit-button-text").addClass("hidden");this.$(".js-button").prop("disabled",true)},enableForm:function e(){this.$(".js-form").removeClass("submitting").attr("aria-busy","false");this.$(".js-loading-spinner").addClass("hidden");this.$(".js-submit-button-text").removeClass("hidden");this.$(".js-button").prop("disabled",false)},submitFormData:function e(t){var n=this;var i=this.$el.attr("id");var a=".js-form";var r="".concat(i,"-input--form-submitted-status");this.disableForm();this.showMessageBox();bk$.ajax({url:"/_bk/advanced-contactform",type:"POST",data:t,success:function e(){if(n.model.get("goalUrl"))n.redirect(n.model.get("goalUrl"));else{var t=App.t("widgets.form.success","Message sent successfully.");n.showMessage([{message:t,ariaDescribedBy:r}],"success");n.$(a).attr("aria-describedby",r);n.removeMessageBox()}},error:function e(t){if(422===t.status){n.enableForm();n.showRecaptcha(t.responseJSON.recaptcha.siteKey)}else{var i=App.t("widgets.form.failed","Submit failed.");n.showMessage([{message:i,ariaDescribedBy:r}],"fail");n.throwFormFieldError(a,r);n.removeMessageBox()}}})},redirect:function e(t){window.location.assign(t)},showMessage:function e(t,n){if(!t||0===t.length)return;this.$(".message-box").length>0&&this.$(".message-box").remove();0===this.$(".overlay").length&&this.showMessageBox();var i=t.map((function(e){var t=e.ariaDescribedBy,n=e.message;return'<div id="'.concat(t,'" class="message-text">').concat(n,"</div>")})).join("");this.$(".overlay").addClass(n).append('<div class="message-box" style="display: block">'.concat(i,"</div>"))},showMessageBox:function e(){var t=bk$('<div class="overlay"></div>');0===this.$(".overlay").length&&this.$el.append(t);this.$(".js-form").addClass("submitting")},resetFormData:function e(){this.$(".js-message-input").val("");this.$(".js-email-input").val("");this.$(".js-singleline-input").val("");this.$(".js-input-checkbox").removeAttr("checked");this.$(".js-input-radio").removeAttr("checked");var t=this.el.querySelector(".js-terms-input");t&&(t.checked=false)},removeMessageBox:function e(){var t=this;this.enableForm();this.resetFormData();window.setTimeout((function(){t.$(".overlay").fadeOut((function(){t.$(".overlay").remove()}))}),8e3)}});BaseKit.Widget.AdvancedcontactformView=l;var c=i=l},3953:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({initialize:function e(){return this}});BaseKit.Widget.BlogpostModel=o;var s=i=o},9019:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=o(n(5705));var r=o(n(9333));function o(e){return e&&e.__esModule?e:{default:e}}function s(){return"menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600"}function l(){return encodeURIComponent(window.location.href)}var c=a.default.extend({template:"widget_blogpost",events:{"click .js-facebook-btn":"shareOnFacebook","click .js-twitter-btn":"shareOnTwitter"},initialize:function e(t){a.default.prototype.initialize.call(this,t)},shareOnFacebook:function e(){window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(l()),"",s())},shareOnTwitter:function e(){var t=Server.plugins.blog&&Server.plugins.blog.posts?Server.plugins.blog.posts[0].summary:"";window.open("https://twitter.com/share?text=".concat(t,"&url=").concat(l()),"",s())}});Cocktail.mixin(c,r.default);BaseKit.Widget.BlogpostView=c;var u=i=c},4113:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{postDisplayType:"summary"},initialize:function e(){return this}});BaseKit.Widget.BlogpostlistModel=o;var s=i=o},7195:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_blogpostlist",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.BlogpostlistView=o;var s=i=o},6937:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({initialize:function e(){return this}});BaseKit.Widget.BlogsearchModel=o;var s=i=o},2675:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_blogsearch",events:{"submit .js-blogsearch-form":"searchSubmitted"},initialize:function e(t){a.default.prototype.initialize.call(this,t)},searchSubmitted:function e(t){t.preventDefault();var n=this.$(".js-blogsearch-input").val();if(!n.length)return;window.location.assign(Server.plugins.blog.searchUrl+encodeURIComponent(n))}});BaseKit.Widget.BlogsearchView=o;var s=i=o},2407:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({initialize:function e(){return this}});BaseKit.Widget.BookingsserviceModel=o;var s=i=o},5345:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=u(n(4147));var r=u(n(5705));var o=n(2047);var s=n(16);var l=n(219);var c=u(n(9502));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,i,a,r,o){try{var s=e[r](o);var l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(i,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){d(r,i,a,o,s,"next",e)}function s(e){d(r,i,a,o,s,"throw",e)}o(void 0)}))}}var h=201;var p=10;var g=5;var m=r.default.extend({template:"widget_bookingsservice",service:null,abortController:null,bookingServiceWidget:null,currentMonthInEventList:"",currentMonthSlotsListElementInEventList:null,remainingEventSlots:null,events:{"click .js-timeslot-item":"_onTimeSlotClicked","click .js-reload-page":"_onReloadPageClicked","click .js-show-more-dates":"_onShowMoreDatesClicked"},initialize:function e(t){r.default.prototype.initialize.call(this,t);this._refreshWidget()},_refreshWidget:function e(){var t=this._getBookingsServiceWidget();if(!t)return;this.service=JSON.parse(t.dataset.service);if(!this._hasActiveServices()&&!this.service)return;this._renderWidget()},_getBookingsServiceWidget:function e(){return this.el.querySelector(".js-bookings-service-widget")},_renderWidget:function e(){if(this._shouldShowEventList())this._initialiseEventList();else{this._initialiseDatePicker();this._getCurrentMonthTimeSlots()}},_shouldShowEventList:function e(){var t=this.el.querySelector(".js-event-list");if(!this._isEventType()||!t)return false;var n=window.getComputedStyle(t);return"none"!==n.display},_initialiseEventList:function e(){var t=this;return f(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:i.prev=0;i.next=3;return t._getEventListTimeSlots();case 3:n=i.sent;(0,o.emptyElement)(t._getEventMonthSlotsContainer());if(!(n.length<1)){i.next=8;break}t._setMessageForEventList("no event result");return i.abrupt("return");case 8:t.remainingEventSlots=n;t._renderEventListTimeSlots(t.remainingEventSlots);i.next=15;break;case 12:i.prev=12;i.t0=i["catch"](0);t._setMessageForEventList("error");case 15:case"end":return i.stop()}}),e,null,[[0,12]])})))()},_getEventListTimeSlots:function e(){var t=this;return f(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return t._getServiceAvailableSlots();case 2:n=i.sent;return i.abrupt("return",n.availableSlots);case 4:case"end":return i.stop()}}),e)})))()},_getNormalisedLocale:function e(){var t=App.session.get("languageCode");return t in s.normalisedLocaleKeyMapping?s.normalisedLocaleKeyMapping[t]:t},_leftPad:function e(t){return"0".concat(t).slice(-2)},_formatAsComparableMonth:function e(t){var n=new Date(t);var i=this._leftPad(n.getMonth()+1);return"".concat(n.getFullYear(),"-").concat(i)},_formatAsComparableDay:function e(t){var n=new Date(t);var i=this._leftPad(n.getMonth()+1);var a=this._leftPad(n.getDate());return"".concat(n.getFullYear(),"-").concat(i,"-").concat(a)},_formatAsUtcDay:function e(t){var n=new Date(t);var i=this._leftPad(n.getUTCMonth()+1);var a=this._leftPad(n.getUTCDate());return"".concat(n.getFullYear(),"-").concat(i,"-").concat(a)},_formatAsUtcTime:function e(t){var n=new Date(t);var i=this._leftPad(n.getUTCHours());var a=this._leftPad(n.getUTCMinutes());return"".concat(i,":").concat(a)},_formatAsComparableTime:function e(t){var n=new Date(t);var i=this._leftPad(n.getHours());var a=this._leftPad(n.getMinutes());return"".concat(i,":").concat(a)},_formatAsBritishDate:function e(t,n){var i=n.formatToParts(t);var a=i.findIndex((function(e){var t=e.type;return"month"===t}));var r=i.findIndex((function(e){var t=e.type;return"day"===t}));var o=i[a];i[a]=i[r];i[r]=o;return i.map((function(e){var t=e.value;return t})).join("")},_renderEventListTimeSlots:function e(t){var n=this._getNumberOfEventListSlots();var i=t.slice(0,n);this.remainingEventSlots=t.slice(n);this._createEventListTimeSlots(i);this._setShowMoreDatesButtonVisible(this.remainingEventSlots.length>0)},_getNumberOfEventListSlots:function e(){return(0,l.isTouchDevice)()||(0,l.isMobileDevice)()?g:p},_onShowMoreDatesClicked:function e(){this._renderEventListTimeSlots(this.remainingEventSlots)},_createEventListTimeSlots:function e(t){var n=this;t.forEach((function(e){var t=n._formatAsComparableMonth(e.start);if(t!==n.currentMonthInEventList){n._createEventListMonthSlotsContainer(e);n.currentMonthInEventList=t}n._createEventListMonthSlot(e)}))},_createEventListMonthSlotsContainer:function e(t){var n=this._formatAsComparableMonth(t.start);var i=this._getNormalisedLocale();var a=new Intl.DateTimeFormat(i,{month:"long",year:"numeric"}).format(new Date(t.start)).replace(/^de /,"");var r="js-month-slots-list";(0,o.append)(this._getEventMonthSlotsContainer(),'<div class="event-list__month-slots">\n        <h4 class="month-slots__title">'.concat(a,'</h4>\n        <ul class="month-slots__slot-list ').concat(r,'" data-month-slots-list="').concat(n,'"></ul>\n        </div>'));var s=".".concat(r,'[data-month-slots-list="').concat(n,'"]');this.currentMonthSlotsListElementInEventList=this.el.querySelector(s)},_formatDateForMonthSlot:function e(t){var n=this._getNormalisedLocale();var i=new Date(t);var a={weekday:"long",month:"long",day:"numeric"};var r=new Intl.DateTimeFormat(n,a);var o=r.format(i);"en-gb"===n&&(o=this._formatAsBritishDate(i,r));return o.replace(/,/,"")},_getEventListMonthSlotItemContext:function e(t){var n=null!==t.serviceScheduleId?t.serviceScheduleId:"";var i=this._formatDateForMonthSlot(t.start);var a=this._formatAsComparableTime(t.start);var r=this._formatAsComparableTime(t.end);var o="".concat(a," - ").concat(r);var s=t.registration?t.registration.capacity-t.registration.registeredCount:0;var l=s>0;var c=App.t("widgets.bookingsservice.sold_out","Sold out");l&&(c=s>1?App.t("widgets.bookingsservice.remaining_spaces_plural","%1 spaces remaining",s):App.t("widgets.bookingsservice.remaining_space_singular","%1 space remaining",s));return{serviceScheduleId:n,dateLabel:i,timeLabel:o,hasCapacity:l,spaceLabel:c}},_createEventListMonthSlot:function e(t){var n=this._getEventListMonthSlotItemContext(t);(0,o.append)(this.currentMonthSlotsListElementInEventList,'<li class="slot-list__item js-timeslot-item '.concat(n.hasCapacity?"":"is-sold-out",'"\n            tabindex=0\n            role="button"\n            aria-label="').concat(t.toString(),'" \n            data-service-schedule-id="').concat(n.serviceScheduleId,'"\n            data-date-time="').concat(t.start,'"\n        >\n            <div class="slot-list__item-date-time" tabindex=\'-1\'>\n                <span class="slot-list__item-date-label">').concat(n.dateLabel,'</span>\n                <span class="slot-list__item-time-label">').concat(n.timeLabel,'</span>\n            </div>\n            <span class="slot-list__item-space-label">').concat(n.spaceLabel,"</span>\n        </li>"))},_setShowMoreDatesButtonVisible:function e(t){var n=this._getShowMoreDatesButton();t?n.removeAttribute("hidden"):n.setAttribute("hidden","hidden")},_initialiseDatePicker:function e(){this.datepicker=(0,a.default)(this._getContainerElForDatepicker(),{inline:true,enable:[],onChange:this._onDatePickerChange.bind(this),onMonthChange:this._onMonthOrYearChange.bind(this),onYearChange:this._onMonthOrYearChange.bind(this),monthSelectorType:"static",locale:this._getDatePickerLocale(),maxDate:this._getMaxDate(),prevArrow:'<svg aria-label="'.concat(App.t("widgets.bookingsservice.previous_month","Previous month"),'" ')+'tabindex=0 role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22.548,10.561H5.437a.251.251,0,0,1-.165-.438l8.637-7.6a1.44,1.44,0,0,0-1.9-2.162L.828,10.2a2.4,2.4,0,0,0,0,3.6l11.179,9.837a1.44,1.44,0,0,0,1.9-2.161l-8.637-7.6a.251.251,0,0,1,.165-.438H22.548a1.44,1.44,0,0,0,0-2.879Z"/></svg>',nextArrow:'<svg aria-label="'.concat(App.t("widgets.bookingsservice.next_month","Next month"),'" ')+'tabindex=0 role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.987,12a2.411,2.411,0,0,0-.814-1.8L11.994.361a1.44,1.44,0,0,0-1.9,2.162l8.637,7.6a.25.25,0,0,1-.165.437H1.452a1.44,1.44,0,0,0,0,2.88H18.563a.251.251,0,0,1,.165.438l-8.637,7.6a1.44,1.44,0,1,0,1.9,2.161L23.172,13.8A2.409,2.409,0,0,0,23.987,12Z"/></svg>'})},_getDatePickerLocale:function e(){return{firstDayOfWeek:1,weekdays:{shorthand:[App.t("widgets.bookingsservice.short_wk_sun","Sun"),App.t("widgets.bookingsservice.short_wk_mon","Mon"),App.t("widgets.bookingsservice.short_wk_tue","Tue"),App.t("widgets.bookingsservice.short_wk_wed","Wed"),App.t("widgets.bookingsservice.short_wk_thu","Thu"),App.t("widgets.bookingsservice.short_wk_fri","Fri"),App.t("widgets.bookingsservice.short_wk_sat","Sat")],longhand:[App.t("widgets.bookingsservice.long_wk_sun","Sunday"),App.t("widgets.bookingsservice.long_wk_mon","Monday"),App.t("widgets.bookingsservice.long_wk_tue","Tuesday"),App.t("widgets.bookingsservice.long_wk_wed","Wednesday"),App.t("widgets.bookingsservice.long_wk_thu","Thursday"),App.t("widgets.bookingsservice.long_wk_fri","Friday"),App.t("widgets.bookingsservice.long_wk_sat","Saturday")]},months:{shorthand:[App.t("widgets.bookingsservice.short_mth_jan","Jan"),App.t("widgets.bookingsservice.short_mth_feb","Feb"),App.t("widgets.bookingsservice.short_mth_mar","Mar"),App.t("widgets.bookingsservice.short_mth_apr","Apr"),App.t("widgets.bookingsservice.short_mth_may","May"),App.t("widgets.bookingsservice.short_mth_jun","Jun"),App.t("widgets.bookingsservice.short_mth_jul","Jul"),App.t("widgets.bookingsservice.short_mth_aug","Aug"),App.t("widgets.bookingsservice.short_mth_sep","Sep"),App.t("widgets.bookingsservice.short_mth_oct","Oct"),App.t("widgets.bookingsservice.short_mth_nov","Nov"),App.t("widgets.bookingsservice.short_mth_dec","Dec")],longhand:[App.t("widgets.bookingsservice.long_mth_jan","January"),App.t("widgets.bookingsservice.long_mth_feb","February"),App.t("widgets.bookingsservice.long_mth_mar","March"),App.t("widgets.bookingsservice.long_mth_apr","April"),App.t("widgets.bookingsservice.long_mth_may","May"),App.t("widgets.bookingsservice.long_mth_jun","June"),App.t("widgets.bookingsservice.long_mth_jul","July"),App.t("widgets.bookingsservice.long_mth_aug","August"),App.t("widgets.bookingsservice.long_mth_sep","September"),App.t("widgets.bookingsservice.long_mth_oct","October"),App.t("widgets.bookingsservice.long_mth_nov","November"),App.t("widgets.bookingsservice.long_mth_dec","December")]}}},_getMaxDate:function e(){var t=new Date;return new Date(t.setDate(t.getDate()+h))},_getContainerElForDatepicker:function e(){return this.el.querySelector(".js-bookings-service-widget-date-picker")},_setDatePickerActive:function e(t){var n=this._getContainerElForDatepicker();var i=n.parentNode;var a=i.querySelector(".flatpickr-innerContainer");t?a.classList.remove("loading"):a.classList.add("loading")},_getCurrentMonthTimeSlots:function e(){var t=new Date;var n=new Date(t.getFullYear(),t.getMonth(),1);this._loadSelectedMonthSlots(n)},_onDatePickerChange:function e(t){this._showLoadingTimeSlots();this._loadSelectedDateSlots(t[0])},_onMonthOrYearChange:function e(t,n,i){this._resetDatePickerEnabledDays();this._showLoadingTimeSlots();var a=new Date(i.currentYear,i.currentMonth,1);this._loadSelectedMonthSlots(a)},_loadSelectedMonthSlots:function e(t){var n=this;return f(regeneratorRuntime.mark((function e(){var i,a,r,o,s,l,c;return regeneratorRuntime.wrap((function e(u){while(1)switch(u.prev=u.next){case 0:i=n._formatDateTime(t);a="".concat(i);r=n._getMaxDate();o=new Date(t.getFullYear(),t.getMonth()+1,1);s=n._formatDateTime(r.getTime()-o.getTime()<0?r:o);u.prev=5;u.next=8;return n._getServiceAvailableSlots(a,s);case 8:l=u.sent;c=n._getMonthEnabledDays(t,l.availableSlots);n._setDatePickerEnabledDays(c);n._setDatePickerSelectedDateAndTimeSlots(c,l);u.next=19;break;case 14:u.prev=14;u.t0=u["catch"](5);if(!(u.t0&&u.t0.name&&"AbortError"===u.t0.name)){u.next=18;break}return u.abrupt("return");case 18:n._setMessageForTimeSlot("error");case 19:case"end":return u.stop()}}),e,null,[[5,14]])})))()},_loadSelectedDateSlots:function e(t){var n=this;return f(regeneratorRuntime.mark((function e(){var i,a,r,o;return regeneratorRuntime.wrap((function e(s){while(1)switch(s.prev=s.next){case 0:i=n._formatDateTime(t);a="".concat(i);t.setDate(t.getDate()+1);r="".concat(n._formatDateTime(t));s.prev=4;s.next=7;return n._getServiceAvailableSlots(a,r);case 7:o=s.sent;n._showTimeSlots(o.availableSlots);s.next=16;break;case 11:s.prev=11;s.t0=s["catch"](4);if(!(s.t0&&s.t0.name&&"AbortError"===s.t0.name)){s.next=15;break}return s.abrupt("return");case 15:n._setMessageForTimeSlot("error");case 16:case"end":return s.stop()}}),e,null,[[4,11]])})))()},_getServiceAvailableSlots:function e(){var t=arguments,n=this;return f(regeneratorRuntime.mark((function e(){var i,a,r,o,s,l,c;return regeneratorRuntime.wrap((function e(u){while(1)switch(u.prev=u.next){case 0:i=t.length>0&&void 0!==t[0]?t[0]:"";a=t.length>1&&void 0!==t[1]?t[1]:"";r=document.querySelector("body").classList.contains("edit");o="/_bk/bookings-get-available-slots/".concat(n.service.id);s=new URLSearchParams;if(i&&a){s.append("dateFrom",i);s.append("dateTo",a)}r&&s.append(App.session.get("serveSiteFromEditorSubdomainQueryParam"),App.session.get("serveSiteFromEditorSubdomainQueryValue"));l=s.toString();l&&(l="?".concat(l));n.abortController&&n.abortController.abort();n.abortController=new AbortController;u.next=13;return fetch("".concat(o).concat(l),{headers:{Accept:"application/json"},method:"GET",signal:n.abortController.signal});case 13:c=u.sent;return u.abrupt("return",c.json());case 15:case"end":return u.stop()}}),e)})))()},_resetDatePickerEnabledDays:function e(){this.datepicker.set("enable",[])},_setDatePickerEnabledDays:function e(t){this.datepicker.set("enable",t)},_setDatePickerSelectedDateAndTimeSlots:function e(t,n){var i=this;if(t.length>0){var a=t[0];this.datepicker.setDate(a,false);var r=n.availableSlots.filter((function(e){return-1!==i._formatAsComparableDay(e.start).indexOf(a)}));this._showTimeSlots(r)}else this._setMessageForTimeSlot("no monthly result")},_getMonthEnabledDays:function e(t,n){var i=this;var a=[];n.forEach((function(e){var n=new Date(e.start);if(+n<=+t)return;var r=i._formatAsComparableDay(e.start);-1===a.indexOf(r)&&a.push(r)}));return a},_getTimeSlotListElement:function e(){return this.el.querySelector(".js-timeslot-list")},_showLoadingTimeSlots:function e(){this._setDatePickerActive(false);var t=this._getTimeSlotListElement();t.innerHTML=this._createSkeletonSlots();var n=this._getNoResultElement();n.innerText=""},_createSkeletonSlots:function e(){var t=[];for(var n=0;n<5;n++)t.push('<li class="timeslot-list__item timeslot-list__item--skeleton"></li>');return t.join("")},_showTimeSlots:function e(t){var n=this;if(t.length<1){this._setMessageForTimeSlot("no result");return}var i=this._removeUnavailableTimeSlots(t);if(i.length<1){this._setMessageForTimeSlot("sold out");return}var a=this._getTimeSlotListElement();a.innerHTML=i.map((function(e){return n._createTimeSlotItem(e)})).join("");this._setDatePickerActive(true)},_removeUnavailableTimeSlots:function e(t){return"appointment"===this.service.type?t:t.filter((function(e){return e.registration&&e.registration.capacity-e.registration.registeredCount>0}))},_setMessageForTimeSlot:function e(t){this._emptyTimeSlotList();var n=this._getNoResultElement();n.innerHTML=this._getTimeSlotMessage(t);this._setDatePickerActive(true)},_getNoResultElement:function e(){return this.el.querySelector(".js-no-results")},_emptyTimeSlotList:function e(){var t=this._getTimeSlotListElement();t.innerHTML=""},_createTimeSlotItem:function e(t){var n=null!==t.serviceScheduleId?t.serviceScheduleId:"";var i=this._formatSlotTime(t.start);var a=this._formatSlotCapacityMessage(t);return'<li class="timeslot-list__item js-timeslot-item" \n        tabindex=0 role="button" aria-label="'.concat(i.toString(),'" \n        data-service-schedule-id="').concat(n,'"\n        data-date-time="').concat(t.start,'">\n        <span tabindex=\'-1\' class="timeslot-list__item-text">').concat(i,"</span>\n        ").concat(""!==a?'<span class="timeslot-list__item-text--capacity">'.concat(a,"</span>"):"","\n        </li>")},_formatSlotTime:function e(t){var n=new Date(t);return"".concat(n.getHours(),":").concat(this._leftPad(n.getMinutes()))},_formatSlotCapacityMessage:function e(t){return t.registration?App.t("widgets.bookingsservice.remaining_capacity","%1 places remaining",t.registration.capacity-t.registration.registeredCount):""},_onTimeSlotClicked:function e(t){if(!this._isWidgetInSitePublishedMode())return;if("appointment"===this.service.type){var n=t.currentTarget.dataset.dateTime;this._checkoutWithAppointment(n)}else{var i=t.currentTarget.dataset.serviceScheduleId;this._checkoutWithEvent(i)}},_checkoutWithAppointment:function e(t){var n=this.service.id;var i="".concat(this._formatAsUtcDay(t)," ").concat(this._formatAsUtcTime(t));this.submitBooking("appointments/".concat(n),{startDateTime:i})},_checkoutWithEvent:function e(t){this.submitBooking("events/".concat(t))},submitBooking:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i=this._getCheckoutDomain();var a=document.createElement("form");a.method="post";a.action="".concat(i).concat(t,"/bookings");Object.keys(n).forEach((function(e){var t=document.createElement("input");t.type="hidden";t.name=e;t.value=n[e];a.appendChild(t)}));document.body.appendChild(a);a.submit()},_isWidgetInSitePublishedMode:function e(){return"published"===c.default.getAppData("mode")},_getActiveServices:function e(){var t=this._getConnectBookingsData();return t.activeServices?t.activeServices:[]},_hasActiveServices:function e(){var t=this._getActiveServices();return t.length>0},_getConnectBookingsData:function e(){return c.default.getData("connect").bookings},_formatDateTime:function e(t){return"".concat(t.getUTCFullYear(),"-").concat(this._leftPad(t.getUTCMonth()+1),"-").concat(this._leftPad(t.getUTCDate())," ").concat(this._leftPad(t.getUTCHours()),":").concat(this._leftPad(t.getUTCMinutes()))},_getCheckoutDomain:function e(){var t=App.session.get("domain");return"https://bookings-checkout.".concat(t,"/")},_getTimeSlotMessage:function e(t){switch(t){case"sold out":return App.t("widgets.bookingsservice.event_sold_out","Sorry, this event is sold out");case"no monthly result":if("appointment"===this.service.type)return App.t("widgets.bookingsservice.no_monthly_appointments","There are no available appointment dates during this month");if("event"===this.service.type)return App.t("widgets.bookingsservice.no_monthly_events","There are no available event dates during this month");break;case"no result":return App.t("widgets.bookingsservice.no_result","Sorry, there are no time slots available on this date");case"no event result":return App.t("widgets.bookingsservice.no_event_result","Sorry, there are no time slots available for this event");case"error":return App.t("widgets.bookingsservice.not_found","This service may have been deleted or suspended");default:break}return App.t("widgets.bookingsservice.error_result","There has been an error with this page. %1Refresh%2 to try again",'<a class="js-reload-page" href="#">',"</a>")},_onReloadPageClicked:function e(t){t.preventDefault();window.location.reload(true)},_isEventType:function e(){return this.service&&"event"===this.service.type},_getEventMonthSlotsContainer:function e(){return this.el.querySelector(".js-event-month-slots-container")},_getShowMoreDatesButton:function e(){return this.el.querySelector(".js-show-more-dates")},_setMessageForEventList:function e(t){var n=this._getEventListMessageElement();n.innerHTML=this._getTimeSlotMessage(t)},_getEventListMessageElement:function e(){return this.el.querySelector(".js-event-list-message")}});BaseKit.Widget.BookingsserviceView=m;var v=i=m},4743:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{title:App.t("widgets.bookingsservicelist.title","Services")},initialize:function e(){return this}});BaseKit.Widget.BookingsservicelistModel=o;var s=i=o},4737:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_bookingsservicelist",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.BookingsservicelistView=o;var s=i=o},6377:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{action:"none",target:"New",text:App.t("widgets.button.default_text","Button"),url:"",align:"widget-align-left"},initialize:function e(){return this}});BaseKit.Widget.ButtonModel=o;var s=i=o},5267:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_button",events:{"click .js-btn":"buttonClicked"},initialize:function e(t){BaseKit.Widget.CoreView.prototype.initialize.call(this,t)},buttonClicked:function e(t){t.preventDefault();this.model.get("action")&&"none"!==this.model.get("action")&&("external"===this.model.get("action")?this.openExternalLink():this.openLink())},openLink:function e(){var t=App.stripUrlScheme(this.model.get("url"));"_blank"!==this.model.get("target")?window.location.assign(t):window.open(t)},openExternalLink:function e(){"_blank"!==this.model.get("target")?window.location.assign(this.model.get("url")):window.open(this.model.get("url"))}});BaseKit.Widget.ButtonView=o;var s=i=o},6875:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{phone:"profile",align:"",phoneText:App.t("widgets.clicktocall.default_text","Click to call")},initialize:function e(){return this}});BaseKit.Widget.ClicktocallModel=o;var s=i=o},4029:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_clicktocall",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.ClicktocallView=o;var s=i=o},3067:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({initialize:function e(){return this}});BaseKit.Widget.CompanyaddressModel=o;var s=i=o},8589:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_companyaddress",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.CompanyaddressView=o;var s=i=o},2661:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{maxHeight:120,alt:""},initialize:function e(){return this}});BaseKit.Widget.CompanybrandModel=o;var s=i=o},5351:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_companybrand",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.CompanybrandView=o;var s=i=o},1703:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({initialize:function e(){return this}});BaseKit.Widget.CompanydescriptionModel=o;var s=i=o},6001:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_companydescription",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.CompanydescriptionView=o;var s=i=o},1595:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({initialize:function e(){return this}});BaseKit.Widget.CompanyheaderModel=o;var s=i=o},8477:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_companyheader",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.CompanyheaderView=o;var s=i=o},3667:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({initialize:function e(){return this}});BaseKit.Widget.CompanynameModel=o;var s=i=o},8981:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_companyname",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.CompanynameView=o;var s=i=o},4719:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{contactType:"address",email:"profile",phone:"profile",linkedin:"profile",twitter:"profile",facebook:"profile",instagram:"profile",pinterest:"profile",rss:"profile",youtube:"profile",vkontakte:"profile",xing:"profile",tiktok:"profile",align:"widget-align-left"},initialize:function e(){return this}});BaseKit.Widget.ContactModel=o;var s=i=o},7689:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_contact",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.ContactView=o;var s=i=o},4607:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:function e(t){var e={type:"widget.content"};"widget.content.h1"===t?e.content="<h1>".concat(App.t("shared_views.widget.contenth1.title","HEADING 1"),"</h1>"):"widget.content"===t&&(e.content="<p>".concat(App.t("shared_views.widget.content.default_v8","I think that, as life is action and passion, we should share the passion and action of our time at peril of being judged not to have lived at all."),"</p>"));return e},initialize:function e(){return this}});BaseKit.Widget.ContentModel=o;var s=i=o},1769:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_content",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.ContentView=o;var s=i=o},6893:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{description:"assets",linkUrl:"none",imagePopup:true,target:"none",action:"none",scale:"original",imageWidth:"auto",alt:"",title:"assets",align:"widget-align-left"},initialize:function e(){return this}});BaseKit.Widget.ContentgroupModel=o;var s=i=o},5631:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=o(n(5705));var r=o(n(9333));function o(e){return e&&e.__esModule?e:{default:e}}var s=a.default.extend({template:"widget_contentgroup",initialize:function e(t){a.default.prototype.initialize.call(this,t);Cocktail.mixin(this,r.default)}});BaseKit.Widget.ContentgroupView=s;var l=i=s},6671:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i=Backbone.Model.extend({idAttribute:"uniqueId",defaults:{},temporary:{},save:function e(){},setTemporary:function e(t,i,a){var r=!!a&&a.silent;"object"===n(t)?Object.assign(this.temporary,t):this.temporary[t]=i;r||this.trigger("change",this)},getTemporary:function e(t){return this.temporary[t]}});BaseKit.Widget.CoreModel=i;var a=t["default"]=i},9502:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n={getPluginData:function e(t){return window.Server.plugins[t]||{}},getAppData:function e(t){return window.Server.app[t]},getAppBag:function e(){return window.Server.app},getData:function e(t){return window.Server[t]}};var i=t["default"]=n},5705:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=a(n(9502));function a(e){return e&&e.__esModule?e:{default:e}}var r=Backbone.View.extend({initialize:function e(t){this.profileModel=t.profile||window.ProfileModel;this.properties=t.properties||{};this.enablePolicyPages=t.enablePolicyPages;this.policyPageData=t.policyPageData;this.store=t.store;this.listenTo(this.model,"change",this.render);return this},render:function e(){var t=null;if("function"!==typeof Twig.templates[this.template])throw new Error("No such template:".concat(this.template));t=Twig.render(Twig.templates[this.template],{uniqueId:true!==this.properties.fixed?this.properties.uniqueId:this.properties.uniqueHTMLId,debugMode:this.properties.debugMode||void 0,data:window._.extend(this.model.toJSON(),this.model.temporary),profile:this.profileModel.toJSON(),app:{mode:Server.app.mode},plugins:{assets:{images:BaseKit.Globals.imageAssets?o(BaseKit.Globals.imageAssets.toJSON()):Server.plugins.assets.images},blog:i.default.getPluginData("blog"),ecommerce:i.default.getPluginData("ecommerce")},connect:{bookings:this._getConnectBookingsData()},widget:this.properties,enablePolicyPages:this.enablePolicyPages||false,siteLanguages:this.store.getState().language.siteLanguages,siteDefaultLanguage:this.store.getState().language.defaultLanguage,siteCurrentLanguage:{language:this.store.getState().language.current},policyPageData:this.policyPageData,isRTLLanguage:this.store.getState().page.isRTLLanguage,packageCapabilities:Server.packageCapabilities,editorVersion:Server.editorVersion});this.$el.empty().append(t);"function"===typeof this.afterRender&&this.afterRender.call(this);return this},_getConnectBookingsData:function e(){var t=i.default.getData("connect");return t&&t.bookings?t.bookings:null}});function o(e){var t={};e.forEach((function(e){t[e.ref]=e}));return t}BaseKit.Widget.CoreView=r;var s=t["default"]=r},4371:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({initialize:function e(){return this}});BaseKit.Widget.DefaultWidgetModel=o;var s=i=o},3669:(e,t)=>{"use strict";var n;n={value:true};n=void 0;var i=Marionette.CollectionView.extend({render:function e(){}});BaseKit.Widget.DefaultWidgetView=i;var a=n=i},5711:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({initialize:function e(){return this}});BaseKit.Widget.DisqusModel=o;var s=i=o},7865:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=l(n(5705));var r=l(n(9403));var o=l(n(9502));var s=l(n(1944));function l(e){return e&&e.__esModule?e:{default:e}}var c=a.default.extend({template:"widget_disqus",initialize:function e(t){var n=this;a.default.prototype.initialize.call(this,t);this.profileModel=t.profile||new r.default(window.Profile.profile);if("published"!==o.default.getAppData("mode")||s.default.isScriptAllowedByCookieConsent(o.default,window.localStorage))this.initializeDisqus();else{var i=function e(){n.initializeDisqus()};var l=i.bind(this);document.getElementById("js-cookie-consent-event").addEventListener("cookieConsentEvent",l)}},initializeDisqus:function e(){var t=s.default.isScriptAllowedByCookieConsent(o.default,window.localStorage);if(!t)return;if(this.profileModel.get("disqus_shortname")&&"row-preview"!==o.default.getAppData("mode")){var n=this.profileModel.get("disqus_shortname");(function(){var e=document;e.querySelector("#siteFrame")&&(e=e.querySelector("#siteFrame").contentWindow.document);var t=e.createElement("script");t.type="text/javascript";t.async=true;t.src="//".concat(n,".disqus.com/embed.js");(e.getElementsByTagName("head")[0]||e.getElementsByTagName("body")[0]).appendChild(t)})()}}});BaseKit.Widget.DisqusView=c;var u=i=c},5457:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{socialEntityId:"",orgType:"usorgs"},initialize:function e(){return this}});BaseKit.Widget.DonationModel=o;var s=i=o},6507:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_donation",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.DonationView=o;var s=i=o},315:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{text:App.t("widgets.dropbox.default_text","Download"),align:"",showFileName:0},initialize:function e(){return this}});BaseKit.Widget.DropboxModel=o;var s=i=o},8301:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_dropbox",events:{"click .js-link-btn":"linkClicked"},initialize:function e(t){a.default.prototype.initialize.call(this,t)},linkClicked:function e(){var t=this.model.get("link");t&&t.length>0?window.open(t):alert(App.t("widgets.dropbox.no_file_added","No file added"))}});BaseKit.Widget.DropboxView=o;var s=i=o},457:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{},initialize:function e(){return this}});BaseKit.Widget.EcombasketModel=o;var s=i=o},4691:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_ecombasket",events:{"click .js-pull":"buttonClicked","click .js-remove":"removeClicked"},initialize:function e(t){a.default.prototype.initialize.call(this,t);Backbone.Events.on("ecom.basket.changed",this.updateBasket.bind(this))},buttonClicked:function e(){this.$el.toggleClass("show-content");bk$(document).on("click.ecombasket",function(e){if(!bk$(e.target).closest(".ecombasket").length){this.$el.toggleClass("show-content");bk$(document).off("click.ecombasket")}}.bind(this))},removeClicked:function e(t){this.removeItem(bk$(t.target).attr("data-ref"))},updateBasket:function e(t){this.model.setTemporary({items:t.items,itemCount:t.itemCount,subTotal:t.subTotal,subTotalInclTax:t.subTotalInclTax})},removeItem:function e(t){bk$.ajax({method:"POST",url:"/store/cart/remove-item",data:{productVariantRef:t}}).done((function(e){Backbone.Events.trigger("ecom.basket.changed",e)}))}});BaseKit.Widget.EcombasketView=o;var s=i=o},7239:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{},initialize:function e(){return this}});BaseKit.Widget.EcombasketsummaryModel=o;var s=i=o},9649:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=o(n(5705));var r=o(n(4752));function o(e){return e&&e.__esModule?e:{default:e}}var s=a.default.extend({template:"widget_ecombasketsummary",events:{"click .js-add":"addItem","click .js-remove":"removeItem"},paypalCommerceClientId:null,paypalCommerceMerchantId:null,currency:"",initialize:function e(t){a.default.prototype.initialize.call(this,t);Backbone.Events.on("ecom.basket.changed",this.updateBasketSummary.bind(this));this.applyPaypalListener();this.setProductData()},applyPaypalListener:function e(){window.addEventListener("paypalCommerceDefined",function(e){this.paypalCommerceClientId=e.detail.clientId;this.paypalCommerceMerchantId=e.detail.merchantId;this.currency=e.detail.currency;this.bindPaypalButton()}.bind(this))},bindPaypalButton:function e(){if(!this._isPaypalCommerceEnabled())return;var t=new r.default;t.load({clientId:this.paypalCommerceClientId,merchantId:this.paypalCommerceMerchantId,currency:this.currency}).then(function(){paypal.Buttons({style:{layout:"horizontal",tagline:"false",height:55},createOrder:this.onPaypalCommerceCreateOrder.bind(this),onApprove:this.onPaypalCommerceOrderApproved.bind(this)}).render(".js-paypal-commerce-button-container")}.bind(this))},onPaypalCommerceOrderApproved:function e(){bk$.ajax({method:"POST",url:"/quick-order/approve",data:{payment_ref:this.model.getTemporary("paymentRef")}}).done((function(e){1===e.status&&(window.location.href=e.redirect)}))},onPaypalCommerceCreateOrder:function e(){return new Promise(function(e,t){bk$.ajax({method:"POST",url:"/quick-order/cart"}).done(function(n){if(1===n.status){this.model.setTemporary("paymentRef",n.payment_ref,{silent:true});e(n.order_id)}else t(new Error("Failed to create order"))}.bind(this)).error((function(){t(new Error("Failed to communicate with server"))}))}.bind(this))},setProductData:function e(){this.model.setTemporary("emptyItems",this.getEmptyItems(Server.plugins.ecommerce.cart.items),{silent:true})},getEmptyItems:function e(t){return _.filter(t,(function(e){return 0===e.quantity}))},updateBasketSummary:function e(t){t.items=_.union(t.items,this.model.getTemporary("emptyItems"));this.model.setTemporary({items:t.items,subTotal:t.subTotal,subTotalInclTax:t.subTotalInclTax});this.bindPaypalButton()},addItem:function e(t){var n=bk$(t.target).data("ref");this.disableProductQuantityButton(t.currentTarget);bk$.ajax({method:"POST",url:"/store/cart/add-item",data:{productVariantRef:n}}).done((function(e){Backbone.Events.trigger("ecom.basket.changed",e)}))},removeItem:function e(t){var n=bk$(t.target).data("ref");this.disableProductQuantityButton(t.currentTarget);bk$.ajax({method:"POST",url:"/store/cart/remove-item",data:{productVariantRef:n}}).done(function(e){this.removeEmptyItem(n);Backbone.Events.trigger("ecom.basket.changed",e)}.bind(this))},removeEmptyItem:function e(t){var n=_.filter(this.model.getTemporary("emptyItems"),(function(e){return e.ref!==t}));this.model.setTemporary("emptyItems",n,{silent:true})},disableProductQuantityButton:function e(t){t.setAttribute("disabled","disabled")},_isPaypalCommerceEnabled:function e(){return null!==this.paypalCommerceClientId&&null!==this.paypalCommerceMerchantId&&""!==this.currency}});BaseKit.Widget.EcombasketsummaryView=s;var l=i=s},3109:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{title:App.t("widgets.ecomcategorieslist.default_title","Categories"),showCount:true},initialize:function e(){return this}});BaseKit.Widget.EcomcategorieslistModel=o;var s=i=o},3351:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_ecomcategorieslist",events:{},initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.EcomcategorieslistView=o;var s=i=o},7503:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{},initialize:function e(){return this}});BaseKit.Widget.EcomconfirmationModel=o;var s=i=o},7641:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_ecomconfirmation",events:{},initialize:function e(t){a.default.prototype.initialize.call(this,t);this.clearCart()},clearCart:function e(){window.localStorage.removeItem("cart")}});BaseKit.Widget.EcomconfirmationView=o;var s=i=o},6189:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=o(n(6671));var r=n(3098);function o(e){return e&&e.__esModule?e:{default:e}}var s=a.default.extend({defaults:{limit:"20",columns:{value:3,class:"ecomproductslist-columns-three"},aspect:"square",carousel:false,displayBy:"tag"},initialize:function e(){return this},transformWidgetData:function e(t){if("string"===typeof t.columns)try{t.columns=JSON.parse(t.columns)}catch(e){var n=r.columnsOptions.find((function(e){return e.class===t.columns}));n&&(t.columns={value:n.value,class:n.class})}Object.keys(t).forEach((function(e){"products"===e&&(t[e]=JSON.parse(t[e]))}));return t}});BaseKit.Widget.EcomfeaturedproductsModel=s;var l=i=s},415:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=a(n(5705));function a(e){return e&&e.__esModule?e:{default:e}}var r=i.default.extend({template:"widget_ecomfeaturedproducts",events:{"click .js-btn-prev":"onPreviousClick","click .js-btn-next":"onNextClick","click .js-pagination-item":"onPaginationClick"},initialize:function e(t){i.default.prototype.initialize.call(this,t);this.carouselActive()&&this.setupCarousel()},render:function e(){i.default.prototype.render.call(this);if(this.carouselActive()){this.products=this.el.querySelector(".js-featuredproduct-list");this.items=this.products.querySelectorAll(".js-featuredproduct-item");this.dots=this.el.querySelectorAll(".js-pagination-item");this.updatePaginationDots()}return this},carouselActive:function e(){var t=this.el.querySelector(".js-featuredproduct-list");var n=this.model.get("selectedTag")||this.model.get("selectedCategory");var i=this.model.get("carousel");return t&&n&&i},setupCarousel:function e(){var t=this;this.products=this.el.querySelector(".js-featuredproduct-list");this.items=this.products.querySelectorAll(".js-featuredproduct-item");this.dots=this.el.querySelectorAll(".js-pagination-item");this.columns=parseInt(this.model.get("columns").value,10);var n=Math.ceil(this.items.length/this.columns)*this.columns;this.products.style.setProperty("--products",n);this.currentSlide=0;this.goToSlide(this.currentSlide);this.paginationDotsChange=new ResizeObserver((function(){t.currentSlide=0;t.goToSlide(0)}));this.paginationDotsChange.observe(this.products)},goToSlide:function e(t){this.currentSlide=t;var n=this.products.clientWidth;var i=this.items[0].offsetWidth;var a=Math.max(1,Math.floor(n/i));var r=t*a;var o=this.items[r];if(!o)return;this.products.scrollTo({left:o.offsetLeft,behavior:"smooth"});this.updatePaginationDots()},onPreviousClick:function e(t){t.preventDefault();this.currentSlide>0&&this.goToSlide(this.currentSlide-1)},onNextClick:function e(t){t.preventDefault();this.currentSlide<this.dots.length-1&&this.goToSlide(this.currentSlide+1)},onPaginationClick:function e(t){t.preventDefault();var n=t.currentTarget;var i=parseInt(n.getAttribute("data-slide"),10);isNaN(i)||this.goToSlide(i)},updatePaginationDots:function e(){var t=this;var n=this.el.querySelector(".js-pagination-list");this.dots=Array.from(this.el.querySelectorAll(".js-pagination-item"));if(!this.items.length)return;var i=this.products.clientWidth;var a=this.items[0].offsetWidth;var r=Math.max(1,Math.floor(i/a));var o=Math.ceil(this.items.length/r);this.dots.forEach((function(e,n){e.style.display=n<o?"":"none";e.classList.toggle("active",n===t.currentSlide)}));this.currentSlide>=o&&this.goToSlide(o-1);n.hidden=false}});BaseKit.Widget.EcomfeaturedproductsView=r;var o=t["default"]=r},3098:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=t.columnsOptions=void 0;var i=o(n(6342));var a=o(n(9502));var r=o(n(415));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var l=t.columnsOptions=[{text:"2",value:2,class:"ecomproductslist-columns-two"},{text:"3",value:3,class:"ecomproductslist-columns-three"},{text:"4",value:4,class:"ecomproductslist-columns-four"}];var c=function e(t,n){if(t.value<n.value)return-1;if(t.value>n.value)return 1;return 0};var u={initialize:function e(){},getCategoryData:function e(){var t=this._getStoreCategoryList().map((function(e){return{text:e.name,value:e.slug}})).sort(c);return t},getColumnsValue:function e(){var t=this.model.get("columns");if(t&&"object"===s(t)&&null!=t.value)return t.value;if("string"===typeof t){var n=l.find((function(e){return e.class===t}));if(n)return n.value}},getTagsData:function e(){var t=[];var n=this._getStoreTagsList();n.length>0&&bk$.each(n,(function(){t.push({text:this.title,value:this.slug})}));t.sort(c);return t},getSettings:function e(){return this.formattedSettings()},formattedSettings:function e(){var t=this.getTagsData();var n=this.getCategoryData();var a=this.featureFlagDataProvider.get("enableRows")&&!this.store.getState().env.V10CompatibilityMode;var r={title:(0,i.default)("widgets.ecomfeaturedproducts.title","Featured products"),groupInformation:[{groupId:1}],components:[{id:"widget-ecomfeaturedproducts-manage-products",type:"button",value:(0,i.default)("widgets.ecomproductslist.manage_products","Manage products"),groupId:1},{id:"widget-ecomfeaturedproducts-title",type:"text",autocorrect:"on",autocapitalize:"on",label:(0,i.default)("widgets.ecomfeaturedproducts.label_text","Label text"),value:this.model.get("title"),groupId:1},{id:"widget-ecomfeaturedproducts-limit",type:"select",label:(0,i.default)("widgets.ecomfeaturedproducts.limit","Product results"),value:this.model.get("limit"),data:[{text:"20",value:"20"},{text:"50",value:"50"}],groupId:1}]};this.model.get("selectedCategory")||n.push({text:(0,i.default)("widgets.ecomfeaturedproducts.no_category","No category selected"),value:void 0});this.model.get("selectedTag")||t.push({text:(0,i.default)("widgets.ecomfeaturedproducts.no_tag","No tag selected"),value:void 0});"category"===this.model.get("displayBy")&&(null===n||void 0===n?void 0:n.length)>0?r.components.splice(3,0,{id:"widget-ecomfeaturedproducts-category",type:"select",label:(0,i.default)("widgets.ecomfeaturedproducts.category","Product category"),value:this.model.get("selectedCategory"),data:n,groupId:1}):"tag"===this.model.get("displayBy")&&(null===t||void 0===t?void 0:t.length)>0?r.components.splice(3,0,{id:"widget-ecomfeaturedproducts-tag",type:"select",label:(0,i.default)("widgets.ecomfeaturedproducts.tag","Product tag"),value:this.model.get("selectedTag"),data:t,groupId:1}):r.components.push({type:"paragraph",value:(0,i.default)("widgets.ecomfeaturedproducts.no_tags_available","No tags available for your products. Add tags to your products to use this widget")});if(a){r.groupInformation.push({groupId:2,groupTitle:(0,i.default)("widgets.ecomfeaturedproducts.display","Display")}),r.components.splice(3,0,{id:"widget-ecomfeaturedproducts-display-by",type:"select",label:(0,i.default)("widgets.ecomfeaturedproducts.display_by_text","Display by"),value:this.model.get("displayBy"),data:[{text:(0,i.default)("widgets.ecomfeaturedproducts.category_text","Category"),value:"category"},{text:(0,i.default)("widgets.ecomfeaturedproducts.tag_text","Tag"),value:"tag"}],groupId:1});r.components.push({id:"widget-ecomfeaturedproducts-columns",type:"select",label:App.t("widgets.ecomproductslist.columns","Product columns"),value:this.getColumnsValue()||3,data:l,groupId:2},{id:"widget-ecomfeaturedproducts-aspect",type:"select",label:(0,i.default)("widgets.ecomproductslist.aspect","Image dimensions"),value:this.model.get("aspect"),data:[{text:(0,i.default)("widgets.ecomproductslist.aspect.original","Original"),value:"original"},{text:(0,i.default)("widgets.ecomproductslist.aspect.square","Square (1:1)"),value:"square"},{text:(0,i.default)("widgets.ecomproductslist.aspect.landscape_standard","Horizontal (4:3)"),value:"landscape-standard"},{text:(0,i.default)("widgets.ecomproductslist.aspect.portrait_standard","Portrait (3:4)"),value:"portrait-standard"}],groupId:2},{id:"widget-ecomfeaturedproducts-carousel",type:"checkbox",label:App.t("widgets.ecomfeaturedproduct.carousel","Display as carousel"),value:!!this.model.get("carousel"),groupId:2})}return r},listenForSettingsChanges:function e(t){this.listenTo(t,"widget-ecomfeaturedproducts-manage-products",this.goToStore);this.listenTo(t,"widget-ecomfeaturedproducts-title",this.changeTitle);this.listenTo(t,"widget-ecomfeaturedproducts-tag",this.changeTag);this.listenTo(t,"widget-ecomfeaturedproducts-category",this.changeCategory);this.listenTo(t,"widget-ecomfeaturedproducts-limit",this.changeLimit);this.listenTo(t,"widget-ecomfeaturedproducts-columns",this.selectColumns);this.listenTo(t,"widget-ecomfeaturedproducts-aspect",this.changeAspect);this.listenTo(t,"widget-ecomfeaturedproducts-carousel",this.toggleCarousel);this.listenTo(t,"widget-ecomfeaturedproducts-display-by",this.changeDisplayBy)},goToStore:function e(){var t=App.session.get("protocol");var n=App.session.get("domain");var i=App.session.get("siteRef");var a="".concat(t,"://store.").concat(n,"/products?siteRef=").concat(i);window.parent.location.assign(a)},changeTitle:function e(t){this.model.set("title",t)},changeCategory:function e(t){this.model.set("selectedTag",null,{silent:true});this.model.set("selectedCategory",t,{silent:true});this.getProducts()},changeTag:function e(t){this.model.set("selectedTag",t,{silent:true});this.model.set("selectedCategory",null,{silent:true});this.getProducts()},changeLimit:function e(t){this.model.set("limit",t,{silent:true});this.getProducts()},getProducts:function e(){var t=App.session.get("serveSiteFromEditorSubdomainQueryParam")+"="+App.session.get("serveSiteFromEditorSubdomainQueryValue");var n=function(e){var t=e.products;this.model.set("products",t);this.render()}.bind(this);bk$.ajax({method:"POST",url:"/_store/products?"+t,context:this,data:{displayBy:this.model.get("displayBy"),tag:this.model.get("selectedTag"),category:this.model.get("selectedCategory"),limit:this.model.get("limit")}}).done(n)},_getStoreCategoryList:function e(){if(Object.keys(a.default.getPluginData("ecommerce")).length>0)return a.default.getPluginData("ecommerce").store.categories;return[]},_getStoreTagsList:function e(){if(Object.keys(a.default.getPluginData("ecommerce")).length>0)return a.default.getPluginData("ecommerce").store.tags;return[]},selectColumns:function e(t){var n=l.find((function(e){return e.value==parseInt(t,10)}));this.model.set("columns",{value:n.value,class:n.class})},changeAspect:function e(t){this.model.set("aspect",t)},toggleCarousel:function e(t){if(t){var n=this.getColumnsValue();"object"===s(n)&&"string"===typeof n.class||this.selectColumns(n)}this.model.set("carousel",t)},changeDisplayBy:function e(t){this.model.set("displayBy",t);Editor.Events.trigger("widgetSettings:changed",this)}};Cocktail.mixin(r.default,u);var d=t["default"]=u},3523:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{},initialize:function e(){return this}});BaseKit.Widget.EcomlegalModel=o;var s=i=o},1173:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_ecomlegal",events:{},initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.EcomlegalView=o;var s=i=o},3159:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{align:"left",size:"original",aspect:"original"},initialize:function e(){return this}});BaseKit.Widget.EcomproductModel=o;var s=i=o},257:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=s(n(5705));var r=s(n(9333));var o=s(n(4752));function s(e){return e&&e.__esModule?e:{default:e}}var l=a.default.extend({template:"widget_ecomproduct",events:{"change .js-option":"dropdownChanged","click .js-ecom-product-add-to-cart-btn":"addToCartButtonClicked","click .js-ecom-product-image-wrap":"imageClicked"},paypalCommerceClientId:null,paypalCommerceMerchantId:null,currency:"",initialize:function e(t){a.default.prototype.initialize.call(this,t);Backbone.Events.on("ecom.basket.changed",this.handleCartChange.bind(this));this.applyPaypalListener();this.setProductData()},applyPaypalListener:function e(){window.addEventListener("paypalCommerceDefined",function(e){this.paypalCommerceClientId=e.detail.clientId;this.paypalCommerceMerchantId=e.detail.merchantId;this.currency=e.detail.currency;this.bindPaypalButton()}.bind(this))},bindPaypalButton:function e(){if(!this._isPaypalCommerceEnabled())return;var t=new o.default;t.load({clientId:this.paypalCommerceClientId,merchantId:this.paypalCommerceMerchantId,currency:this.currency}).then(function(){paypal.Buttons({style:{layout:"horizontal",shape:"pill",tagline:"false",size:"responsive"},createOrder:this.onPaypalCommerceCreateOrder.bind(this),onApprove:this.onPaypalCommerceOrderApproved.bind(this)}).render(".js-paypal-commerce-button-container")}.bind(this))},onPaypalCommerceOrderApproved:function e(){bk$.ajax({method:"POST",url:"/quick-order/approve",data:{payment_ref:this.model.getTemporary("paymentRef")}}).done((function(e){1===e.status&&(window.location.href=e.redirect)}))},onPaypalCommerceCreateOrder:function e(){var t={};t[this.model.getTemporary("selectedVariant").ref]=1;return new Promise(function(e,n){bk$.ajax({method:"POST",url:"/quick-order/purchase",data:{productVariantRefs:t}}).done(function(t){if(1===t.status){this.model.setTemporary("paymentRef",t.payment_ref,{silent:true});e(t.order_id)}else n(new Error("Failed to create order"))}.bind(this)).error((function(){n(new Error("Failed to communicate with server"))}))}.bind(this))},setProductData:function e(){if(!this.$('[name="product"]').length)return;var t=JSON.parse(this.$('[name="product"]').val());this.model.setTemporary({product:t,variants:t.variants,options:t.options,selectedVariant:t.defaultVariant,addingToCart:false,addedToCart:false},void 0,{silent:true})},imageClicked:function e(t){var n=this.$(".js-ecom-product-preview-image-wrap");var i=this.$(".js-ecom-product-preview-image");var a=bk$(t.currentTarget).find("img").attr("src");i.attr("src",a);n.attr("data-image-href",a).css("background-image","url(".concat(a,")"))},addToCartButtonClicked:function e(){this.showAddingState();this.addToCart(this.model.getTemporary("selectedVariant").ref);return false},addToCart:function e(t){bk$.ajax({method:"POST",url:"/store/cart/add-item",data:{productVariantRef:t}}).done(function(e){this.showAddedState();Backbone.Events.trigger("ecom.basket.changed",e)}.bind(this));return false},showAddingState:function e(){this.$(".js-ecom-product-add-to-cart-btn").addClass("submitting");this.model.setTemporary("addingToCart",true)},showAddedState:function e(){this.$(".js-ecom-product-add-to-cart-btn").removeClass("submitting");this.model.setTemporary("addedToCart",true);null!==this.animationTimeout&&clearTimeout(this.animationTimeout);this.animationTimeout=setTimeout(function(){this.model.setTemporary("addingToCart",false);this.model.setTemporary("addedToCart",false);this.bindPaypalButton()}.bind(this),500)},dropdownChanged:function e(t){var n=parseInt(t.target.name,10);var i=parseInt(t.target.value,10);this.selectVariant(n,i)},selectVariant:function e(t,n){var i=this.findVariantWithOptionValues(this.getCurrentOptionChoices());var a=_.findWhere(this.model.getTemporary("options"),{ref:t});a.selectedValue=n;this.model.setTemporary("selectedVariant",i);this.bindPaypalButton()},findVariantWithOptionValues:function e(t){var n=this;var i=_.find(this.model.getTemporary("variants"),(function(e){var i=true;if(e.ref===n.model.getTemporary("product").primaryVariantRef)return false;_.each(t,(function(t,n){var a=_.findWhere(e.options,{ref:parseInt(n,10)});a.value.ref!==t&&(i=false)}));return i}));if(i)return i;return null},getCurrentOptionChoices:function e(){var t={};this.$(".js-option").each((function(){t[this.name]=parseInt(this.value,10)}));return t},handleCartChange:function e(t){var n=null;var i=null;_.each(this.model.getTemporary("variants"),(function(e){e.cartQuantity=0;n=_.findWhere(t.items,{ref:e.ref});if(!n)return;e.cartQuantity=n.quantity}));i=_.findWhere(this.model.getTemporary("variants"),{ref:this.model.getTemporary("selectedVariant").ref});this.model.setTemporary("selectedVariant",i);this.bindPaypalButton()},_isPaypalCommerceEnabled:function e(){return null!==this.paypalCommerceClientId&&null!==this.paypalCommerceMerchantId&&""!==this.currency}});Cocktail.mixin(l,r.default);BaseKit.Widget.EcomproductView=l;var c=i=l},3045:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=o(n(6671));var r=o(n(6342));function o(e){return e&&e.__esModule?e:{default:e}}var s=a.default.extend({defaults:{title:(0,r.default)("widgets.ecomproductlist.products","Products"),productFiltering:true,productTagsAndCategories:true,productSearch:true,showPageTitle:1,categories:"",tags:"",columns:"ecomproductslist-columns-three",aspect:"original"},initialize:function e(){return this}});BaseKit.Widget.EcomproductslistModel=s;var l=i=s},4151:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_ecomproductslist",events:{"change .js-display-control":"displayChanged","submit .js-productlist-display-form":"formSubmitted","click .js-redirect-page":"redirectToShop"},initialize:function e(t){a.default.prototype.initialize.call(this,t)},displayChanged:function e(){this.$(".js-productlist-display-form").submit()},formSubmitted:function e(){var t=this.$('[name="productlist-sort"] option[value="score-desc"]');var n=this.$('[name="productlist-search"]');!t.length&&n.val()&&n.val().length&&this.$('[name="productlist-sort"]').append('<option value="score-desc"></option>').val("score-desc")},redirectToShop:function e(){var t=window.top.App.frontEndBucket.protocol;var n=window.top.App.frontEndBucket.domain;var i="".concat(t,"://store.").concat(n);window.top.location.href=i}});BaseKit.Widget.EcomproductslistView=o;var s=i=o},2227:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{},initialize:function e(){return this}});BaseKit.Widget.EcwidModel=o;var s=i=o},7909:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=s(n(5705));var r=s(n(9502));var o=s(n(1944));function s(e){return e&&e.__esModule?e:{default:e}}var l=a.default.extend({template:"widget_ecwid",storeId:"",frame:null,initialize:function e(t){var n=this;a.default.prototype.initialize.call(this,t);if("published"!==r.default.getAppData("mode")||o.default.isScriptAllowedByCookieConsent(r.default,window.localStorage))this.refreshWidget();else{var i=function e(){n.refreshWidget()};var s=i.bind(this);document.getElementById("js-cookie-consent-event").addEventListener("cookieConsentEvent",s)}},refreshWidget:function e(){var t=o.default.isScriptAllowedByCookieConsent(r.default,window.localStorage);if(!t)return;this.storeId=r.default.getData("ecwidStoreId");"edit"!==r.default.getAppData("mode")?this._loadScript():this._loadIframe()},_loadScript:function e(){var t=this._getStoreElementId();var n=this._getContentElement();n.innerHTML='<div id="'.concat(t,'"></div>');this._addEcwidScript(window)},_loadIframe:function e(){this.frame=this._getFrameElement();var t=this._getStoreElementId();var n=document.createElement("div");n.innerHTML='<div id="'.concat(t,'"></div>');this.frame.contentWindow.document.body.appendChild(n);this._addEcwidScript(this.frame.contentWindow)},_getStoreElementId:function e(){return"my-store-".concat(this.storeId)},_addEcwidScript:function e(t){var n=this._getStoreElementId();t.ecwid_script_defer=true;t.ecwid_dynamic_widgets=true;"undefined"!=typeof Ecwid&&Ecwid.destroy();t._xnext_initialization_scripts=[{widgetType:"ProductBrowser",id:n,arg:["id=productBrowser"]}];if(document.getElementById("ecwid-script"))ecwid_onBodyDone();else{var i=document.createElement("script");i.charset="utf-8";i.type="text/javascript";i.src="https://app.ecwid.com/script.js?".concat(this.storeId);t.document.body.appendChild(i)}},_getContentElement:function e(){return this.el.querySelector(".js-ecwid-content")},_getFrameElement:function e(){return this.el.querySelector(".js-ecwid-iframe")},_updateFrameHeight:function e(){var t=this._getFrameStoreElement();this.frame.style.height="".concat(t.offsetHeight,"px")},_getFrameStoreElement:function e(){var t=this._getStoreElementId();return this.frame.contentWindow.document.getElementById(t)}});BaseKit.Widget.EcwidView=l;var c=i=l},7911:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{align:"widget-align-left"},initialize:function e(){return this}});BaseKit.Widget.EcwidbasketModel=o;var s=i=o},9745:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=s(n(5705));var r=s(n(9502));var o=s(n(1944));function s(e){return e&&e.__esModule?e:{default:e}}var l=a.default.extend({template:"widget_ecwidbasket",storeId:"",frame:null,initialize:function e(t){var n=this;a.default.prototype.initialize.call(this,t);if("published"!==r.default.getAppData("mode")||o.default.isScriptAllowedByCookieConsent(r.default,window.localStorage))this.refreshWidget();else{var i=function e(){n.refreshWidget()};var s=i.bind(this);document.getElementById("js-cookie-consent-event").addEventListener("cookieConsentEvent",s)}},refreshWidget:function e(){var t=o.default.isScriptAllowedByCookieConsent(r.default,window.localStorage);if(!t)return;this.storeId=r.default.getData("ecwidStoreId");"edit"===r.default.getAppData("mode")&&this._loadIframe()},_loadIframe:function e(){var t=this;this.frame=this._getFrameElement();var n=document.createElement("div");var i='data-responsive="false"';var a='data-fixed-shape="rect"';n.innerHTML='<div class="ec-cart-widget" '.concat(i," ").concat(a,'"></div>');this.frame.contentWindow.document.body.appendChild(n);this._frameStyleReset();this._addEcwidScript(this.frame.contentWindow).then((function(){t._addEcwidInit(t.frame.contentWindow)}))},_addEcwidScript:function e(t){var n=document.createElement("script");n.charset="utf-8";n.type="text/javascript";n.src="https://app.ecwid.com/script.js?".concat(this.storeId);t.document.body.appendChild(n);return new Promise((function(e,t){n.onload=function(){e()};n.onerror=function(){t()}}))},_addEcwidInit:function e(t){var n=document.createElement("script");n.charset="utf-8";n.type="text/javascript";n.text="Ecwid.init();";t.document.body.appendChild(n)},_frameStyleReset:function e(){var t=this.frame.contentWindow.document.querySelector(".ec-cart-widget");this.frame.contentWindow.document.body.style.margin="0";t.style.transform="scale(0.78)"},_getFrameElement:function e(){return this.el.querySelector(".js-ecwidbasket-iframe")},_getFrameBasketElement:function e(){var t=this._getBasketElement();return this.frame.contentWindow.document.getElementsByClassName(t)}});BaseKit.Widget.EcwidbasketView=l;var c=i=l},7727:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{align:"widget-align-left"},initialize:function e(){return this}});BaseKit.Widget.EcwidsearchModel=o;var s=i=o},809:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=s(n(5705));var r=s(n(9502));var o=s(n(1944));function s(e){return e&&e.__esModule?e:{default:e}}var l=a.default.extend({template:"widget_ecwidsearch",storeId:"",frame:null,initialize:function e(t){var n=this;a.default.prototype.initialize.call(this,t);if("published"!==r.default.getAppData("mode")||o.default.isScriptAllowedByCookieConsent(r.default,window.localStorage))this.refreshWidget();else{var i=function e(){n.refreshWidget()};var s=i.bind(this);document.getElementById("js-cookie-consent-event").addEventListener("cookieConsentEvent",s)}},refreshWidget:function e(){var t=o.default.isScriptAllowedByCookieConsent(r.default,window.localStorage);if(!t)return;this.storeId=r.default.getData("ecwidStoreId");"edit"!==r.default.getAppData("mode")?this._loadScript():this._loadIframe()},_loadScript:function e(){var t=this._getSearchElementId();var n=this._getSearchElement();n.innerHTML='<div id="'.concat(t,'"></div>')},_loadIframe:function e(){var t=this._getSearchElementId();var n=document.createElement("div");n.innerHTML='<div id="'.concat(t,'"></div>');this.frame=this._getFrameElement();this.frame.contentWindow.document.body.appendChild(n);this._iframeStyleReset();this._addEcwidScript(this.frame.contentWindow)},_getSearchElementId:function e(){return"my-search-".concat(this.storeId)},_addEcwidScript:function e(t){var n=this._getSearchElementId();t.ecwid_script_defer=true;var i=document.createElement("script");i.charset="utf-8";i.type="text/javascript";i.id="ecwid-script";i.src="https://app.ecwid.com/script.js?".concat(this.storeId);t.document.body.appendChild(i);t._xnext_initialization_scripts=[{widgetType:"SearchWidget",id:n,arg:["id=".concat(n)]}]},_iframeStyleReset:function e(){this.frame.contentWindow.document.body.style.margin="0"},_getSearchElement:function e(){return this.el.querySelector(".js-ecwidsearch-content")},_getFrameElement:function e(){return this.el.querySelector(".js-ecwidsearch-iframe")}});BaseKit.Widget.EcwidsearchView=l;var c=i=l},6589:(e,t)=>{"use strict";var n;n={value:true};n=void 0;var i=BaseKit.Widget.CoreModel.extend({defaults:{email:"profile"},initialize:function e(){return this}});BaseKit.Widget.EmaildisplayModel=i;var a=n=i},7199:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_emaildisplay",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.EmaildisplayView=o;var s=i=o},4243:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=o(n(6671));var r=o(n(9502));function o(e){return e&&e.__esModule?e:{default:e}}var s=a.default.extend({defaults:{type:"widget.embed",align:"widget-align-left"},initialize:function e(){return this},getUserPolicyPreferences:function e(){return{warningHasBeenSeen:"1"===localStorage.getItem("bk-cookie-warning"),preferencesAllowed:"1"===localStorage.getItem("bk-cookie-warning-preferences"),analyticalAllowed:"1"===localStorage.getItem("bk-cookie-warning-analytics"),advertisingAllowed:"1"===localStorage.getItem("bk-cookie-warning-advertising")}},allowedByUserCookiePolicy:function e(){var t;var n=this.getUserPolicyPreferences(),i=n.advertisingAllowed,a=n.preferencesAllowed,r=n.analyticalAllowed;var o={advertising:true,preferences:true,analytics:true};var s=(null===(t=this.attributes)||void 0===t?void 0:t.options)||o,l=s.advertising,c=s.preferences,u=s.analytics;var d=!l||i;var f=!c||a;var h=!u||r;return d&&f&&h},isPublished:function e(){return"published"===r.default.getAppData("mode")},cookieWarningUrlExists:function e(){return""!==r.default.getData("cookieWarningUrl")}});BaseKit.Widget.EmbedModel=s;var l=i=s},3461:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_embed",initialize:function e(t){a.default.prototype.initialize.call(this,t);this.hideWidget();var n=this.model.cookieWarningUrlExists();if(!n){this.refreshCode();return}var i=this.model.getUserPolicyPreferences().warningHasBeenSeen;var r=this.model.isPublished();if(!i&&r){document.getElementById("js-cookie-consent-event").addEventListener("cookieConsentEvent",this.refreshCode.bind(this));return}this.refreshCode()},refreshCode:function e(){var t=this.model.cookieWarningUrlExists();var n=this.model.allowedByUserCookiePolicy();var i=this.model.isPublished();if(t&&!n&&i){this.hideWidget();return}this.showWidget();var a=this.model.get("code");if(a&&a.length>0){this.$(".js-default").hide();true!==this.properties.debugMode?this.$(".js-content").show().writeCapture().html(a,{proxyGetElementById:true,writeOnGetElementById:true}):this.$(".js-content").show().text(a)}else{this.$(".js-default").show();this.$(".js-content").hide()}},getParentNode:function e(){var t=this.el.id.split("-");t.pop();var n=t.join("-");return document.getElementById(n)},showWidget:function e(){this.getParentNode().classList.remove("hidden")},hideWidget:function e(){this.getParentNode().classList.add("hidden")}});BaseKit.Widget.EmbedView=o;var s=i=o},4823:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=o(n(6671));var a=o(n(9502));var r=n(2047);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,i,a,r,o){try{var s=e[r](o);var l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(i,a)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){s(r,i,a,o,l,"next",e)}function l(e){s(r,i,a,o,l,"throw",e)}o(void 0)}))}}var c=Backbone.View.extend({template:"widget_extendednavigationbasket",events:{"click .js-pull-basket":"basketButtonClicked","click .js-remove-basket":"basketRemoveItemClicked"},initialize:function e(){this.basketItemsModel=new i.default;Backbone.Events.on("ecom.basket.changed",this.updateBasket.bind(this));this.basketWidgetEventListenerAdded=false;return this},closeBasket:function e(t){if(!t.target.closest(".ecombasket")||"Escape"===t.key){this.el.classList.remove("show-content");document.removeEventListener("click",this.clickHandlerBind);document.removeEventListener("keydown",this.keydownHandlerBind);this.basketWidgetEventListenerAdded=false}},basketButtonClicked:function e(){this.el.classList.toggle("show-content");this.basketWidgetEventListenerAdded=false;this.clickHandlerBind=this.closeBasket.bind(this);this.keydownHandlerBind=this.closeBasket.bind(this);if(!this.basketWidgetEventListenerAdded){this.basketWidgetEventListenerAdded=true;document.addEventListener("click",this.clickHandlerBind);document.addEventListener("keydown",this.keydownHandlerBind)}},basketRemoveItemClicked:function e(t){this.basketRemoveItem(t.target.getAttribute("data-ref"))},updateBasket:function e(t){this.basketItemsModel.setTemporary({items:t.items,itemCount:t.itemCount,subTotal:t.subTotal,subTotalInclTax:t.subTotalInclTax});this.customRender()},customRender:function e(){var t=a.default.getPluginData("ecommerce");var n=a.default.getPluginData("assets");var i=a.default.getPluginData("customerAccount");var o=null;if("function"!==typeof Twig.templates[this.template])throw new Error("No such template:".concat(this.template));o=Twig.render(Twig.templates[this.template],{data:_.extend(this.basketItemsModel.toJSON(),this.basketItemsModel.temporary),plugins:{ecommerce:t,assets:n,customerAccount:i},editorVersion:Server.editorVersion,packageCapabilities:Server.packageCapabilities});(0,r.emptyElement)(this.el);(0,r.append)(this.el,o)},basketRemoveItem:function e(t){return l(regeneratorRuntime.mark((function e(){var n,i,a;return regeneratorRuntime.wrap((function e(r){while(1)switch(r.prev=r.next){case 0:n=new FormData;n.append("productVariantRef",t);r.next=4;return fetch("/store/cart/remove-item",{method:"POST",credentials:"same-origin",body:n});case 4:i=r.sent;r.next=7;return i.json();case 7:a=r.sent;Backbone.Events.trigger("ecom.basket.changed",a);case 9:case"end":return r.stop()}}),e)})))()}});BaseKit.Widget.ExtendednavigationBasketView=c;var u=t["default"]=c},9884:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{align:"center"},initialize:function e(){return this}});BaseKit.Widget.ExtendednavigationModel=o;var s=i=o},5689:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=l(n(5705));var r=l(n(9403));var o=l(n(4823));var s=l(n(9502));function l(e){return e&&e.__esModule?e:{default:e}}var c=a.default.extend({template:"widget_extendednavigation",events:{"click .js-pull":"menuDropdownClicked","click .navigation-item.redirect":"linkClicked","click .js-folder":"folderToggle","keydown .js-folder":"folderToggleKeyboard","focusout .js-folder":"focusClose"},initialize:function e(t){this.profileModel=t.profile||new r.default(window.Profile.profile);this.properties=t.properties||{};this.store=t.store;this.initializeSidebarNav();this.initializeBasket();return this},linkClicked:function e(t){bk$("body").removeClass("navigation-open")},menuDropdownClicked:function e(t){t.preventDefault();var n=this.$(".js-menu-list");bk$("body").hasClass("edit")||n.toggleClass("open")},folderToggle:function e(t){var n=bk$(t.currentTarget);n.toggleClass("folder-open");n.attr("aria-expanded",!!n.hasClass("folder-open"))},folderToggleKeyboard:function e(t){var n=bk$(t.currentTarget);switch(t.which){case 13:this.folderToggle(t);break;case 38:t.preventDefault();this.focusPrev(n);break;case 40:t.preventDefault();this.focusNext(n);break;case 27:this.folderToggle(t);break;default:break}},focusClose:function e(t){var n=bk$(t.currentTarget);n.find(t.relatedTarget).length||n.removeClass("folder-open").attr("aria-expanded",false)},focusPrev:function e(t){var n=bk$(":focus");var i=n.closest(".navigation-item--child").prev().find(".item-name--child");i.length?i.focus():t.find(".item-name--child").last().focus()},focusNext:function e(t){var n=bk$(":focus");var i=n.closest(".navigation-item--child").next().find(".item-name--child");i.length?i.focus():t.find(".item-name--child").first().focus()},initializeBasket:function e(){this.shouldInitializeBasket()&&(this.basketView=new o.default({el:".js-navigation-basket"}))},shouldInitializeBasket:function e(){if(this.isRowPreview()||!this.isStoreLive()||!this.isFullVersionTen())return false;return true},isRowPreview:function e(){return"row-preview"===s.default.getAppData("mode")},initializeSidebarNav:function e(){this.shouldInitializeSidebarNav()?document.body.classList.add("sidebar-nav"):document.body.classList.remove("sidebar-nav")},shouldInitializeSidebarNav:function e(){if(this.isRowPreview()||!this.isFullVersionTen()||!this.isSidebarNav())return false;return true},isSidebarNav:function e(){if(document.querySelector(".extendednavigation").classList.contains("sidebar-nav"))return true;return false},isStoreLive:function e(){var t=s.default.getPluginData("ecommerce");if(t&&t.store)return 1===t.store.live;return false},isFullVersionTen:function e(){return this.isVersionTen()&&!this.isVersionTenS()},isVersionTen:function e(){return"ten"===s.default.getData("editorVersion")},isVersionTenS:function e(){if("edit"===s.default.getAppData("mode")){if(this.store&&"function"===typeof this.store.getState&&this.store.getState().env)return this.store.getState().env.V10CompatibilityMode;return false}var t=s.default.getData("isFullVersionTenSite");return!t}});BaseKit.Widget.ExtendednavigationView=c;var u=i=c},3349:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{numPosts:5,colorScheme:"light",orderBy:"social"},initialize:function e(){return this}});BaseKit.Widget.FacebookcommentsModel=o;var s=i=o},6247:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=l(n(5705));var r=l(n(9403));var o=l(n(9502));var s=l(n(1944));function l(e){return e&&e.__esModule?e:{default:e}}function c(){return o.default.getAppData("deducedLocale")}var u=a.default.extend({template:"widget_facebookcomments",initialize:function e(t){var n=this;this.profileModel=t.profile||new r.default(window.Profile.profile);this.properties=t.properties||{};this.locale=c();if("published"!==o.default.getAppData("mode")||s.default.isScriptAllowedByCookieConsent(o.default,window.localStorage))this.initializeFacebook();else{var i=function e(){n.initializeFacebook()};var a=i.bind(this);document.getElementById("js-cookie-consent-event").addEventListener("cookieConsentEvent",a)}return this},initializeFacebook:function e(){var t=s.default.isScriptAllowedByCookieConsent(o.default,window.localStorage);if(!t)return;var n=this.composeScriptSrc();if(!document.getElementById("fb-root")){var i=document.createElement("div");i.setAttribute("id","fb-root");document.body.appendChild(i)}if("undefined"===typeof FB){window.fbAsyncInit=function(){window.FB.init({appId:null,xfbml:true,version:"v3.0",status:false,cookie:false});window.FB.XFBML.parse()};(function(){var e=document.createElement("script");e.src=n;e.async=true;document.getElementById("fb-root").appendChild(e)})()}else window.FB.XFBML.parse()},composeScriptSrc:function e(){return"".concat(document.location.protocol,"//connect.facebook.net/").concat(this.locale,"/sdk.js")}});BaseKit.Widget.FacebookcommentsView=u;var d=i=u},4479:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{action:"like",colorscheme:"light",layout:"standard",height:"80",font:"arial",og_type:"website"},initialize:function e(){return this}});BaseKit.Widget.FacebooklikeModel=o;var s=i=o},6825:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=o(n(5705));var r=o(n(9403));function o(e){return e&&e.__esModule?e:{default:e}}var s=a.default.extend({template:"widget_facebooklike",initialize:function e(t){this.profileModel=t.profile||new r.default(window.Profile.profile);this.properties=t.properties||{};return this}});BaseKit.Widget.FacebooklikeView=s;var l=i=s},9207:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{bgImg:"",newBgImg:"",header:App.t("widgets.feature.header_default","My great company"),strapline:App.t("widgets.feature.strapline_default","My strap line goes here"),url:"",action:"none",buttonText:App.t("widgets.feature.button_text","button text"),target:"New",showBtn:true},initialize:function e(){return this}});BaseKit.Widget.FeatureModel=o;var s=i=o},753:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_feature",events:{"click .js-feature-btn":"buttonClicked"},initialize:function e(t){a.default.prototype.initialize.call(this,t)},buttonClicked:function e(){var t=this.model.get("action");var n=this.model.get("url");var i=this.model.get("target");"none"!==t&&null!==t&&("_blank"!==i?window.location.assign(n):window.open(n))}});BaseKit.Widget.FeatureView=o;var s=i=o},8141:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{text:App.t("widgets.filedownload.default_text","Download"),align:"widget-align-left",showFilename:true},initialize:function e(){return this}});BaseKit.Widget.FiledownloadModel=o;var s=i=o},8591:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_filedownload",events:{"click .js-file-btn":"buttonClicked"},initialize:function e(t){a.default.prototype.initialize.call(this,t)},buttonClicked:function e(){var t=App.stripUrlScheme(this.model.get("url"));t&&t.length>0?window.open(t):alert(App.t("widgets.filedownload.no_file_added","No file added"))}});BaseKit.Widget.FiledownloadView=o;var s=i=o},5919:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{widgetType:"widget.gallery",imageScale:"original",imagePopup:true,showTitle:1,showDescription:1,albumRef:0,images:[],columns:"gallery-columns-four",shape:"none"},initialize:function e(){return this},transformWidgetData:function e(t){Object.keys(t).forEach((function(e){"images"===e&&(t[e]=JSON.parse(t[e]))}));return t}});BaseKit.Widget.GalleryModel=o;var s=i=o},2345:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=o(n(5705));var r=o(n(9333));function o(e){return e&&e.__esModule?e:{default:e}}var s=a.default.extend({template:"widget_gallery",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});Cocktail.mixin(s,r.default);BaseKit.Widget.GalleryView=s;var l=i=s},9331:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{widgetType:"widget.image",description:"assets",linkUrl:"none",target:"_self",imagePopup:true,action:"none",scale:"original",aspect:"original",shape:"none",imageWidth:"auto",alt:"",title:"assets",align:"widget-align-left",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAB4AAAASwBAMAAADoHkrFAAAAElBMVEUAAAAAAAAAAAAAAAAAAAAAAADgKxmiAAAABnRSTlNAn4N1mWByT15ZAAASW0lEQVR42uzBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGD24EAAAAAAAMj/tRFUVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVYU9OBAAAAAAAPJ/bQRVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWEPDgQAAAAAgPxfG0FVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVdiDAwEAAAAAIP/XRlBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVFfbgoAQAEAgAmB8DCCYQEwg2MIBg/y72uNsGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAhPTWPC2Ffsa+BeKob7ZUPjt3lJMwEIVhdGzpAgbru0B4F1dgSVwAhP2vxWjS+MIG/t5z4goMH53emWE+SZjNGIvl+2s+N9iE+9IrunoIswX3XtReweQr26+C2YChF/baINpU8/139d0g2aHX9tEg16MXt28Qq/gC2iKabLeOSTSpxo5JNLEunT6bY5HJA/jPW4NEHsDegsk1dTyCiVV+D3g1N8hjD3j13iBN6VsMdpJI5xCHMRbBrKD/fTXIYgVtDU0wK2hraIJVvwhsDk0ypzic5SCYV2D3+gnmFdhLMMG8AvttLILZBbYTTC5XgU2xCGaGZYpFMFcJXSkkmCG0MTTBDKGNoQlmCO0wJbmmpwFfj5+nAn/HxT4S2ab+xLkVMR3sIxFtrH0ndhQw0cbiY9hL6e8v4g3FP8CjkxwkG6pPYRcBE2xXewXd2k3ABNtVP0r4qP4PINqu+gOo/DcY0V6qBzwImGACFjDBBCxggglYwAQTsIAJJmABE0zAAiaYgAVMMAELmGACFjDBBCxggglYwAQTsIAJJmABE0zAAiaYgAVMMAELmGACFjDBBCxggglYwPywdwe5aQRBFIZbQB/gCbIPibNnjLwPiXOAEfj+V4lMQHIURKrGsjSv9H972P2apqs0GCNgAoYxAiZgGCNgAoYxAiZgGCNgAoYxAiZgGCNgAoYxAiZgGHtPwP1lv3/c759emjEChrPpAR+/POvix1ff/xQmYDibGvDxQW9tbBMmYDibFnB//PdjT80SAcPZpID7g2741hwRMJxNCbhvddPPZoiA4WxCwP0g3far+SFgOMsHfH3+FjlFEzCc5QMedMfn5oaA4Swd8En3bOymSQQMZ9mAl/qL/yImAcNZNuCDLqpcZBEwnCUDPklSqUM0AcNZLuCu/1s3KwQMZ7mABwXsmhMChrNUwEudlbrHImA4SwU8SFdlhsEEDGeZgJdSvUcwAcNZJuBBkqr9CiZgOEsE3HVW7CKagOEsEfCoMKNZMAHDWSLgg3RVaB2LgOEsHvBCcc/NBgHDWTzgQWfVJkkEDGfhgLsyPjUXBAxn4YBXusM4AgKGs3DAg1TyDE3AcBYNuEs1z9AEDGfRgBe6qLZOScBwFg141Fm9XQ4ChrNowFslfW8eCBjOggF3XZTbhyZgOAsGvNBZwWUsAoazYMCjVPRHMAHDWTDgrSSVnAQTMJwFAz5IqjkJJmA4iwW8lKreYhEwnMUCXkhSzVUOAoazWMArqeotFgHDWSzgUW/UerUdAcNZLOCtVPUamoDhLBbwQZJqLlMSMJyFAu6Sqs6RCBjOogGXnSMRMJyFAl5KZedIBAxnoYAXBAzMUijglS5m8WK7IwEDyYDns8nRtSNgIBHwSVNsPibgUWsCBhIBjzN6AndJOwIGUgHPZpdylLQmYMAy4K5XOwIGwgEP8wl41Ks1AQOGAffrVxMw4BfwqD/WBAzYBdx1tSPg3+zd220bMRBGYSYKC/gxasBIChgnKSBrOO+mL/23EgdBYMuW5VlZWnIx53sX9HQwErnkAmsLuOk/I2BgZQFXPXECBtYVcNMTI2BgVfvAVc85AQNrepSy6TkjYGBFAVftcgJGerHTSEME3LTLCBjpredAf9VLTsDILnalzggBN71kBIzsVnMnVtVrTsBILhTwZoBrZZteMwJGcmu52L1qHydg5BZ8tUr3gJv2MQJGbmd8udmvsw9gyQkYqcUCvuz9dsKm/YyAkVos4Nb5OY6qtzgBI7PzvaF/u8AAloyAkVks4E3fbeCqtzkBI7FYwLXvInTT24yAkVgs4DL1XISuOsQJGHkFA77seZy/6RAjYOQVDPhTx0XoqsOcgJFWMOBNxzWspsOMgJFWMODaYQ0r/NVOwMgqGHC56PYcVtN7jICRVTTg+15/gave5wSMpKIBb3r9BW56nxEwkooGXKY+u8BVEU7AyCkccOuzC9wUYQSMnMIBf+7yC7oqxgkYKYUDLpNm+L3oAJaMgJFSPODWYQ26KsoJGBnFA950uJCyKcoIGBnFAy4Xiz/FURXnBIyEZgT8ZfHLOJrijICR0IyAy7TwElbVHE7AyGdOwPcLL2E1zWEEjHzmBFynRQ8iVc3jBIx05gRc7gcewJIRMNKZFXCdBh7AkhMwsokGHB/B204DWDICRjbzAi7ToEvQ/zgBI5mZAX9e7BhD03xGwEgmGHD8flnvN4AlJ2DkMjfgOo11DGmXETBymRtw2Qx1DvglJ2CkMjvgcrvACnRpOo4RMFIJBBzfS9p65wEsOQEjkyMCLj/P3W9pOpYRMDIJBBwteOul+wCWnICRyFEBl9tJrz93U/oPYMkIGIkcF3C5+6Zd2683ZYQBLDkBI49AwIGEt1cPpQwxgCUjYOSxL+Cgu+/Xkx5dX/34m+8gA1hyAkYa+wKOqw+PbsqjYQawZASMNAIBB4w0gCUnYGQxXsBNH2UEjCyGC7jq45yAkcRwATd9nBEwkhgt4KpTcAJGDqMF3HQKRsDIYbCAq07DCRgpDBZw02kYASOFP+zXy02kQQxF4cXIAdy/JoAKoSaEyQDnnwwsEAL6JdQu2rp9vgC8O7pyr4BDVRYB4xn0CjhVZRAwnkGrgEN1FgHjCbQKOFVnEDCeQKeAQ5UWAcNfp4BTlQYBw1+jgEO1FgHDXqOAU7UGAcNen4BD1RYBw12fgFPVBgHDXZuAQ/UWAcNcm4BT9QYBw1yXgEM7LAKGty4Bp3YYBAxvTQIO7bEIGNaaBJzaYxAwrPUIOLTLImA46xFwapdBwHDWIuDQPouAYaxFwKl9BgHDWIeAQzstAoavDgGndhoEDF8NAg7ttQgYthoEnNprEDBsPT7g0G6LgOHq8QGndhsEDFcPDzi03yJgmHp4wKn9BgHDVH3AMbsNsLQIGJ7qA86j2wBLg4DhqTzg0P/ZbYClRcCwVB5wSke3AZYGAcNSdcChN7PbAEuLgOGoOuD80Yl/+i2DgOGoOOCQfjDBf/R7FgHDUHHA+X6j2wBLg4BhqDbg0LvZbYClRcDwUxtwfhzpNsDSIGD4KQ049GF2G2BpEjDslAacn650G2BpEDDsVAYc+mR2G2BpETDcVAacX850G2BpEDDcFAYc+mJ2G2BpETDMFAac3+50G2DpIGCYqQs49M3sNsDSImB4qQs4Tw51G2BpEDC8lAUcOjG7DbD0QsCwUhZw6sTRbYClRcCwUhVw6IzZbYAJGGaqAk6dcXQbYAKGmaKAQ2fNZgNMwDBTFHDqrKPZAP8lYHipCTh0wew1wCwwzNQEnLrgaDXABAw3JQGHLpqtBpiAYaYk4NRFR6sB5geGmYqAQ1fMTgPMAsNMRcCpK45GA0zAcFMQcOiq2WiACRhmCgJOXXU0GmB+YJi5P+DQDbPPALPAMHN/wKkbjjYDTMBwc3fAoZtmmwEmYJi5O+DUTUebAeYHfmW/DooDBKIgiJ4QsCjAQqTg30wM/AOpvUDnPQ9dU0PMbsDHeuB6ywBbYGJ2A77XA+dLBljA1GwGfKxHrpcMsICJ2Qz4Xo+cLxlgH5iYvYCP9dD1jgG2wMTsBXyvh85XDLCAqdkK+FiPXa8YYAETsxXwvR47XzHAPjAxOwEf6w+uNwywBSZmJ+B7/cH5ggEWMDUbAR/rewRMy0bA9/ocH5iYIeDwAFtgYoaAuwMsYGqGgMMDLGBihoDDA+wDEzMEHB5gC0zMEHB3gAVMzRBweIAFTMwQcHiAfWBihoDDA2yBiRkC7g6wgKkZAg4PsICJGQIOD7APTMwQcHiALTAxQ8DdARYwNUPA4QEWMDFDwOEB9oGJGQIOD7AFJmYIuDvAAqZmCDg8wAImZgg4PMA+MDFDwOEBtsDEDAF3B1jA1AwBhwdYwMQMAYcH2AcmZgg4PMAWmJgh4O4AC5iaIeDwAAuYmCHg8AD7wMQMAYcH2AITMwTcHWABUzMEHB5gARMzBBweYB+YmCHg8ABbYGKGgLsDLGBqhoDDAyxgYoaAwwPsAxMzBBweYAtMzBBwd4AFTM0QcHiABUzMEHB4gH1gYoaAwwNsgYkZAu4OsICpGQIOD7CAiRkCDg+wD0zMo4B/VoWAaRGwgPkwAQuYD/tfAfvAxPyvgC0wMQIWMB8mYAHzYb/s10ENAgAQA0ENaEEBDgj+xWCAB9/tzXjYNL0VsA/MmFsBW2DGCFjAhAlYwITdCtgHZsytgC0wYwQsYMIELGDCbgXsAzPmVsAWmDECFjBhAhYwYbcC9oEZcytgC8wYAQuYMAELmLBbAfvAjLkVsAVmjIAFTJiABUzYrYB9YMbcCtgCM0bAAiZMwAIm7FbAPjBjbgVsgRkjYAETJmABE3YrYB+YMbcCtsCMEbCACROwgAm7FbAPzJhbAVtgxghYwIQJWMCE3QrYB2bMrYAtMGMELGDCBCxgwm4F7AMz5lbAFpgxAhYwYQIWMGG3AvaBGfNfwK/HCAGz5dYCC5gxfwX8ea54C5gpvwI+RcCUCVjAhAlYwIQJWMCECVjAhAlYwIQJWMCECVjAhAlYwIQJWMCECVjAhAlYwIQJWMCECVjAhAlYwIQJWMBfdu4dKYEgCsNolwMLuD5yFcmlLHMHNBfB/W/FxAw28M89ZwdafDXdt3uGYAIWMMEELGCCCVjABBOwgAkmYAETTMACJpiABUwwAQuYYAIWMMEELGCCCVjABBOwgAm26h7wSsAEa//7PXf/BxBtVRe+RyfH7ksQot3UhcfRySxggl0J+G40MjX/+wk31aXX0cdOwCSbqvUveKpLDwNSrOuK7WhimgVMtrmu2D/3MNcVHwNizEXnKTzhdkXfGR7xjkXniyyEWxVuUhLrpnARi1hT4RSJXMbQTpEI9lQYQhPLGNoQmmCmWGZYBFsXZljksgl2kZJgNsG2wARzEtzzXWiWwkmwU2CCWUNbQRPMGtoKmmTm0GbQBDsXXiUklrsc/74GBDLGMsIimDGWa5Qk82k7D2CCeQR7AJPMLtgDmGBr9ymNoAnW/vOy3uQnWvc5lm9hEa35ItoCmnCtJ9GHAeF+qq1bE2jytS1YvyzCqec++KBflmH9Uu3cbwcsxalZwvcbj18W5fft+bOJ/eZdvgAAAAAAAH/swYEAAAAAAJD/ayOoqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqgp7cCAAAAAAAOT/2giqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqsIeHAgAAAAAAPm/NoKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqrAHBwIAAAAAQP6vjaCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqKuzBgQAAAAAAkP9rI6iqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqSntwQAIAAAAg6P/rfoQKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASwF03O3X7vW2pgAAAABJRU5ErkJggg=="},initialize:function e(){return this}});BaseKit.Widget.ImageModel=o;var s=i=o},8181:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=o(n(5705));var r=o(n(9333));function o(e){return e&&e.__esModule?e:{default:e}}var s=a.default.extend({template:"widget_image",initialize:function e(t){a.default.prototype.initialize.call(this,t);Cocktail.mixin(this,r.default)}});BaseKit.Widget.ImageView=s;var l=i=s},5299:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({default:{menuType:"flag-text",menuStyle:"horizontal"},temporary:{},initialise:function e(){return this}});BaseKit.Widget.LanguagemenuModel=o;var s=i=o},1397:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_languagemenu",events:{"click .js-language-item":"handleLanguageItem"},initialize:function e(t){a.default.prototype.initialize.call(this,t)},handleLanguageItem:function e(t){if(t.currentTarget.classList.contains("is-current")){t.preventDefault();t.stopPropagation();var n=this.el.querySelector(".js-language-selector");if(document.body.classList.contains("touch")){n.classList.toggle("hover");var i=function e(){n.classList.toggle("hover");document.removeEventListener("click",e)};document.addEventListener("click",i)}}}});BaseKit.Widget.LanguagemenuView=o;var s=i=o},4017:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{thickness:"inherit",padding:"inherit",length:"inherit",align:""},initialize:function e(){return this}});BaseKit.Widget.LineModel=o;var s=i=o},1419:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_line",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.LineView=o;var s=i=o},2493:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({initialize:function e(){return this}});BaseKit.Widget.LinkedincompanyprofileModel=o;var s=i=o},4847:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_linkedincompanyprofile",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.LinkedincompanyprofileView=o;var s=i=o},4159:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({initialize:function e(){return this}});BaseKit.Widget.LinkedinprofileModel=o;var s=i=o},3817:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_linkedinprofile",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.LinkedinprofileView=o;var s=i=o},8223:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({initialize:function e(){return this}});BaseKit.Widget.LogoModel=o;var s=i=o},5161:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_logo",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.LogoView=o;var s=i=o},707:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{zoom:12,height:200},initialize:function e(){return this}});BaseKit.Widget.MapModel=o;var s=i=o},8245:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=o(n(5705));var r=o(n(9403));function o(e){return e&&e.__esModule?e:{default:e}}var s=a.default.extend({template:"widget_map",initialize:function e(t){BaseKit.Widget.CoreView.prototype.initialize.call(this,t);this.profileModel=t.profile||new r.default(window.Profile.profile);this.properties=t.properties||{};this.properties.googleMapsEmbedKey=Brand.googleMapsEmbedKey;this.el&&this.removeBorder()},removeBorder:function e(){this.el.style.border="none";var t=this.el.querySelector("iframe");t&&(t.style.border="none")}});BaseKit.Widget.MapView=s;var l=i=s},2855:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_navigation",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.NavigationView=o;var s=i=o},3183:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({initialize:function e(){return this}});BaseKit.Widget.PagetitleModel=o;var s=i=o},9769:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=o(n(5705));var r=o(n(9403));function o(e){return e&&e.__esModule?e:{default:e}}var s=a.default.extend({template:"widget_pagetitle",initialize:function e(t){this.profileModel=t.profile||new r.default(window.Profile.profile);this.properties=t.properties||{}}});BaseKit.Widget.PagetitleView=s;var l=i=s},4991:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{paypalbuynow_text:App.t("widgets.paypalbuynow.text","Buy Now"),paypalbuynow_productname:App.t("widgets.paypalbuynow.productname_default","My awesome product"),paypalbuynow_productprice:0,paypalbuynow_shipping:0,align:"widget-align-left"},initialize:function e(){return this}});BaseKit.Widget.PaypalbuynowModel=o;var s=i=o},2953:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_paypalbuynow",initialize:function e(t){a.default.prototype.initialize.call(this,t);this.userDataProvider=t.userDataProvider}});BaseKit.Widget.PaypalbuynowView=o;var s=i=o},9333:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n={events:{"click .js-pswp-image-trigger":"openPhotoSwipe"},openPhotoSwipe:function e(t){t.preventDefault();if("undefined"===typeof PhotoSwipe)return;this.renderPhotoSwipe();var n=this.buidList();var i=t.currentTarget.getAttribute("data-index");var a=document.querySelector(".js-pswp-active");var r=a?document.querySelectorAll(".js-pswp-active .pswp")[0]:this.el.querySelectorAll(".pswp")[0];var o={index:parseInt(i,10)||0,getThumbBoundsFn:function e(){var n=t.currentTarget;var i=window.pageYOffset||document.documentElement.scrollTop;var a=n.getBoundingClientRect();return{x:a.left,y:a.top+i,w:a.width}}};var s=new window.PhotoSwipe(r,window.PhotoSwipeUI_Default,n,o);s.init();s.listen("destroy",function(){a&&a.classList.remove("js-pswp-active");this.$(".js-pswp").remove()}.bind(this))},renderPhotoSwipe:function e(){var t=Twig.render(Twig.templates.photo_swipe);var n=this.$el.parents(".js-row-container");n.length?n.addClass("js-pswp-active").append(t):this.$el.append(t)},buidList:function e(){var t=this.el.querySelectorAll(".js-pswp-image");var n=[];Array.prototype.forEach.call(t,(function(e){var t=e.getAttribute("data-path")||e.getAttribute("src");var i=e.parentNode.getAttribute("title");var a=e.naturalWidth;var r=e.naturalHeight;n.push({src:t,title:i,w:a,h:r})}));return n}};var i=t["default"]=n},5303:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({default:{},temporary:{},initialise:function e(){return this}});BaseKit.Widget.PolicypagesModel=o;var s=i=o},353:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_policypages",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.PolicypagesView=o;var s=i=o},9403:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=BaseKit.Widget.CoreModel.extend({defaults:{profileType:"twitter",address:"profile",address1:"profile",address2:"profile",country:"profile",addressPostalCode:"profile",email:"profile",headline:"profile",strapline:"profile",companydescription:"profile",phone:"profile",business:"profile",copyright:"profile",twitter:"profile",defaultTwitter:"BaseKit",mapZoom:12,mapHeight:200,mapAddress:"profile",mapAddress1:"profile",mapAddress2:"profile",mapPostalCode:"profile",markerPath:"/apps/images/mobile/map-marker.png",formText:App.t("widgets.contactform.default_button_text","Send"),emailPlaceholder:App.t("widgets.profile.formholder","Type your email"),formLabel:App.t("widgets.profile.formtitle","Your email"),socialIconsLinkedin:"profile",socialIconsTwitter:"profile",socialIconsFacebook:"profile",socialIconsInstagram:"profile",socialIconsPinterest:"profile",socialIconsRss:"profile",socialIconsYoutube:"profile",socialIconsVkontakte:"profile",socialIconsXing:"profile",socialIconsTiktok:"profile"},temporary:{},initialize:function e(){return this}});BaseKit.Widget.ProfileModel=n;var i=t["default"]=n},8029:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=s(n(6342));var r=s(n(2047));var o=s(n(5705));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,i,a,r,o){try{var s=e[r](o);var l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(i,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){l(r,i,a,o,s,"next",e)}function s(e){l(r,i,a,o,s,"throw",e)}o(void 0)}))}}var u=o.default.extend({template:"widget_profile",recaptcha:null,events:{"submit .js-form":"onFormSubmit"},initialize:function e(t){o.default.prototype.initialize.call(this,t);this.setGDPRValue(t.enablePolicyPages);this.attachInitEvents()},setGDPRValue:function e(t){this.gdprEnabled=t},attachInitEvents:function e(){switch(this.model.get("profileType")){case"twitter":this.getUpdateTwitterFeed();break;case"map":this.renderEmbeddedMap();break;case"form":this.delegateEvents();break;default:break}},afterRender:function e(){if("map"!==this.model.get("profileType"))return;this.renderEmbeddedMap()},getUpdateTwitterFeed:function e(){var t=this;return c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(n){while(1)switch(n.prev=n.next){case 0:t.rerender();t.model.setTemporary("tweets",[]);case 2:case"end":return n.stop()}}),e)})))()},redirectToUrl:function e(t){window.location.assign(t)},onFormSubmit:function e(t){var n=this;t.preventDefault();var i="/_bk/submit-form";var r={emailFrom:this.$(".js-email").val().trim(),widgetId:this.$el.attr("id"),widgetRef:this.properties.ref,useProfile:"profile"===this.model.get("email")?1:0,pageRef:App.session.get("pageRef")};this.gdprEnabled&&(r.termsTicked=this.el.querySelector(".js-terms-input").checked);null!==this.recaptcha&&this.recaptcha.isShowing()&&this.recaptcha.isVerified()&&(r.recaptchaResponse=this.recaptcha.getToken());this.$(".overlay").length>0&&this.$(".overlay").removeClass("fail success");this.removeMessage();this.showMessageBox();if(!r.emailFrom.length){this.showMessage((0,a.default)("widgets.form.empty_email","Please enter an email address."),"fail");this.enableForm();return}if(this.gdprEnabled&&!r.termsTicked){this.showMessage((0,a.default)("widgets.form.terms_unticked","Please agree to submitting your data to this organisation."),"fail");return}bk$.ajax({url:i,type:"POST",data:r,success:function e(){if(n.model.get("goalUrl"))n.redirectToUrl(n.model.get("goalUrl"));else{n.showMessage((0,a.default)("widgets.form.success","Message sent successfully."),"success");n.removeMessageBox()}},error:function e(t){if(422===t.status){n.enableForm();n.showRecaptcha(t.responseJSON.recaptcha.siteKey)}else{n.showMessage((0,a.default)("widgets.form.failed","Submit failed."),"fail");n.removeMessageBox()}}})},showRecaptcha:function e(t){null===this.recaptcha&&(this.recaptcha=new BaseKit.Widget.Recaptcha({key:t}));this.recaptcha.isShowing()||this.recaptcha.display(this.$el.find(".js-recaptcha").get(0))},enableForm:function e(){this.$(".js-form").removeClass("submitting")},showMessage:function e(t,n){if(!t)return;this.$(".message-box").length>0&&this.$(".message-box").remove();0===this.$(".overlay").length&&this.showMessageBox();this.$(".overlay").addClass(n).append('<div class="message-box"><span class="message-text">'.concat(t,"</span></div>"))},removeMessage:function e(){this.$(".overlay .message-box").remove()},showMessageBox:function e(){var t=bk$('<div class="overlay"></div>');0===this.$(".overlay").length&&this.$el.append(t);this.$(".js-form").addClass("submitting")},resetFormData:function e(){this.el.querySelector(".js-email").value="";var t=this.el.querySelector(".js-terms-input");t&&(t.checked=false)},removeMessageBox:function e(){var t=this;this.enableForm();this.resetFormData();this.$(".js-email-input, .js-message-input").val("");setTimeout((function(){clearTimeout(a.default);t.$(".overlay").fadeOut((function(){bk$(this).remove()}))}),1e4)},getProfileAddress:function e(){return[this.profileModel.get("address"),this.profileModel.get("address1"),this.profileModel.get("address2"),this.profileModel.get("postalcode")].filter((function(e){if("string"===typeof e)return!!e.trim();return false})).join(", ")},renderEmbeddedMap:function e(){if("map"!==this.model.get("profileType"))return;var t=this.getProfileAddress();var n=this.buildMapEmbedUrl(t);var i=this.getCurrentUrl();var o=this.getCurrentHeight();var s=this.model.get("mapHeight");var l=document.querySelector("body").classList.contains("edit");if(l&&""===t){var c=this.el.querySelector(".js-map");r.default.emptyElement(c);r.default.append(c,'<div class="bk-message bk-message--empty">'.concat((0,a.default)("widgets.map.enter_address","Click here to enter the address for your Google Map."),"</div>"));c.style.height="auto";c.style.display="inherit"}if(""!==t&&(i!==n||o!==s)){var u=this.createMapEmbedFrame(n);var d=this.el.querySelector(".js-map");r.default.emptyElement(d);d.appendChild(u);d.style.height=s;this.el.querySelector(".js-google-maps-embed-frame").style.height=s;u.style.display="block"}},getCurrentUrl:function e(){var t=this.el.querySelector(".js-google-maps-embed-frame");if(t)return t.src;return null},getCurrentHeight:function e(){var t=this.el.querySelector(".js-google-maps-embed-frame");if(t)return t.style.height;return null},buildMapEmbedUrl:function e(t){var n="https://www.google.com/maps/embed/v1/place?key=";n+=Brand.googleMapsEmbedKey;n="".concat(n,"&q=").concat(encodeURIComponent(t));n="".concat(n,"&zoom=").concat(parseInt(this.model.get("mapZoom"),10));return n},createMapEmbedFrame:function e(t){var n=document.createElement("iframe");n.style.display="none";n.style.border="0";n.src=t;n.setAttribute("allowFullScreen","");n.height=this.model.get("mapHeight");n.width="100%";n.frameBorder="0";n.classList.add("js-google-maps-embed-frame");return n}});BaseKit.Widget.ProfileView=u;var d=i=u},8659:(e,t)=>{"use strict";var n;n={value:true};n=void 0;var i=Marionette.CollectionView.extend({initialize:function e(){return this}});BaseKit.Widget.ResponsivecolumnsColumnView=i;var a=n=i},9089:(e,t)=>{"use strict";var n;n={value:true};n=void 0;var i=Marionette.CollectionView.extend({initialize:function e(){return this}});BaseKit.Widget.ResponsivecolumnsView=i;var a=n=i},1039:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{widgetType:"widget.responsiveslideshow",duration:3,transSpeed:1e3,transType:"fade",showButtons:true,showBullets:true,allowPause:false,allowLoop:true,albumRef:0,images:[]},initialize:function e(){return this},transformWidgetData:function e(t){Object.keys(t).forEach((function(e){"images"===e&&(t[e]=JSON.parse(t[e]))}));return t}});BaseKit.Widget.ResponsiveslideshowModel=o;var s=i=o},7977:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_responsiveslideshow",events:{"click .js-btn-play":"playButtonClicked","click .js-slide-ctrl":"controlButtonClicked"},initialize:function e(t){a.default.prototype.initialize.call(this,t);this.model.get("albumRef")&&Server.plugins.assets.albums[this.model.get("albumRef")]?this.imageArray=Server.plugins.assets.albums[this.model.get("albumRef")]:this.imageArray=this.model.get("images");this.load();this.paused=false;this.stopSlide=false},load:function e(){if(this.imageArray&&1===this.imageArray.length){this.$(".js-btn-play").hide();this.$(".js-btn-prev").hide();this.$(".js-btn-next").hide();return}"edit"!==Server.app.mode&&this.startSlideShow(0)},playButtonClicked:function e(t){var n=bk$(t.currentTarget).data("ref");if(bk$(t.currentTarget).hasClass("pause")){this.pauseSlideShow();return}if("disabled"===bk$(t.currentTarget).attr("disabled"))return;this.playSlideShow(n)},controlButtonClicked:function e(t){this.handleSlideNavigation(bk$(t.currentTarget).data("ref"))},handleSlideNavigation:function e(t){var n=Math.round(1e3*this.model.get("duration"));this.stopSlideShow();this.setSlide(t);var i=setTimeout(function(){this.startSlideShow(t)}.bind(this),n);bk$(".js-slide-ctrl").on("click",(function(){clearTimeout(i)}))},startSlideShow:function e(t){if("edit"===Server.app.mode)return;this.stopSlide=false;this.setNextSlide(t)},stopSlideShow:function e(){var t=this.$(".js-responsiveslideshow-image-item");t.stop(true,true);this.stopSlide=true},setSlide:function e(t){this.$(".js-responsiveslideshow-image-item.current").removeClass("current");this.$('.js-responsiveslideshow-image-item[data-ref="'.concat(t,'"]')).addClass("current");this.$(".js-responsiveslideshow-image-item").removeAttr("style");this.setSlideInfo(t)},setSlideInfo:function e(t){var n=this.imageArray.length-1;var i=t+1;var a=t-1;i===this.imageArray.length&&(i=0);0===t&&(a=n);this.$(".js-dot").removeClass("selected");this.$(".js-dot[data-ref=".concat(t,"]")).addClass("selected");this.$(".js-btn-prev").data("ref",a);this.$(".js-btn-next").data("ref",i);this.$(".js-btn-play").data("ref",t);a!==n||this.model.get("allowLoop")?this.$(".js-btn-prev").removeClass("disabled").removeAttr("disabled"):this.$(".js-btn-prev").addClass("disabled").attr("disabled",true);0!==i||this.model.get("allowLoop")?this.$(".js-btn-next").removeClass("disabled").removeAttr("disabled"):this.$(".js-btn-next").addClass("disabled").attr("disabled",true)},playSlideShow:function e(t){this.$(".js-btn-play").addClass("pause");this.stopSlide=false;this.paused=false;this.setNextSlide(t)},pauseSlideShow:function e(){this.$(".js-btn-play").removeClass("pause");this.stopSlide=true;this.paused=true},setNextSlide:function e(t){var n=1e3*this.model.get("duration");var i=this.imageArray.length-1;if(this.stopSlide||this.paused||t===i&&!this.model.get("allowLoop"))return;var a=setTimeout(function(){clearTimeout(a);this.animate(t)}.bind(this),n)},animate:function e(t,n){var i=this;var a=parseInt(this.model.get("transSpeed"),10);var r=this.model.get("transType");var o;var s=t+1;if(this.stopSlide||this.paused)return;s===this.imageArray.length&&(s=0);n=n||s;var l=this.$(".js-responsiveslideshow-image-item[data-ref=".concat(t,"]"));var c=this.$(".js-responsiveslideshow-image-item[data-ref=".concat(n,"]"));function u(){i.setSlideInfo(n)}function d(){i.setNextSlide(n)}switch(r){case"fade":a/=2;l.fadeOut(a,u);o=setTimeout((function(){clearTimeout(o);c.fadeIn(a,d).addClass("current");l.removeClass("current")}),a);break;case"dissolve":u();l.fadeOut(a,(function(){c.fadeIn(a,d)}));o=setTimeout((function(){clearTimeout(o);l.removeClass("current");c.addClass("current")}),2*a);break;default:u();l.removeClass("current");c.addClass("current");d();break}}});BaseKit.Widget.ResponsiveslideshowView=o;var s=i=o},2559:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({initialize:function e(){return this}});BaseKit.Widget.RowModel=o;var s=i=o},9465:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({render:function e(){}});BaseKit.Widget.RowView=o;var s=i=o},3385:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{email:"profile",text:App.t("widgets.signupform.default_button_text","Send"),formTitle:App.t("widgets.signupform.default_title","Subject"),inputPlaceholder:App.t("widgets.signup.emailholder","Type your Email")}});BaseKit.Widget.SignupformModel=o;var s=i=o},5715:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=s(n(5705));var r=s(n(6342));var o=s(n(1836));function s(e){return e&&e.__esModule?e:{default:e}}var l=a.default.extend({template:"widget_signupform",recaptcha:null,events:{"submit .js-form":"onFormSubmit"},store:null,initialize:function e(t){a.default.prototype.initialize.call(this,t);this.gdprEnabled=t.enablePolicyPages;this.store=t.store},throwFormFieldError:function e(t,n){this.$(t).attr("aria-invalid",true).attr("aria-describedby",n)},onFormSubmit:function e(t){t.preventDefault();var n=this.getFormData();var i=this.validateFormData(n);this.$("[aria-invalid]").on("change",(function(){bk$(this).removeAttr("aria-invalid").removeAttr("aria-describedby")}));if(i.length){this.enableForm();return}this.submitFormData(n)},redirect:function e(t){window.location.assign(t)},showRecaptcha:function e(t){var n=this;null===this.recaptcha&&(this.recaptcha=new o.default({key:t}));this.recaptcha.isShowing()||this.recaptcha.display(this.$el.find(".js-recaptcha").get(0),{callback:function e(){return n.onFormSubmit(new Event("submit"))}})},getFormData:function e(){var t={};t.emailFrom=this.el.querySelector(".js-email").value.trim();t.useProfile="profile"===this.model.get("email")?1:0;t.widgetId=this.$el.attr("id");t.widgetRef=this.properties.ref;t.pageRef=App.session.get("pageRef");t.pageLanguage=App.session.get("pageLanguage");this.gdprEnabled&&(t.termsTicked=this.el.querySelector(".js-terms-input").checked);null!==this.recaptcha&&this.recaptcha.isShowing()&&this.recaptcha.isVerified()&&(t.recaptchaResponse=this.recaptcha.getToken());"1"===this.model.get("marketingConsentEnabled")&&(t.marketingConsentEnabled=this.el.querySelector(".js-marketing-consent-input").checked);return t},validateFormData:function e(t){var n=this;var i=/.+@.+/;var a=[];var o=this.$el.attr("id");t.emailFrom.length?i.test(t.emailFrom)||a.push({selector:".js-email",message:(0,r.default)("widgets.form.invalid_email","Please enter a valid email address."),ariaDescribedBy:"".concat(o,"-input--valid-email--error")}):a.push({selector:".js-email",message:(0,r.default)("widgets.form.empty_email","Please enter an email address."),ariaDescribedBy:"".concat(o,"-input--email--error")});this.gdprEnabled&&!t.termsTicked&&a.push({selector:".js-terms-input",message:(0,r.default)("widgets.form.terms_unticked","Please agree to submitting your data to this organisation."),ariaDescribedBy:"".concat(o,"-input--terms--error")});if(a.length){var s=a.map((function(e){var t=e.message,n=e.ariaDescribedBy;return{message:t,ariaDescribedBy:n}}));this.showMessage(s,"fail");a.forEach((function(e){var t=e.selector,i=e.ariaDescribedBy;n.throwFormFieldError(t,i)}));return a}return true},disableForm:function e(){this.$(".js-form").attr("aria-busy","true");this.$(".js-loading-spinner").removeClass("hidden");this.$(".js-submit-button-text").addClass("hidden");this.$(".js-submit").prop("disabled",true)},enableForm:function e(){this.$(".js-form").removeClass("submitting").attr("aria-busy","false");this.$(".js-loading-spinner").addClass("hidden");this.$(".js-submit-button-text").removeClass("hidden");this.$(".js-submit").prop("disabled",false)},submitFormData:function e(t){var n=this;var i=this.$el.attr("id");var a=".js-form";var o="".concat(i,"-input--form-submitted-status");this.disableForm();this.showMessageBox();Backbone.ajax({url:"/_bk/submit-form",type:"POST",data:t,success:function e(){if(n.model.get("goalUrl"))n.redirect(n.model.get("goalUrl"));else{var t=(0,r.default)("widgets.form.success","Message sent successfully.");n.showMessage([{message:t,ariaDescribedBy:o}],"success");n.$(a).attr("aria-describedby",o);n.removeMessageBox()}},error:function e(t){if(422===t.status){n.enableForm();n.showRecaptcha(t.responseJSON.recaptcha.siteKey)}else{var i=(0,r.default)("widgets.form.failed","Submit failed.");n.showMessage([{message:i,ariaDescribedBy:o}],"fail");n.throwFormFieldError(a,o);n.removeMessageBox()}}})},showMessage:function e(t,n){if(!t||0===t.length)return;this.$(".message-box").length>0&&this.$(".message-box").remove();0===this.$(".overlay").length&&this.showMessageBox();var i=t.map((function(e){var t=e.ariaDescribedBy,n=e.message;return'<div id="'.concat(t,'" class="message-text">').concat(n,"</div>")})).join("");this.$(".overlay").addClass(n).append('<div class="message-box" style="display: block">'.concat(i,"</div>"))},showMessageBox:function e(){var t=bk$('<div class="overlay"></div>');0===this.$(".overlay").length&&this.$el.append(t);this.$(".js-form").addClass("submitting")},resetFormData:function e(){this.el.querySelector(".js-email").value="";var t=this.el.querySelector(".js-terms-input");var n=this.el.querySelector(".js-marketing-consent-input");t&&(t.checked=false);n&&(n.checked=false)},removeMessageBox:function e(){var t=this;this.enableForm();this.resetFormData();var n=setTimeout((function(){clearTimeout(n);t.$(".js-form").removeAttr("aria-invalid").removeAttr("aria-describedby");t.$(".overlay").fadeOut((function(){t.$(".overlay").remove()}))}),8e3)}});BaseKit.Widget.SignupformView=l;var c=i=l},5231:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{align:"widget-align-left",linkedin:"profile",facebook:"profile",twitter:"profile",youtube:"profile",rss:"profile",instagram:"profile",pinterest:"profile",vkontakte:"profile",xing:"profile",tiktok:"profile"},initialize:function e(){return this}});BaseKit.Widget.SocialiconsModel=o;var s=i=o},2905:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_socialicons",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.SocialiconsView=o;var s=i=o},7085:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{iframeCode:""},initialize:function e(){return this}});BaseKit.Widget.SoundcloudModel=o;var s=i=o},7535:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=s(n(5705));var r=s(n(9502));var o=s(n(1944));function s(e){return e&&e.__esModule?e:{default:e}}var l=a.default.extend({template:"widget_soundcloud",initialize:function e(t){a.default.prototype.initialize.call(this,t);this.properties=t.properties;"published"===r.default.getAppData("mode")&&(o.default.isScriptAllowedByCookieConsent(r.default,window.localStorage)?this.addSoundcloudIframe():this.addSoundcloudCookieConsentGatedIframe())},shouldShowIframe:function e(){return this.model.get("iframeCode")&&!this.properties.debugMode},addSoundcloudIframe:function e(){if(this.shouldShowIframe()){var t=document.createElement("div");t.innerHTML=this.model.get("iframeCode");document.getElementById("js-soundcloud-iframe-container-".concat(this.properties.uniqueId)).appendChild(t)}},addSoundcloudCookieConsentGatedIframe:function e(){if(this.shouldShowIframe()){var t=document.createElement("div");t.innerHTML=this.model.get("iframeCode");var n=t.firstChild;n.setAttribute("data-src",n.src);n.removeAttribute("src");n.className+=" js-consent-gated-iframe";document.getElementById("js-soundcloud-iframe-container-".concat(this.properties.uniqueId)).appendChild(t)}}});BaseKit.Widget.SoundcloudView=l;var c=i=l},439:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{height:"50"},initialize:function e(){return this}});BaseKit.Widget.SpaceModel=o;var s=i=o},3665:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_space",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.SpaceView=o;var s=i=o},7803:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{linkText:App.t("widgets.tweet.default_link_text","Tweet"),align:""},initialize:function e(){return this}});BaseKit.Widget.TweetModel=o;var s=i=o},557:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_tweet",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.TweetView=o;var s=i=o},2623:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o={light:"light",dark:"dark",transparent:"transparent"};var s=a.default.extend({defaults:{count:"3",includeRts:"1",searchKey:"profile",searchType:"username",defaultSearchKey:"",theme:o.light},temporary:{twitterWidgetEnabled:false,lang:navigator.language||"en"},initialize:function e(){return this}});BaseKit.Widget.TwitterModel=s;var l=i=s},3225:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=s(n(5705));var r=s(n(9502));var o=s(n(1944));function s(e){return e&&e.__esModule?e:{default:e}}var l=a.default.extend({template:"widget_twitter",initialize:function e(t){a.default.prototype.initialize.call(this,t);var n=this.getUpdateTwitterFeed();n||document.getElementById("js-cookie-consent-event").addEventListener("cookieConsentEvent",this.getUpdateTwitterFeed.bind(this))},getUpdateTwitterFeed:function e(){var t="published"!==r.default.getAppData("mode");var n=o.default.isScriptAllowedByCookieConsent(r.default,window.localStorage);var i=t||n;this.model.setTemporary("twitterWidgetEnabled",i);return i}});BaseKit.Widget.TwitterView=l;var c=i=l},7135:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{bold:0,italic:0,text:App.t("widgets.userlogin.default_button_text","Login"),allowPersistentLogin:true},temporary:{},initialize:function e(){return this}});BaseKit.Widget.UserloginModel=o;var s=i=o},1753:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_userlogin",events:{"submit .js-form":"onFormSubmit"},initialize:function e(t){a.default.prototype.initialize.call(this,t);this.handlePersistLogin()},handlePersistLogin:function e(){var t=window.localStorage.getItem("bk.widgets.login.persist");var n=this.el.querySelector(".js-persist-login");n&&"false"===t&&n.removeAttribute("checked")},onFormSubmit:function e(t){t.preventDefault();var n=[];var i={};var a=7;var r=5;var o=null;this.hideOverlay();this.clearErrors();i={password:this.el.querySelector(".js-password-input").value,auth_token:null};this.el.querySelector(".js-username-input")?i.username=this.el.querySelector(".js-username-input").value:i.email=this.el.querySelector(".js-email-input").value;if(this.el.querySelector(".js-persist-login")){o=this.el.querySelector(".js-persist-login").checked;this.storePersistPreference(o);o&&(i.persistLogin=true)}i.password&&(0===i.password.trim().length?n.push({element:"password",error:App.t("widgets.userlogin.error.missing_password","Please provide a password.")}):i.password.trim().length<a&&n.push({element:"password",error:App.t("widgets.userlogin.error.invalid_password_min","Please provide a password greater than 7 characters.")}));i.email&&i.email.trim().length<r&&-1===i.email.indexOf("@")&&n.push({element:"email",error:App.t("widgets.userlogin.error.wrong_email_format","Please enter an email address.")});i.username&&0===i.username.trim().length&&n.push({element:"username",error:App.t("widgets.userlogin.error.missing_username","Please enter a username.")});n.forEach(function(e){var t=this.el.querySelector(".js-".concat(e.element));if(t){t.textContent=e.error;t.style.display="block"}}.bind(this));0===n.length&&bk$.ajax({url:"/_bk/auth-token",type:"POST",processData:false}).done(function(e){if(e.token){i.auth_token=e.token;this.login(i)}}.bind(this))},clearErrors:function e(){var t=this.el.querySelectorAll(".js-error");Array.prototype.forEach.call(t,(function(e){e.innerHTML="";e.style.display="none"}))},hideOverlay:function e(){this.el.querySelector(".js-overlay").style.display="none";this.el.querySelector(".js-message").innerHTML="";this.el.querySelector(".js-userloginbtn").removeAttribute("disabled")},showOverlay:function e(t){this.el.querySelector(".js-message").textContent=t;this.el.querySelector(".js-overlay").style.display="block";this.el.querySelector(".js-userloginbtn").setAttribute("disabled","disabled")},login:function e(t){this.hideOverlay();bk$.ajax({url:"/_bk/user-login",type:"POST",data:t,beforeSend:function(){var e=App.t("widgets.userlogin.login_process","Logging into your account, Please wait...");this.showOverlay(e)}.bind(this)}).done(function(e,t){var n="";if("success"===t&&e.url){null!==App.getParam("r")&&(n=e.url.indexOf("?")>=0?"&r=".concat(App.getParam("r")):"?r=".concat(App.getParam("r")));document.location.assign(e.url+n)}else{this.hideOverlay();var i=App.t("widgets.userlogin.error.unknown_error","An unknown error has occurred, please try again");this.el.querySelector(".js-submission").textContent=i;this.el.querySelector(".js-submission").style.display="block"}}.bind(this)).fail(function(e){var t;this.hideOverlay();t=503===e.status?App.t("widgets.userlogin.error.maintenance","Were temporarily offline for maintenance; this is usually pretty quick, so check back soon. We apologise for the inconvenience."):App.t("widgets.userlogin.error.authentication_failure","Authentication failed.");this.el.querySelector(".js-submission").textContent=t;this.el.querySelector(".js-submission").style.display="block"}.bind(this))},storePersistPreference:function e(t){try{window.localStorage.setItem("bk.widgets.login.persist",t)}catch(e){console.error("Error persisting store")}}});BaseKit.Widget.UserloginView=o;var s=i=o},8621:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{bold:0,italic:0,text:App.t("widgets.userregistration.default_button_text","Register")},temporary:{},initialize:function e(){return this}});BaseKit.Widget.UserregistrationModel=o;var s=i=o},8479:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_userregistration",events:{"submit .js-form":"onFormSubmit"},initialize:function e(t){a.default.prototype.initialize.call(this,t);this.options=t},onFormSubmit:function e(t){t.preventDefault();var n=[];var i={};var a=7;var r=5;this.hideOverlay();this.clearErrors();i={email:this.el.querySelector(".js-email-input").value,password:this.el.querySelector(".js-password-input").value,widgetId:this.el.getAttribute("id"),languageCode:App.session.get("languageCode"),auth_token:null,HTTP_USER_AGENT:window.navigator.userAgent,widgetRef:this.options.properties.ref,pageRef:App.session.get("pageRef")};i.password&&i.password.trim().length<a&&n.push({element:"password",error:App.t("widgets.userregistration.error.invalid_password_min","Please provide a password greater than 7 characters.")});i.email&&i.email.trim().length<r&&-1===i.email.indexOf("@")&&n.push({element:"email",error:App.t("widgets.userregistration.error.wrong_email_format","Please enter an email address.")});n.forEach(function(e){var t=this.el.querySelector(".js-".concat(e.element));if(t){t.textContent=e.error;t.style.display="block"}}.bind(this));0===n.length&&bk$.ajax({url:"/_bk/auth-token",type:"POST",processData:false}).done(function(e){if(e.token){i.auth_token=e.token;this.createAccount(i)}}.bind(this))},clearErrors:function e(){var t=this.el.querySelectorAll(".js-error");Array.prototype.forEach.call(t,(function(e){e.innerHTML="";e.style.display="none"}))},hideOverlay:function e(){this.el.querySelector(".js-overlay").style.display="none";this.el.querySelector(".js-message").innerHTML="";this.el.querySelector(".js-registerbtn").removeAttribute("disabled")},showOverlay:function e(t){this.el.querySelector(".js-message").textContent=t;this.el.querySelector(".js-overlay").style.display="block";this.el.querySelector(".js-registerbtn").setAttribute("disabled","disabled")},createAccount:function e(t){this.hideOverlay();bk$.ajax({url:"/_bk/user-registration",type:"POST",data:t,beforeSend:function(){var e=App.t("widgets.userregistration.creating_account","Creating your account, Please wait...");this.showOverlay(e)}.bind(this)}).done(function(e,t){if("success"===t&&e.url)document.location.assign(e.url);else{this.hideOverlay();var n=App.t("widgets.userregistration.error.unknown_error","An unknown error has occurred, please try again");this.el.querySelector(".js-submission").textContent=n;this.el.querySelector(".js-submission").style.display="block"}}.bind(this)).fail(function(e){var t;this.hideOverlay();t=503===e.status?App.t("widgets.userregistration.error.maintenance","Were temporarily offline for maintenance; this is usually pretty quick, so check back soon. We apologise for the inconvenience."):App.t("widgets.userregistration.error.create_account_failed","Unable to create new user.");this.el.querySelector(".js-submission").textContent=t;this.el.querySelector(".js-submission").style.display="block"}.bind(this))}});BaseKit.Widget.UserregistrationView=o;var s=i=o},2189:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{title:App.t("widgets.yelpreview.title","Yelp reviews"),reviews:""},initialize:function e(){return this}});BaseKit.Widget.YelpreviewModel=o;var s=i=o},5887:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_yelpreview",initialize:function e(t){a.default.prototype.initialize.call(this,t);this.model.set("assetBaseUrl",App.session.get("assetBaseUrl"));this.getUpdateReviews()},getUpdateReviews:function e(){var t=this;var n=this.profileModel.get("yelpbusinessid");if(!n){this.model.set("reviews",[]);return}var i="/_bk/fetch-yelp-reviews";var a={businessID:n,brandRef:App.session.get("brandRef")};bk$.ajax({url:i,type:"POST",data:a,beforeSend:function e(){t.$(".js-yelpreview").html("<li>".concat(App.t("widgets.yelp.retrieving_reviews","Retrieving Reviews"),"</li>"))}}).done((function(e){e.reviews&&e.reviews.length?t.model.setTemporary("reviews",e):t.render()})).fail((function(){t.model.setTemporary("reviews",[])}))}});BaseKit.Widget.YelpreviewView=o;var s=i=o},9871:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(6671));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({defaults:{userInput:'<iframe src="//www.youtube.com/embed/FHtvDA0W34I" frameborder="0" allowfullscreen></iframe>',videoId:"FHtvDA0W34I"},initialize:function e(){return this}});BaseKit.Widget.YoutubeModel=o;var s=i=o},8745:(e,t,n)=>{"use strict";var i;i={value:true};i=void 0;var a=r(n(5705));function r(e){return e&&e.__esModule?e:{default:e}}var o=a.default.extend({template:"widget_youtube",initialize:function e(t){a.default.prototype.initialize.call(this,t)}});BaseKit.Widget.YoutubeView=o;var s=i=o},4147:function(e){(function(t,n){e.exports=n()})(this,(function(){"use strict";var e=function(){e=Object.assign||function e(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};return e.apply(this,arguments)};function t(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),a=0,t=0;t<n;t++)for(var r=arguments[t],o=0,s=r.length;o<s;o++,a++)i[a]=r[o];return i}var n=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"];var i={_disable:[],allowInput:false,allowInvalidPreload:false,altFormat:"F j, Y",altInput:false,altInputClass:"form-control input",animate:"object"===typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:true,clickOpens:true,closeOnSelect:true,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:false,enableSeconds:false,enableTime:false,errorHandler:function(e){return"undefined"!==typeof console&&console.warn(e)},getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0);t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:false,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:false,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:false,showMonths:1,static:false,time_24hr:false,weekNumbers:false,wrap:false};var a={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:false};var r=function(e,t){void 0===t&&(t=2);return("000"+e).slice(-1*t)};var o=function(e){return true===e?1:0};function s(e,t){var n;return function(){var i=this;clearTimeout(n);n=setTimeout((function(){return e.apply(i,arguments)}),t)}}var l=function(e){return e instanceof Array?e:[e]};function c(e,t,n){if(true===n)return e.classList.add(t);e.classList.remove(t)}function u(e,t,n){var i=window.document.createElement(e);t=t||"";n=n||"";i.className=t;void 0!==n&&(i.textContent=n);return i}function d(e){while(e.firstChild)e.removeChild(e.firstChild)}function f(e,t){if(t(e))return e;if(e.parentNode)return f(e.parentNode,t);return}function h(e,t){var n=u("div","numInputWrapper"),i=u("input","numInput "+e),a=u("span","arrowUp"),r=u("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0"))i.type="number";else{i.type="text";i.pattern="\\d*"}if(void 0!==t)for(var o in t)i.setAttribute(o,t[o]);n.appendChild(i);n.appendChild(a);n.appendChild(r);return n}function p(e){try{if("function"===typeof e.composedPath){var t=e.composedPath();return t[0]}return e.target}catch(t){return e.target}}var g=function(){return};var m=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]};var v={D:g,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours(parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*o(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t,n){var i=parseInt(t);var a=new Date(e.getFullYear(),0,2+7*(i-1),0,0,0,0);a.setDate(a.getDate()-a.getDay()+n.firstDayOfWeek);return a},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours(parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:g,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},u:function(e,t){return new Date(parseFloat(t))},w:g,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}};var b={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"};var y={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[y.w(e,t,n)]},F:function(e,t,n){return m(y.n(e,t,n)-1,false,t)},G:function(e,t,n){return r(y.h(e,t,n))},H:function(e){return r(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[o(e.getHours()>11)]},M:function(e,t){return m(e.getMonth(),true,t)},S:function(e){return r(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return r(e.getFullYear(),4)},d:function(e){return r(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return r(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return r(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}};var w=function(e){var t=e.config,n=void 0===t?i:t,r=e.l10n,o=void 0===r?a:r,s=e.isMobile,l=void 0!==s&&s;return function(e,t,i){var a=i||o;if(void 0!==n.formatDate&&!l)return n.formatDate(e,t,a);return t.split("").map((function(t,i,r){return y[t]&&"\\"!==r[i-1]?y[t](e,a,n):"\\"!==t?t:""})).join("")}};var x=function(e){var t=e.config,n=void 0===t?i:t,r=e.l10n,o=void 0===r?a:r;return function(e,t,a,r){if(0!==e&&!e)return;var s=r||o;var l;var c=e;if(e instanceof Date)l=new Date(e.getTime());else if("string"!==typeof e&&void 0!==e.toFixed)l=new Date(e);else if("string"===typeof e){var u=t||(n||i).dateFormat;var d=String(e).trim();if("today"===d){l=new Date;a=true}else if(/Z$/.test(d)||/GMT$/.test(d))l=new Date(e);else if(n&&n.parseDate)l=n.parseDate(e,u);else{l=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);var f=void 0,h=[];for(var p=0,g=0,m="";p<u.length;p++){var y=u[p];var w="\\"===y;var x="\\"===u[p-1]||w;if(b[y]&&!x){m+=b[y];var _=new RegExp(m).exec(e);_&&(f=true)&&h["Y"!==y?"push":"unshift"]({fn:v[y],val:_[++g]})}else w||(m+=".");h.forEach((function(e){var t=e.fn,n=e.val;return l=t(l,n,s)||l}))}l=f?l:void 0}}if(!(l instanceof Date&&!isNaN(l.getTime()))){n.errorHandler(new Error("Invalid date provided: "+c));return}true===a&&l.setHours(0,0,0,0);return l}};function _(e,t,n){void 0===n&&(n=true);if(false!==n)return new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0);return e.getTime()-t.getTime()}var k=function(e,t,n){return e>Math.min(t,n)&&e<Math.max(t,n)};var C={DAY:864e5};function A(e){var t=e.defaultHour;var n=e.defaultMinute;var i=e.defaultSeconds;if(void 0!==e.minDate){var a=e.minDate.getHours();var r=e.minDate.getMinutes();var o=e.minDate.getSeconds();t<a&&(t=a);t===a&&n<r&&(n=r);t===a&&n===r&&i<o&&(i=e.minDate.getSeconds())}if(void 0!==e.maxDate){var s=e.maxDate.getHours();var l=e.maxDate.getMinutes();t=Math.min(t,s);t===s&&(n=Math.min(l,n));t===s&&n===l&&(i=e.maxDate.getSeconds())}return{hours:t,minutes:n,seconds:i}}"function"!==typeof Object.assign&&(Object.assign=function(e){var t=[];for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!e)throw TypeError("Cannot convert undefined or null to object");var i=function(t){t&&Object.keys(t).forEach((function(n){return e[n]=t[n]}))};for(var a=0,r=t;a<r.length;a++){var o=r[a];i(o)}return e});var M=300;function E(g,v){var y={config:e(e({},i),S.defaultConfig),l10n:a};y.parseDate=x({config:y.config,l10n:y.l10n});y._handlers=[];y.pluginElements=[];y.loadedPlugins=[];y._bind=P;y._setHoursFromDate=V;y._positionCalendar=Ae;y.changeMonth=se;y.changeYear=he;y.clear=le;y.close=ce;y._createElement=u;y.destroy=ue;y.isEnabled=pe;y.jumpToDate=H;y.open=we;y.redraw=Te;y.set=Ie;y.setDate=Be;y.toggle=Pe;function E(){y.utils={getDaysInMonth:function(e,t){void 0===e&&(e=y.currentMonth);void 0===t&&(t=y.currentYear);if(1===e&&(t%4===0&&t%100!==0||t%400===0))return 29;return y.l10n.daysInMonth[e]}}}function T(){y.element=y.input=g;y.isOpen=false;_e();Ce();Ne();Ve();E();y.isMobile||$();L();if(y.selectedDates.length||y.config.noCalendar){y.config.enableTime&&V(y.config.noCalendar?y.latestSelectedDateObj:void 0);Ue(false)}D();var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!y.isMobile&&e&&Ae();Fe("onReady")}function j(e){return e.bind(y)}function D(){var e=y.config;if(false===e.weekNumbers&&1===e.showMonths)return;true!==e.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==y.calendarContainer){y.calendarContainer.style.visibility="hidden";y.calendarContainer.style.display="block"}if(void 0!==y.daysContainer){var t=(y.days.offsetWidth+1)*e.showMonths;y.daysContainer.style.width=t+"px";y.calendarContainer.style.width=t+(void 0!==y.weekWrapper?y.weekWrapper.offsetWidth:0)+"px";y.calendarContainer.style.removeProperty("visibility");y.calendarContainer.style.removeProperty("display")}}))}function I(e){if(0===y.selectedDates.length){var t=void 0===y.config.minDate||_(new Date,y.config.minDate)>=0?new Date:new Date(y.config.minDate.getTime());var n=A(y.config);t.setHours(n.hours,n.minutes,n.seconds,t.getMilliseconds());y.selectedDates=[t];y.latestSelectedDateObj=t}void 0!==e&&"blur"!==e.type&&Ke(e);var i=y._input.value;O();Ue();y._input.value!==i&&y._debouncedChange()}function q(e,t){return e%12+12*o(t===y.l10n.amPM[1])}function B(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}function O(){if(void 0===y.hourElement||void 0===y.minuteElement)return;var e=(parseInt(y.hourElement.value.slice(-2),10)||0)%24,t=(parseInt(y.minuteElement.value,10)||0)%60,n=void 0!==y.secondElement?(parseInt(y.secondElement.value,10)||0)%60:0;void 0!==y.amPM&&(e=q(e,y.amPM.textContent));var i=void 0!==y.config.minTime||y.config.minDate&&y.minDateHasTime&&y.latestSelectedDateObj&&0===_(y.latestSelectedDateObj,y.config.minDate,true);var a=void 0!==y.config.maxTime||y.config.maxDate&&y.maxDateHasTime&&y.latestSelectedDateObj&&0===_(y.latestSelectedDateObj,y.config.maxDate,true);if(a){var r=void 0!==y.config.maxTime?y.config.maxTime:y.config.maxDate;e=Math.min(e,r.getHours());e===r.getHours()&&(t=Math.min(t,r.getMinutes()));t===r.getMinutes()&&(n=Math.min(n,r.getSeconds()))}if(i){var o=void 0!==y.config.minTime?y.config.minTime:y.config.minDate;e=Math.max(e,o.getHours());e===o.getHours()&&t<o.getMinutes()&&(t=o.getMinutes());t===o.getMinutes()&&(n=Math.max(n,o.getSeconds()))}N(e,t,n)}function V(e){var t=e||y.latestSelectedDateObj;t&&N(t.getHours(),t.getMinutes(),t.getSeconds())}function N(e,t,n){void 0!==y.latestSelectedDateObj&&y.latestSelectedDateObj.setHours(e%24,t,n||0,0);if(!y.hourElement||!y.minuteElement||y.isMobile)return;y.hourElement.value=r(y.config.time_24hr?e:(12+e)%12+12*o(e%12===0));y.minuteElement.value=r(t);void 0!==y.amPM&&(y.amPM.textContent=y.l10n.amPM[o(e>=12)]);void 0!==y.secondElement&&(y.secondElement.value=r(n))}function R(e){var t=p(e);var n=parseInt(t.value)+(e.delta||0);(n/1e3>1||"Enter"===e.key&&!/[^\d]/.test(n.toString()))&&he(n)}function P(e,t,n,i){if(t instanceof Array)return t.forEach((function(t){return P(e,t,n,i)}));if(e instanceof Array)return e.forEach((function(e){return P(e,t,n,i)}));e.addEventListener(t,n,i);y._handlers.push({remove:function(){return e.removeEventListener(t,n)}})}function F(){Fe("onChange")}function L(){y.config.wrap&&["open","close","toggle","clear"].forEach((function(e){Array.prototype.forEach.call(y.element.querySelectorAll("[data-"+e+"]"),(function(t){return P(t,"click",y[e])}))}));if(y.isMobile){Re();return}var e=s(ye,50);y._debouncedChange=s(F,M);y.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&P(y.daysContainer,"mouseover",(function(e){"range"===y.config.mode&&be(p(e))}));P(window.document.body,"keydown",ve);y.config.inline||y.config.static||P(window,"resize",e);void 0!==window.ontouchstart?P(window.document,"touchstart",fe):P(window.document,"mousedown",fe);P(window.document,"focus",fe,{capture:true});if(true===y.config.clickOpens){P(y._input,"focus",y.open);P(y._input,"click",y.open)}if(void 0!==y.daysContainer){P(y.monthNav,"click",Ye);P(y.monthNav,["keyup","increment"],R);P(y.daysContainer,"click",je)}if(void 0!==y.timeContainer&&void 0!==y.minuteElement&&void 0!==y.hourElement){var t=function(e){return p(e).select()};P(y.timeContainer,["increment"],I);P(y.timeContainer,"blur",I,{capture:true});P(y.timeContainer,"click",W);P([y.hourElement,y.minuteElement],["focus","click"],t);void 0!==y.secondElement&&P(y.secondElement,"focus",(function(){return y.secondElement&&y.secondElement.select()}));void 0!==y.amPM&&P(y.amPM,"click",(function(e){I(e);F()}))}y.config.allowInput&&P(y._input,"blur",me)}function H(e,t){var n=void 0!==e?y.parseDate(e):y.latestSelectedDateObj||(y.config.minDate&&y.config.minDate>y.now?y.config.minDate:y.config.maxDate&&y.config.maxDate<y.now?y.config.maxDate:y.now);var i=y.currentYear;var a=y.currentMonth;try{if(void 0!==n){y.currentYear=n.getFullYear();y.currentMonth=n.getMonth()}}catch(e){e.message="Invalid date supplied: "+n;y.config.errorHandler(e)}if(t&&y.currentYear!==i){Fe("onYearChange");X()}!t||y.currentYear===i&&y.currentMonth===a||Fe("onMonthChange");y.redraw()}function W(e){var t=p(e);~t.className.indexOf("arrow")&&z(e,t.classList.contains("arrowUp")?1:-1)}function z(e,t,n){var i=e&&p(e);var a=n||i&&i.parentNode&&i.parentNode.firstChild;var r=Le("increment");r.delta=t;a&&a.dispatchEvent(r)}function $(){var e=window.document.createDocumentFragment();y.calendarContainer=u("div","flatpickr-calendar");y.calendarContainer.tabIndex=-1;if(!y.config.noCalendar){e.appendChild(ne());y.innerContainer=u("div","flatpickr-innerContainer");if(y.config.weekNumbers){var t=oe(),n=t.weekWrapper,i=t.weekNumbers;y.innerContainer.appendChild(n);y.weekNumbers=i;y.weekWrapper=n}y.rContainer=u("div","flatpickr-rContainer");y.rContainer.appendChild(ae());if(!y.daysContainer){y.daysContainer=u("div","flatpickr-days");y.daysContainer.tabIndex=-1}J();y.rContainer.appendChild(y.daysContainer);y.innerContainer.appendChild(y.rContainer);e.appendChild(y.innerContainer)}y.config.enableTime&&e.appendChild(ie());c(y.calendarContainer,"rangeMode","range"===y.config.mode);c(y.calendarContainer,"animate",true===y.config.animate);c(y.calendarContainer,"multiMonth",y.config.showMonths>1);y.calendarContainer.appendChild(e);var a=void 0!==y.config.appendTo&&void 0!==y.config.appendTo.nodeType;if(y.config.inline||y.config.static){y.calendarContainer.classList.add(y.config.inline?"inline":"static");y.config.inline&&(!a&&y.element.parentNode?y.element.parentNode.insertBefore(y.calendarContainer,y._input.nextSibling):void 0!==y.config.appendTo&&y.config.appendTo.appendChild(y.calendarContainer));if(y.config.static){var r=u("div","flatpickr-wrapper");y.element.parentNode&&y.element.parentNode.insertBefore(r,y.element);r.appendChild(y.element);y.altInput&&r.appendChild(y.altInput);r.appendChild(y.calendarContainer)}}y.config.static||y.config.inline||(void 0!==y.config.appendTo?y.config.appendTo:window.document.body).appendChild(y.calendarContainer)}function U(e,t,n,i){var a=pe(t,true),r=u("span","flatpickr-day "+e,t.getDate().toString());r.dateObj=t;r.$i=i;r.setAttribute("aria-label",y.formatDate(t,y.config.ariaDateFormat));if(-1===e.indexOf("hidden")&&0===_(t,y.now)){y.todayDateElem=r;r.classList.add("today");r.setAttribute("aria-current","date")}if(a){r.tabIndex=-1;if(He(t)){r.classList.add("selected");y.selectedDateElem=r;if("range"===y.config.mode){c(r,"startRange",y.selectedDates[0]&&0===_(t,y.selectedDates[0],true));c(r,"endRange",y.selectedDates[1]&&0===_(t,y.selectedDates[1],true));"nextMonthDay"===e&&r.classList.add("inRange")}}}else r.classList.add("flatpickr-disabled");"range"===y.config.mode&&We(t)&&!He(t)&&r.classList.add("inRange");y.weekNumbers&&1===y.config.showMonths&&"prevMonthDay"!==e&&n%7===1&&y.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+y.config.getWeek(t)+"</span>");Fe("onDayCreate",r);return r}function Y(e){e.focus();"range"===y.config.mode&&be(e)}function K(e){var t=e>0?0:y.config.showMonths-1;var n=e>0?y.config.showMonths:-1;for(var i=t;i!=n;i+=e){var a=y.daysContainer.children[i];var r=e>0?0:a.children.length-1;var o=e>0?a.children.length:-1;for(var s=r;s!=o;s+=e){var l=a.children[s];if(-1===l.className.indexOf("hidden")&&pe(l.dateObj))return l}}return}function Q(e,t){var n=-1===e.className.indexOf("Month")?e.dateObj.getMonth():y.currentMonth;var i=t>0?y.config.showMonths:-1;var a=t>0?1:-1;for(var r=n-y.currentMonth;r!=i;r+=a){var o=y.daysContainer.children[r];var s=n-y.currentMonth===r?e.$i+t:t<0?o.children.length-1:0;var l=o.children.length;for(var c=s;c>=0&&c<l&&c!=(t>0?l:-1);c+=a){var u=o.children[c];if(-1===u.className.indexOf("hidden")&&pe(u.dateObj)&&Math.abs(e.$i-c)>=Math.abs(t))return Y(u)}}y.changeMonth(a);G(K(a),0);return}function G(e,t){var n=ge(document.activeElement||document.body);var i=void 0!==e?e:n?document.activeElement:void 0!==y.selectedDateElem&&ge(y.selectedDateElem)?y.selectedDateElem:void 0!==y.todayDateElem&&ge(y.todayDateElem)?y.todayDateElem:K(t>0?1:-1);void 0===i?y._input.focus():n?Q(i,t):Y(i)}function Z(e,t){var n=(new Date(e,t,1).getDay()-y.l10n.firstDayOfWeek+7)%7;var i=y.utils.getDaysInMonth((t-1+12)%12,e);var a=y.utils.getDaysInMonth(t,e),r=window.document.createDocumentFragment(),o=y.config.showMonths>1,s=o?"prevMonthDay hidden":"prevMonthDay",l=o?"nextMonthDay hidden":"nextMonthDay";var c=i+1-n,d=0;for(;c<=i;c++,d++)r.appendChild(U(s,new Date(e,t-1,c),c,d));for(c=1;c<=a;c++,d++)r.appendChild(U("",new Date(e,t,c),c,d));for(var f=a+1;f<=42-n&&(1===y.config.showMonths||d%7!==0);f++,d++)r.appendChild(U(l,new Date(e,t+1,f%a),f,d));var h=u("div","dayContainer");h.appendChild(r);return h}function J(){if(void 0===y.daysContainer)return;d(y.daysContainer);y.weekNumbers&&d(y.weekNumbers);var e=document.createDocumentFragment();for(var t=0;t<y.config.showMonths;t++){var n=new Date(y.currentYear,y.currentMonth,1);n.setMonth(y.currentMonth+t);e.appendChild(Z(n.getFullYear(),n.getMonth()))}y.daysContainer.appendChild(e);y.days=y.daysContainer.firstChild;"range"===y.config.mode&&1===y.selectedDates.length&&be()}function X(){if(y.config.showMonths>1||"dropdown"!==y.config.monthSelectorType)return;var e=function(e){if(void 0!==y.config.minDate&&y.currentYear===y.config.minDate.getFullYear()&&e<y.config.minDate.getMonth())return false;return!(void 0!==y.config.maxDate&&y.currentYear===y.config.maxDate.getFullYear()&&e>y.config.maxDate.getMonth())};y.monthsDropdownContainer.tabIndex=-1;y.monthsDropdownContainer.innerHTML="";for(var t=0;t<12;t++){if(!e(t))continue;var n=u("option","flatpickr-monthDropdown-month");n.value=new Date(y.currentYear,t).getMonth().toString();n.textContent=m(t,y.config.shorthandCurrentMonth,y.l10n);n.tabIndex=-1;y.currentMonth===t&&(n.selected=true);y.monthsDropdownContainer.appendChild(n)}}function ee(){var e=u("div","flatpickr-month");var t=window.document.createDocumentFragment();var n;if(y.config.showMonths>1||"static"===y.config.monthSelectorType)n=u("span","cur-month");else{y.monthsDropdownContainer=u("select","flatpickr-monthDropdown-months");y.monthsDropdownContainer.setAttribute("aria-label",y.l10n.monthAriaLabel);P(y.monthsDropdownContainer,"change",(function(e){var t=p(e);var n=parseInt(t.value,10);y.changeMonth(n-y.currentMonth);Fe("onMonthChange")}));X();n=y.monthsDropdownContainer}var i=h("cur-year",{tabindex:"-1"});var a=i.getElementsByTagName("input")[0];a.setAttribute("aria-label",y.l10n.yearAriaLabel);y.config.minDate&&a.setAttribute("min",y.config.minDate.getFullYear().toString());if(y.config.maxDate){a.setAttribute("max",y.config.maxDate.getFullYear().toString());a.disabled=!!y.config.minDate&&y.config.minDate.getFullYear()===y.config.maxDate.getFullYear()}var r=u("div","flatpickr-current-month");r.appendChild(n);r.appendChild(i);t.appendChild(r);e.appendChild(t);return{container:e,yearElement:a,monthElement:n}}function te(){d(y.monthNav);y.monthNav.appendChild(y.prevMonthNav);if(y.config.showMonths){y.yearElements=[];y.monthElements=[]}for(var e=y.config.showMonths;e--;){var t=ee();y.yearElements.push(t.yearElement);y.monthElements.push(t.monthElement);y.monthNav.appendChild(t.container)}y.monthNav.appendChild(y.nextMonthNav)}function ne(){y.monthNav=u("div","flatpickr-months");y.yearElements=[];y.monthElements=[];y.prevMonthNav=u("span","flatpickr-prev-month");y.prevMonthNav.innerHTML=y.config.prevArrow;y.nextMonthNav=u("span","flatpickr-next-month");y.nextMonthNav.innerHTML=y.config.nextArrow;te();Object.defineProperty(y,"_hidePrevMonthArrow",{get:function(){return y.__hidePrevMonthArrow},set:function(e){if(y.__hidePrevMonthArrow!==e){c(y.prevMonthNav,"flatpickr-disabled",e);y.__hidePrevMonthArrow=e}}});Object.defineProperty(y,"_hideNextMonthArrow",{get:function(){return y.__hideNextMonthArrow},set:function(e){if(y.__hideNextMonthArrow!==e){c(y.nextMonthNav,"flatpickr-disabled",e);y.__hideNextMonthArrow=e}}});y.currentYearElement=y.yearElements[0];ze();return y.monthNav}function ie(){y.calendarContainer.classList.add("hasTime");y.config.noCalendar&&y.calendarContainer.classList.add("noCalendar");var e=A(y.config);y.timeContainer=u("div","flatpickr-time");y.timeContainer.tabIndex=-1;var t=u("span","flatpickr-time-separator",":");var n=h("flatpickr-hour",{"aria-label":y.l10n.hourAriaLabel});y.hourElement=n.getElementsByTagName("input")[0];var i=h("flatpickr-minute",{"aria-label":y.l10n.minuteAriaLabel});y.minuteElement=i.getElementsByTagName("input")[0];y.hourElement.tabIndex=y.minuteElement.tabIndex=-1;y.hourElement.value=r(y.latestSelectedDateObj?y.latestSelectedDateObj.getHours():y.config.time_24hr?e.hours:B(e.hours));y.minuteElement.value=r(y.latestSelectedDateObj?y.latestSelectedDateObj.getMinutes():e.minutes);y.hourElement.setAttribute("step",y.config.hourIncrement.toString());y.minuteElement.setAttribute("step",y.config.minuteIncrement.toString());y.hourElement.setAttribute("min",y.config.time_24hr?"0":"1");y.hourElement.setAttribute("max",y.config.time_24hr?"23":"12");y.hourElement.setAttribute("maxlength","2");y.minuteElement.setAttribute("min","0");y.minuteElement.setAttribute("max","59");y.minuteElement.setAttribute("maxlength","2");y.timeContainer.appendChild(n);y.timeContainer.appendChild(t);y.timeContainer.appendChild(i);y.config.time_24hr&&y.timeContainer.classList.add("time24hr");if(y.config.enableSeconds){y.timeContainer.classList.add("hasSeconds");var a=h("flatpickr-second");y.secondElement=a.getElementsByTagName("input")[0];y.secondElement.value=r(y.latestSelectedDateObj?y.latestSelectedDateObj.getSeconds():e.seconds);y.secondElement.setAttribute("step",y.minuteElement.getAttribute("step"));y.secondElement.setAttribute("min","0");y.secondElement.setAttribute("max","59");y.secondElement.setAttribute("maxlength","2");y.timeContainer.appendChild(u("span","flatpickr-time-separator",":"));y.timeContainer.appendChild(a)}if(!y.config.time_24hr){y.amPM=u("span","flatpickr-am-pm",y.l10n.amPM[o((y.latestSelectedDateObj?y.hourElement.value:y.config.defaultHour)>11)]);y.amPM.title=y.l10n.toggleTitle;y.amPM.tabIndex=-1;y.timeContainer.appendChild(y.amPM)}return y.timeContainer}function ae(){y.weekdayContainer?d(y.weekdayContainer):y.weekdayContainer=u("div","flatpickr-weekdays");for(var e=y.config.showMonths;e--;){var t=u("div","flatpickr-weekdaycontainer");y.weekdayContainer.appendChild(t)}re();return y.weekdayContainer}function re(){if(!y.weekdayContainer)return;var e=y.l10n.firstDayOfWeek;var n=t(y.l10n.weekdays.shorthand);e>0&&e<n.length&&(n=t(n.splice(e,n.length),n.splice(0,e)));for(var i=y.config.showMonths;i--;)y.weekdayContainer.children[i].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+n.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}function oe(){y.calendarContainer.classList.add("hasWeeks");var e=u("div","flatpickr-weekwrapper");e.appendChild(u("span","flatpickr-weekday",y.l10n.weekAbbreviation));var t=u("div","flatpickr-weeks");e.appendChild(t);return{weekWrapper:e,weekNumbers:t}}function se(e,t){void 0===t&&(t=true);var n=t?e:e-y.currentMonth;if(n<0&&true===y._hidePrevMonthArrow||n>0&&true===y._hideNextMonthArrow)return;y.currentMonth+=n;if(y.currentMonth<0||y.currentMonth>11){y.currentYear+=y.currentMonth>11?1:-1;y.currentMonth=(y.currentMonth+12)%12;Fe("onYearChange");X()}J();Fe("onMonthChange");ze()}function le(e,t){void 0===e&&(e=true);void 0===t&&(t=true);y.input.value="";void 0!==y.altInput&&(y.altInput.value="");void 0!==y.mobileInput&&(y.mobileInput.value="");y.selectedDates=[];y.latestSelectedDateObj=void 0;if(true===t){y.currentYear=y._initialDate.getFullYear();y.currentMonth=y._initialDate.getMonth()}if(true===y.config.enableTime){var n=A(y.config),i=n.hours,a=n.minutes,r=n.seconds;N(i,a,r)}y.redraw();e&&Fe("onChange")}function ce(){y.isOpen=false;if(!y.isMobile){void 0!==y.calendarContainer&&y.calendarContainer.classList.remove("open");void 0!==y._input&&y._input.classList.remove("active")}Fe("onClose")}function ue(){void 0!==y.config&&Fe("onDestroy");for(var e=y._handlers.length;e--;)y._handlers[e].remove();y._handlers=[];if(y.mobileInput){y.mobileInput.parentNode&&y.mobileInput.parentNode.removeChild(y.mobileInput);y.mobileInput=void 0}else if(y.calendarContainer&&y.calendarContainer.parentNode)if(y.config.static&&y.calendarContainer.parentNode){var t=y.calendarContainer.parentNode;t.lastChild&&t.removeChild(t.lastChild);if(t.parentNode){while(t.firstChild)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}else y.calendarContainer.parentNode.removeChild(y.calendarContainer);if(y.altInput){y.input.type="text";y.altInput.parentNode&&y.altInput.parentNode.removeChild(y.altInput);delete y.altInput}if(y.input){y.input.type=y.input._type;y.input.classList.remove("flatpickr-input");y.input.removeAttribute("readonly")}["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((function(e){try{delete y[e]}catch(e){}}))}function de(e){if(y.config.appendTo&&y.config.appendTo.contains(e))return true;return y.calendarContainer.contains(e)}function fe(e){if(y.isOpen&&!y.config.inline){var t=p(e);var n=de(t);var i=t===y.input||t===y.altInput||y.element.contains(t)||e.path&&e.path.indexOf&&(~e.path.indexOf(y.input)||~e.path.indexOf(y.altInput));var a="blur"===e.type?i&&e.relatedTarget&&!de(e.relatedTarget):!i&&!n&&!de(e.relatedTarget);var r=!y.config.ignoredFocusElements.some((function(e){return e.contains(t)}));if(a&&r){void 0!==y.timeContainer&&void 0!==y.minuteElement&&void 0!==y.hourElement&&""!==y.input.value&&void 0!==y.input.value&&I();y.close();if(y.config&&"range"===y.config.mode&&1===y.selectedDates.length){y.clear(false);y.redraw()}}}}function he(e){if(!e||y.config.minDate&&e<y.config.minDate.getFullYear()||y.config.maxDate&&e>y.config.maxDate.getFullYear())return;var t=e,n=y.currentYear!==t;y.currentYear=t||y.currentYear;y.config.maxDate&&y.currentYear===y.config.maxDate.getFullYear()?y.currentMonth=Math.min(y.config.maxDate.getMonth(),y.currentMonth):y.config.minDate&&y.currentYear===y.config.minDate.getFullYear()&&(y.currentMonth=Math.max(y.config.minDate.getMonth(),y.currentMonth));if(n){y.redraw();Fe("onYearChange");X()}}function pe(e,t){var n;void 0===t&&(t=true);var i=y.parseDate(e,void 0,t);if(y.config.minDate&&i&&_(i,y.config.minDate,void 0!==t?t:!y.minDateHasTime)<0||y.config.maxDate&&i&&_(i,y.config.maxDate,void 0!==t?t:!y.maxDateHasTime)>0)return false;if(!y.config.enable&&0===y.config.disable.length)return true;if(void 0===i)return false;var a=!!y.config.enable,r=null!==(n=y.config.enable)&&void 0!==n?n:y.config.disable;for(var o=0,s=void 0;o<r.length;o++){s=r[o];if("function"===typeof s&&s(i))return a;if(s instanceof Date&&void 0!==i&&s.getTime()===i.getTime())return a;if("string"===typeof s){var l=y.parseDate(s,void 0,true);return l&&l.getTime()===i.getTime()?a:!a}if("object"===typeof s&&void 0!==i&&s.from&&s.to&&i.getTime()>=s.from.getTime()&&i.getTime()<=s.to.getTime())return a}return!a}function ge(e){if(void 0!==y.daysContainer)return-1===e.className.indexOf("hidden")&&-1===e.className.indexOf("flatpickr-disabled")&&y.daysContainer.contains(e);return false}function me(e){var t=e.target===y._input;!t||!(y.selectedDates.length>0||y._input.value.length>0)||e.relatedTarget&&de(e.relatedTarget)||y.setDate(y._input.value,true,e.target===y.altInput?y.config.altFormat:y.config.dateFormat)}function ve(e){var t=p(e);var n=y.config.wrap?g.contains(t):t===y._input;var i=y.config.allowInput;var a=y.isOpen&&(!i||!n);var r=y.config.inline&&n&&!i;if(13===e.keyCode&&n){if(i){y.setDate(y._input.value,true,t===y.altInput?y.config.altFormat:y.config.dateFormat);return t.blur()}y.open()}else if(de(t)||a||r){var o=!!y.timeContainer&&y.timeContainer.contains(t);switch(e.keyCode){case 13:if(o){e.preventDefault();I();Se()}else je(e);break;case 27:e.preventDefault();Se();break;case 8:case 46:if(n&&!y.config.allowInput){e.preventDefault();y.clear()}break;case 37:case 39:if(o||n)y.hourElement&&y.hourElement.focus();else{e.preventDefault();if(void 0!==y.daysContainer&&(false===i||document.activeElement&&ge(document.activeElement))){var s=39===e.keyCode?1:-1;if(e.ctrlKey){e.stopPropagation();se(s);G(K(1),0)}else G(void 0,s)}}break;case 38:case 40:e.preventDefault();var l=40===e.keyCode?1:-1;if(y.daysContainer&&void 0!==t.$i||t===y.input||t===y.altInput)if(e.ctrlKey){e.stopPropagation();he(y.currentYear-l);G(K(1),0)}else o||G(void 0,7*l);else if(t===y.currentYearElement)he(y.currentYear-l);else if(y.config.enableTime){!o&&y.hourElement&&y.hourElement.focus();I(e);y._debouncedChange()}break;case 9:if(o){var c=[y.hourElement,y.minuteElement,y.secondElement,y.amPM].concat(y.pluginElements).filter((function(e){return e}));var u=c.indexOf(t);if(-1!==u){var d=c[u+(e.shiftKey?-1:1)];e.preventDefault();(d||y._input).focus()}}else if(!y.config.noCalendar&&y.daysContainer&&y.daysContainer.contains(t)&&e.shiftKey){e.preventDefault();y._input.focus()}break}}if(void 0!==y.amPM&&t===y.amPM)switch(e.key){case y.l10n.amPM[0].charAt(0):case y.l10n.amPM[0].charAt(0).toLowerCase():y.amPM.textContent=y.l10n.amPM[0];O();Ue();break;case y.l10n.amPM[1].charAt(0):case y.l10n.amPM[1].charAt(0).toLowerCase():y.amPM.textContent=y.l10n.amPM[1];O();Ue();break}(n||de(t))&&Fe("onKeyDown",e)}function be(e){if(1!==y.selectedDates.length||e&&(!e.classList.contains("flatpickr-day")||e.classList.contains("flatpickr-disabled")))return;var t=e?e.dateObj.getTime():y.days.firstElementChild.dateObj.getTime(),n=y.parseDate(y.selectedDates[0],void 0,true).getTime(),i=Math.min(t,y.selectedDates[0].getTime()),a=Math.max(t,y.selectedDates[0].getTime());var r=false;var o=0,s=0;for(var l=i;l<a;l+=C.DAY)if(!pe(new Date(l),true)){r=r||l>i&&l<a;l<n&&(!o||l>o)?o=l:l>n&&(!s||l<s)&&(s=l)}for(var c=0;c<y.config.showMonths;c++){var u=y.daysContainer.children[c];var d=function(i,a){var l=u.children[i],c=l.dateObj;var d=c.getTime();var f=o>0&&d<o||s>0&&d>s;if(f){l.classList.add("notAllowed");["inRange","startRange","endRange"].forEach((function(e){l.classList.remove(e)}));return"continue"}if(r&&!f)return"continue";["startRange","inRange","endRange","notAllowed"].forEach((function(e){l.classList.remove(e)}));if(void 0!==e){e.classList.add(t<=y.selectedDates[0].getTime()?"startRange":"endRange");n<t&&d===n?l.classList.add("startRange"):n>t&&d===n&&l.classList.add("endRange");d>=o&&(0===s||d<=s)&&k(d,n,t)&&l.classList.add("inRange")}};for(var f=0,h=u.children.length;f<h;f++)d(f,h)}}function ye(){!y.isOpen||y.config.static||y.config.inline||Ae()}function we(e,t){void 0===t&&(t=y._positionElement);if(true===y.isMobile){if(e){e.preventDefault();var n=p(e);n&&n.blur()}if(void 0!==y.mobileInput){y.mobileInput.focus();y.mobileInput.click()}Fe("onOpen");return}if(y._input.disabled||y.config.inline)return;var i=y.isOpen;y.isOpen=true;if(!i){y.calendarContainer.classList.add("open");y._input.classList.add("active");Fe("onOpen");Ae(t)}true===y.config.enableTime&&true===y.config.noCalendar&&(false!==y.config.allowInput||void 0!==e&&y.timeContainer.contains(e.relatedTarget)||setTimeout((function(){return y.hourElement.select()}),50))}function xe(e){return function(t){var n=y.config["_"+e+"Date"]=y.parseDate(t,y.config.dateFormat);var i=y.config["_"+("min"===e?"max":"min")+"Date"];void 0!==n&&(y["min"===e?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0);if(y.selectedDates){y.selectedDates=y.selectedDates.filter((function(e){return pe(e)}));y.selectedDates.length||"min"!==e||V(n);Ue()}if(y.daysContainer){Te();void 0!==n?y.currentYearElement[e]=n.getFullYear().toString():y.currentYearElement.removeAttribute(e);y.currentYearElement.disabled=!!i&&void 0!==n&&i.getFullYear()===n.getFullYear()}}}function _e(){var t=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"];var a=e(e({},JSON.parse(JSON.stringify(g.dataset||{}))),v);var r={};y.config.parseDate=a.parseDate;y.config.formatDate=a.formatDate;Object.defineProperty(y.config,"enable",{get:function(){return y.config._enable},set:function(e){y.config._enable=Oe(e)}});Object.defineProperty(y.config,"disable",{get:function(){return y.config._disable},set:function(e){y.config._disable=Oe(e)}});var o="time"===a.mode;if(!a.dateFormat&&(a.enableTime||o)){var s=S.defaultConfig.dateFormat||i.dateFormat;r.dateFormat=a.noCalendar||o?"H:i"+(a.enableSeconds?":S":""):s+" H:i"+(a.enableSeconds?":S":"")}if(a.altInput&&(a.enableTime||o)&&!a.altFormat){var c=S.defaultConfig.altFormat||i.altFormat;r.altFormat=a.noCalendar||o?"h:i"+(a.enableSeconds?":S K":" K"):c+" h:i"+(a.enableSeconds?":S":"")+" K"}Object.defineProperty(y.config,"minDate",{get:function(){return y.config._minDate},set:xe("min")});Object.defineProperty(y.config,"maxDate",{get:function(){return y.config._maxDate},set:xe("max")});var u=function(e){return function(t){y.config["min"===e?"_minTime":"_maxTime"]=y.parseDate(t,"H:i:S")}};Object.defineProperty(y.config,"minTime",{get:function(){return y.config._minTime},set:u("min")});Object.defineProperty(y.config,"maxTime",{get:function(){return y.config._maxTime},set:u("max")});if("time"===a.mode){y.config.noCalendar=true;y.config.enableTime=true}Object.assign(y.config,r,a);for(var d=0;d<t.length;d++)y.config[t[d]]=true===y.config[t[d]]||"true"===y.config[t[d]];n.filter((function(e){return void 0!==y.config[e]})).forEach((function(e){y.config[e]=l(y.config[e]||[]).map(j)}));y.isMobile=!y.config.disableMobile&&!y.config.inline&&"single"===y.config.mode&&!y.config.disable.length&&!y.config.enable&&!y.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var d=0;d<y.config.plugins.length;d++){var f=y.config.plugins[d](y)||{};for(var h in f)n.indexOf(h)>-1?y.config[h]=l(f[h]).map(j).concat(y.config[h]):"undefined"===typeof a[h]&&(y.config[h]=f[h])}a.altInputClass||(y.config.altInputClass=ke().className+" "+y.config.altInputClass);Fe("onParseConfig")}function ke(){return y.config.wrap?g.querySelector("[data-input]"):g}function Ce(){"object"!==typeof y.config.locale&&"undefined"===typeof S.l10ns[y.config.locale]&&y.config.errorHandler(new Error("flatpickr: invalid locale "+y.config.locale));y.l10n=e(e({},S.l10ns.default),"object"===typeof y.config.locale?y.config.locale:"default"!==y.config.locale?S.l10ns[y.config.locale]:void 0);b.K="("+y.l10n.amPM[0]+"|"+y.l10n.amPM[1]+"|"+y.l10n.amPM[0].toLowerCase()+"|"+y.l10n.amPM[1].toLowerCase()+")";var t=e(e({},v),JSON.parse(JSON.stringify(g.dataset||{})));void 0===t.time_24hr&&void 0===S.defaultConfig.time_24hr&&(y.config.time_24hr=y.l10n.time_24hr);y.formatDate=w(y);y.parseDate=x({config:y.config,l10n:y.l10n})}function Ae(e){if("function"===typeof y.config.position)return void y.config.position(y,e);if(void 0===y.calendarContainer)return;Fe("onPreCalendarPosition");var t=e||y._positionElement;var n=Array.prototype.reduce.call(y.calendarContainer.children,(function(e,t){return e+t.offsetHeight}),0),i=y.calendarContainer.offsetWidth,a=y.config.position.split(" "),r=a[0],o=a.length>1?a[1]:null,s=t.getBoundingClientRect(),l=window.innerHeight-s.bottom,u="above"===r||"below"!==r&&l<n&&s.top>n;var d=window.pageYOffset+s.top+(u?-n-2:t.offsetHeight+2);c(y.calendarContainer,"arrowTop",!u);c(y.calendarContainer,"arrowBottom",u);if(y.config.inline)return;var f=window.pageXOffset+s.left;var h=false;var p=false;if("center"===o){f-=(i-s.width)/2;h=true}else if("right"===o){f-=i-s.width;p=true}c(y.calendarContainer,"arrowLeft",!h&&!p);c(y.calendarContainer,"arrowCenter",h);c(y.calendarContainer,"arrowRight",p);var g=window.document.body.offsetWidth-(window.pageXOffset+s.right);var m=f+i>window.document.body.offsetWidth;var v=g+i>window.document.body.offsetWidth;c(y.calendarContainer,"rightMost",m);if(y.config.static)return;y.calendarContainer.style.top=d+"px";if(m)if(v){var b=Me();if(void 0===b)return;var w=window.document.body.offsetWidth;var x=Math.max(0,w/2-i/2);var _=".flatpickr-calendar.centerMost:before";var k=".flatpickr-calendar.centerMost:after";var C=b.cssRules.length;var A="{left:"+s.left+"px;right:auto;}";c(y.calendarContainer,"rightMost",false);c(y.calendarContainer,"centerMost",true);b.insertRule(_+","+k+A,C);y.calendarContainer.style.left=x+"px";y.calendarContainer.style.right="auto"}else{y.calendarContainer.style.left="auto";y.calendarContainer.style.right=g+"px"}else{y.calendarContainer.style.left=f+"px";y.calendarContainer.style.right="auto"}}function Me(){var e=null;for(var t=0;t<document.styleSheets.length;t++){var n=document.styleSheets[t];try{n.cssRules}catch(e){continue}e=n;break}return null!=e?e:Ee()}function Ee(){var e=document.createElement("style");document.head.appendChild(e);return e.sheet}function Te(){if(y.config.noCalendar||y.isMobile)return;X();ze();J()}function Se(){y._input.focus();-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(y.close,0):y.close()}function je(e){e.preventDefault();e.stopPropagation();var t=function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled")&&!e.classList.contains("notAllowed")};var n=f(p(e),t);if(void 0===n)return;var i=n;var a=y.latestSelectedDateObj=new Date(i.dateObj.getTime());var r=(a.getMonth()<y.currentMonth||a.getMonth()>y.currentMonth+y.config.showMonths-1)&&"range"!==y.config.mode;y.selectedDateElem=i;if("single"===y.config.mode)y.selectedDates=[a];else if("multiple"===y.config.mode){var o=He(a);o?y.selectedDates.splice(parseInt(o),1):y.selectedDates.push(a)}else if("range"===y.config.mode){2===y.selectedDates.length&&y.clear(false,false);y.latestSelectedDateObj=a;y.selectedDates.push(a);0!==_(a,y.selectedDates[0],true)&&y.selectedDates.sort((function(e,t){return e.getTime()-t.getTime()}))}O();if(r){var s=y.currentYear!==a.getFullYear();y.currentYear=a.getFullYear();y.currentMonth=a.getMonth();if(s){Fe("onYearChange");X()}Fe("onMonthChange")}ze();J();Ue();r||"range"===y.config.mode||1!==y.config.showMonths?void 0!==y.selectedDateElem&&void 0===y.hourElement&&y.selectedDateElem&&y.selectedDateElem.focus():Y(i);void 0!==y.hourElement&&void 0!==y.hourElement&&y.hourElement.focus();if(y.config.closeOnSelect){var l="single"===y.config.mode&&!y.config.enableTime;var c="range"===y.config.mode&&2===y.selectedDates.length&&!y.config.enableTime;(l||c)&&Se()}F()}var De={locale:[Ce,re],showMonths:[te,D,ae],minDate:[H],maxDate:[H],clickOpens:[function(){if(true===y.config.clickOpens){P(y._input,"focus",y.open);P(y._input,"click",y.open)}else{y._input.removeEventListener("focus",y.open);y._input.removeEventListener("click",y.open)}}]};function Ie(e,t){if(null!==e&&"object"===typeof e){Object.assign(y.config,e);for(var i in e)void 0!==De[i]&&De[i].forEach((function(e){return e()}))}else{y.config[e]=t;void 0!==De[e]?De[e].forEach((function(e){return e()})):n.indexOf(e)>-1&&(y.config[e]=l(t))}y.redraw();Ue(true)}function qe(e,t){var n=[];if(e instanceof Array)n=e.map((function(e){return y.parseDate(e,t)}));else if(e instanceof Date||"number"===typeof e)n=[y.parseDate(e,t)];else if("string"===typeof e)switch(y.config.mode){case"single":case"time":n=[y.parseDate(e,t)];break;case"multiple":n=e.split(y.config.conjunction).map((function(e){return y.parseDate(e,t)}));break;case"range":n=e.split(y.l10n.rangeSeparator).map((function(e){return y.parseDate(e,t)}));break}else y.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));y.selectedDates=y.config.allowInvalidPreload?n:n.filter((function(e){return e instanceof Date&&pe(e,false)}));"range"===y.config.mode&&y.selectedDates.sort((function(e,t){return e.getTime()-t.getTime()}))}function Be(e,t,n){void 0===t&&(t=false);void 0===n&&(n=y.config.dateFormat);if(0!==e&&!e||e instanceof Array&&0===e.length)return y.clear(t);qe(e,n);y.latestSelectedDateObj=y.selectedDates[y.selectedDates.length-1];y.redraw();H(void 0,t);V();0===y.selectedDates.length&&y.clear(false);Ue(t);t&&Fe("onChange")}function Oe(e){return e.slice().map((function(e){if("string"===typeof e||"number"===typeof e||e instanceof Date)return y.parseDate(e,void 0,true);if(e&&"object"===typeof e&&e.from&&e.to)return{from:y.parseDate(e.from,void 0),to:y.parseDate(e.to,void 0)};return e})).filter((function(e){return e}))}function Ve(){y.selectedDates=[];y.now=y.parseDate(y.config.now)||new Date;var e=y.config.defaultDate||("INPUT"!==y.input.nodeName&&"TEXTAREA"!==y.input.nodeName||!y.input.placeholder||y.input.value!==y.input.placeholder?y.input.value:null);e&&qe(e,y.config.dateFormat);y._initialDate=y.selectedDates.length>0?y.selectedDates[0]:y.config.minDate&&y.config.minDate.getTime()>y.now.getTime()?y.config.minDate:y.config.maxDate&&y.config.maxDate.getTime()<y.now.getTime()?y.config.maxDate:y.now;y.currentYear=y._initialDate.getFullYear();y.currentMonth=y._initialDate.getMonth();y.selectedDates.length>0&&(y.latestSelectedDateObj=y.selectedDates[0]);void 0!==y.config.minTime&&(y.config.minTime=y.parseDate(y.config.minTime,"H:i"));void 0!==y.config.maxTime&&(y.config.maxTime=y.parseDate(y.config.maxTime,"H:i"));y.minDateHasTime=!!y.config.minDate&&(y.config.minDate.getHours()>0||y.config.minDate.getMinutes()>0||y.config.minDate.getSeconds()>0);y.maxDateHasTime=!!y.config.maxDate&&(y.config.maxDate.getHours()>0||y.config.maxDate.getMinutes()>0||y.config.maxDate.getSeconds()>0)}function Ne(){y.input=ke();if(!y.input){y.config.errorHandler(new Error("Invalid input element specified"));return}y.input._type=y.input.type;y.input.type="text";y.input.classList.add("flatpickr-input");y._input=y.input;if(y.config.altInput){y.altInput=u(y.input.nodeName,y.config.altInputClass);y._input=y.altInput;y.altInput.placeholder=y.input.placeholder;y.altInput.disabled=y.input.disabled;y.altInput.required=y.input.required;y.altInput.tabIndex=y.input.tabIndex;y.altInput.type="text";y.input.setAttribute("type","hidden");!y.config.static&&y.input.parentNode&&y.input.parentNode.insertBefore(y.altInput,y.input.nextSibling)}y.config.allowInput||y._input.setAttribute("readonly","readonly");y._positionElement=y.config.positionElement||y._input}function Re(){var e=y.config.enableTime?y.config.noCalendar?"time":"datetime-local":"date";y.mobileInput=u("input",y.input.className+" flatpickr-mobile");y.mobileInput.tabIndex=1;y.mobileInput.type=e;y.mobileInput.disabled=y.input.disabled;y.mobileInput.required=y.input.required;y.mobileInput.placeholder=y.input.placeholder;y.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S";y.selectedDates.length>0&&(y.mobileInput.defaultValue=y.mobileInput.value=y.formatDate(y.selectedDates[0],y.mobileFormatStr));y.config.minDate&&(y.mobileInput.min=y.formatDate(y.config.minDate,"Y-m-d"));y.config.maxDate&&(y.mobileInput.max=y.formatDate(y.config.maxDate,"Y-m-d"));y.input.getAttribute("step")&&(y.mobileInput.step=String(y.input.getAttribute("step")));y.input.type="hidden";void 0!==y.altInput&&(y.altInput.type="hidden");try{y.input.parentNode&&y.input.parentNode.insertBefore(y.mobileInput,y.input.nextSibling)}catch(e){}P(y.mobileInput,"change",(function(e){y.setDate(p(e).value,false,y.mobileFormatStr);Fe("onChange");Fe("onClose")}))}function Pe(e){if(true===y.isOpen)return y.close();y.open(e)}function Fe(e,t){if(void 0===y.config)return;var n=y.config[e];if(void 0!==n&&n.length>0)for(var i=0;n[i]&&i<n.length;i++)n[i](y.selectedDates,y.input.value,y,t);if("onChange"===e){y.input.dispatchEvent(Le("change"));y.input.dispatchEvent(Le("input"))}}function Le(e){var t=document.createEvent("Event");t.initEvent(e,true,true);return t}function He(e){for(var t=0;t<y.selectedDates.length;t++)if(0===_(y.selectedDates[t],e))return""+t;return false}function We(e){if("range"!==y.config.mode||y.selectedDates.length<2)return false;return _(e,y.selectedDates[0])>=0&&_(e,y.selectedDates[1])<=0}function ze(){if(y.config.noCalendar||y.isMobile||!y.monthNav)return;y.yearElements.forEach((function(e,t){var n=new Date(y.currentYear,y.currentMonth,1);n.setMonth(y.currentMonth+t);y.config.showMonths>1||"static"===y.config.monthSelectorType?y.monthElements[t].textContent=m(n.getMonth(),y.config.shorthandCurrentMonth,y.l10n)+" ":y.monthsDropdownContainer.value=n.getMonth().toString();e.value=n.getFullYear().toString()}));y._hidePrevMonthArrow=void 0!==y.config.minDate&&(y.currentYear===y.config.minDate.getFullYear()?y.currentMonth<=y.config.minDate.getMonth():y.currentYear<y.config.minDate.getFullYear());y._hideNextMonthArrow=void 0!==y.config.maxDate&&(y.currentYear===y.config.maxDate.getFullYear()?y.currentMonth+1>y.config.maxDate.getMonth():y.currentYear>y.config.maxDate.getFullYear())}function $e(e){return y.selectedDates.map((function(t){return y.formatDate(t,e)})).filter((function(e,t,n){return"range"!==y.config.mode||y.config.enableTime||n.indexOf(e)===t})).join("range"!==y.config.mode?y.config.conjunction:y.l10n.rangeSeparator)}function Ue(e){void 0===e&&(e=true);void 0!==y.mobileInput&&y.mobileFormatStr&&(y.mobileInput.value=void 0!==y.latestSelectedDateObj?y.formatDate(y.latestSelectedDateObj,y.mobileFormatStr):"");y.input.value=$e(y.config.dateFormat);void 0!==y.altInput&&(y.altInput.value=$e(y.config.altFormat));false!==e&&Fe("onValueUpdate")}function Ye(e){var t=p(e);var n=y.prevMonthNav.contains(t);var i=y.nextMonthNav.contains(t);n||i?se(n?-1:1):y.yearElements.indexOf(t)>=0?t.select():t.classList.contains("arrowUp")?y.changeYear(y.currentYear+1):t.classList.contains("arrowDown")&&y.changeYear(y.currentYear-1)}function Ke(e){e.preventDefault();var t="keydown"===e.type,n=p(e),i=n;void 0!==y.amPM&&n===y.amPM&&(y.amPM.textContent=y.l10n.amPM[o(y.amPM.textContent===y.l10n.amPM[0])]);var a=parseFloat(i.getAttribute("min")),s=parseFloat(i.getAttribute("max")),l=parseFloat(i.getAttribute("step")),c=parseInt(i.value,10),u=e.delta||(t?38===e.which?1:-1:0);var d=c+l*u;if("undefined"!==typeof i.value&&2===i.value.length){var f=i===y.hourElement,h=i===y.minuteElement;if(d<a){d=s+d+o(!f)+(o(f)&&o(!y.amPM));h&&z(void 0,-1,y.hourElement)}else if(d>s){d=i===y.hourElement?d-s-o(!y.amPM):a;h&&z(void 0,1,y.hourElement)}y.amPM&&f&&(1===l?d+c===23:Math.abs(d-c)>l)&&(y.amPM.textContent=y.l10n.amPM[o(y.amPM.textContent===y.l10n.amPM[0])]);i.value=r(d)}}T();return y}function T(e,t){var n=Array.prototype.slice.call(e).filter((function(e){return e instanceof HTMLElement}));var i=[];for(var a=0;a<n.length;a++){var r=n[a];try{if(null!==r.getAttribute("data-fp-omit"))continue;if(void 0!==r._flatpickr){r._flatpickr.destroy();r._flatpickr=void 0}r._flatpickr=E(r,t||{});i.push(r._flatpickr)}catch(e){console.error(e)}}return 1===i.length?i[0]:i}if("undefined"!==typeof HTMLElement&&"undefined"!==typeof HTMLCollection&&"undefined"!==typeof NodeList){HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return T(this,e)};HTMLElement.prototype.flatpickr=function(e){return T([this],e)}}var S=function(e,t){return"string"===typeof e?T(window.document.querySelectorAll(e),t):e instanceof Node?T([e],t):T(e,t)};S.defaultConfig={};S.l10ns={en:e({},a),default:e({},a)};S.localize=function(t){S.l10ns.default=e(e({},S.l10ns.default),t)};S.setDefaults=function(t){S.defaultConfig=e(e({},S.defaultConfig),t)};S.parseDate=x({});S.formatDate=w({});S.compareDates=_;"undefined"!==typeof jQuery&&"undefined"!==typeof jQuery.fn&&(jQuery.fn.flatpickr=function(e){return T(this,e)});Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"===typeof e?parseInt(e,10):e))};"undefined"!==typeof window&&(window.flatpickr=S);return S}))},4841:e=>{var t=function(e){"use strict";var t=Object.prototype;var n=t.hasOwnProperty;var i=Object.defineProperty||function(e,t,n){e[t]=n.value};var a;var r="function"===typeof Symbol?Symbol:{};var o=r.iterator||"@@iterator";var s=r.asyncIterator||"@@asyncIterator";var l=r.toStringTag||"@@toStringTag";function c(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true});return e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var r=t&&t.prototype instanceof v?t:v;var o=Object.create(r.prototype);var s=new j(a||[]);i(o,"_invoke",{value:M(e,n,s)});return o}e.wrap=u;function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}var f="suspendedStart";var h="suspendedYield";var p="executing";var g="completed";var m={};function v(){}function b(){}function y(){}var w={};c(w,o,(function(){return this}));var x=Object.getPrototypeOf;var _=x&&x(x(D([])));_&&_!==t&&n.call(_,o)&&(w=_);var k=y.prototype=v.prototype=Object.create(w);b.prototype=y;i(k,"constructor",{value:y,configurable:true});i(y,"constructor",{value:b,configurable:true});b.displayName=c(y,l,"GeneratorFunction");function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))};e.mark=function(e){if(Object.setPrototypeOf)Object.setPrototypeOf(e,y);else{e.__proto__=y;c(e,l,"GeneratorFunction")}e.prototype=Object.create(k);return e};e.awrap=function(e){return{__await:e}};function A(e,t){function a(i,r,o,s){var l=d(e[i],e,r);if("throw"!==l.type){var c=l.arg;var u=c.value;if(u&&"object"===typeof u&&n.call(u,"__await"))return t.resolve(u.__await).then((function(e){a("next",e,o,s)}),(function(e){a("throw",e,o,s)}));return t.resolve(u).then((function(e){c.value=e;o(c)}),(function(e){return a("throw",e,o,s)}))}s(l.arg)}var r;function o(e,n){function i(){return new t((function(t,i){a(e,n,t,i)}))}return r=r?r.then(i,i):i()}i(this,"_invoke",{value:o})}C(A.prototype);c(A.prototype,s,(function(){return this}));e.AsyncIterator=A;e.async=function(t,n,i,a,r){void 0===r&&(r=Promise);var o=new A(u(t,n,i,a),r);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))};function M(e,t,n){var i=f;return function a(r,o){if(i===p)throw new Error("Generator is already running");if(i===g){if("throw"===r)throw o;return I()}n.method=r;n.arg=o;while(true){var s=n.delegate;if(s){var l=E(s,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f){i=g;throw n.arg}n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var c=d(e,t,n);if("normal"===c.type){i=n.done?g:h;if(c.arg===m)continue;return{value:c.arg,done:n.done}}if("throw"===c.type){i=g;n.method="throw";n.arg=c.arg}}}}function E(e,t){var n=t.method;var i=e.iterator[n];if(i===a){t.delegate=null;if("throw"===n&&e.iterator["return"]){t.method="return";t.arg=a;E(e,t);if("throw"===t.method)return m}if("return"!==n){t.method="throw";t.arg=new TypeError("The iterator does not provide a '"+n+"' method")}return m}var r=d(i,e.iterator,t.arg);if("throw"===r.type){t.method="throw";t.arg=r.arg;t.delegate=null;return m}var o=r.arg;if(!o){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return m}if(!o.done)return o;t[e.resultName]=o.value;t.next=e.nextLoc;if("return"!==t.method){t.method="next";t.arg=a}t.delegate=null;return m}C(k);c(k,l,"Generator");c(k,o,(function(){return this}));c(k,"toString",(function(){return"[object Generator]"}));function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]);if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(T,this);this.reset(true)}e.keys=function(e){var t=Object(e);var n=[];for(var i in t)n.push(i);n.reverse();return function e(){while(n.length){var i=n.pop();if(i in t){e.value=i;e.done=false;return e}}e.done=true;return e}};function D(e){if(e||""===e){var t=e[o];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){while(++i<e.length)if(n.call(e,i)){t.value=e[i];t.done=false;return t}t.value=a;t.done=true;return t};return r.next=r}}throw new TypeError(typeof e+" is not iterable")}e.values=D;function I(){return{value:a,done:true}}j.prototype={constructor:j,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=a;this.done=false;this.delegate=null;this.method="next";this.arg=a;this.tryEntries.forEach(S);if(!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=a)},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){s.type="throw";s.arg=e;t.next=n;if(i){t.method="next";t.arg=a}return!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];var s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc");var c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,true);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,true)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};o.type=e;o.arg=t;if(r){this.method="next";this.next=r.finallyLoc;return m}return this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;if("break"===e.type||"continue"===e.type)this.next=e.arg;else if("return"===e.type){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else"normal"===e.type&&t&&(this.next=t);return m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e){this.complete(n.completion,n.afterLoc);S(n);return m}}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){this.delegate={iterator:D(e),resultName:t,nextLoc:n};"next"===this.method&&(this.arg=a);return m}};return e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},3999:e=>{e.exports="/* eslint-disable */\nBaseKit = {\n    Util: {},\n    Widget: {},\n    Globals: {\n        Components: {},\n    },\n    Static: {},\n    Panels: {},\n    Settings: {},\n    siteLibraryProvider: function () {\n        return window.parent;\n    }\n};\n\nif (typeof Marionette !== 'undefined') {\n    BaseKit.App = new Marionette.Application();\n}\n\nBaseKit.Util.extend = function (plugin, methods) {\n    if (typeof bk$ === 'object') {\n        bk$.extend(true, plugin.prototype, methods);\n    } else {\n        $.extend(true, plugin.prototype, methods);\n    }\n};\n\n\nBaseKit.Util.handleMobileWebkit = function ($selector) {\n    var ua = navigator.userAgent,\n    isAndroidChrome = new RegExp(\" AppleWebKit/\").test(ua) && new RegExp(\" Android\").test(ua) && new RegExp(\" Mobile\").test(ua),\n    isWebKitMobile = new RegExp(\" AppleWebKit/\").test(ua) && new RegExp(\" Mobile/\").test(ua);\n\n    if (!isWebKitMobile && !isAndroidChrome) {\n        return;\n    }\n    $selector.addClass('mobile-webkit');\n};\n\nBaseKit.Util.expandException = function (exception) {\n    var error = null,\n        prop = null,\n        expanded = \"\";\n\n    for (prop in exception) {\n        if (exception.hasOwnProperty(prop)) {\n            expanded += \"property: \" + prop + \" value: [\" + exception[prop] + \"]\\n\";\n        }\n    }\n\n    expanded += \" value: [\" + exception.toString() + \"]\";\n\n    return expanded;\n};\n\n/**\n * BaseKit.Util.waitsFor: function to wait for a positive reuslt to move on.\n * If a true boolean (===) is received, then the success function is called.\n * If a any other value is received, we wait for 10MS then call the funciton again.\n * If the accumulative interval is greater than the timeout (user defined),\n * we assume that the testing method has failed and we call the callbackFail function\n * @param <function> testMethod - Test method that is called every 10ms.\n * @param <integer> timeoutMS - time in milliseconds to continue testing\n * @param <function> callbackSuccess - function to call when test method returns true\n * @param <function> callbackFail - function to call when timeout runs out.\n * @returns <boolean> This should return true on success.\n */\nBaseKit.Util.debug = false;\nBaseKit.Util.waitsFor = function (testMethod, callbackSuccess, callbackFail, timeoutMS) {\n    // RH: Because the interval adds the 10\n    // the first time around being clock to 0.\n    var clock = -10,\n        intervalPeriod = 10,\n        interval = null,\n        result = false;\n\n    if (typeof testMethod !== 'function') {\n        if (BaseKit.Util.debug === true) {\n            console.log('-> typeof testMethod: ' + typeof testMethod);\n        }\n\n        throw new Error('waitsFor: testMethod is not a function');\n    }\n\n    if (typeof timeoutMS !== 'number' || timeoutMS <= 10 || timeoutMS > 90000) {\n        if (BaseKit.Util.debug === true) {\n            console.log('-> typeof timeoutMS: ' + typeof timeoutMS);\n            console.log('-> range[10ms-90000ms] timeoutMS: ' + timeoutMS);\n        }\n\n        throw new Error('waitsFor: timeoutMS is not valid; range[10ms-90000ms]');\n    }\n\n    if (typeof callbackSuccess !== 'function') {\n        if (BaseKit.Util.debug === true) {\n            console.log('-> typeof callbackSuccess: ' + typeof callbackSuccess);\n        }\n\n        throw new Error('waitsFor: callbackSuccess is not a function');\n    }\n\n    if (typeof callbackFail !== 'function') {\n        if (BaseKit.Util.debug === true) {\n            console.log('-> typeof callbackFail: ' + typeof callbackSuccess);\n        }\n\n        throw new Error('waitsFor: callbackFail is not a function');\n    }\n\n    // RH: Set the interval up\n    interval = setInterval(function () {\n        clock += intervalPeriod;\n\n        if (clock >= timeoutMS) {\n            // RH: Stop testing\n            clearInterval(interval);\n\n            if (BaseKit.Util.debug === true) {\n                console.log('timeout exceeded after: ' + clock + 'ms >=' + timeoutMS + 'ms');\n            }\n\n            // RH: Call the callback fail function\n            return callbackFail();\n        }\n\n        try {\n            result = testMethod();\n\n            if (BaseKit.Util.debug === true) {\n                console.log('test called; result = ' + result);\n            }\n\n        } catch (exception) {\n            if (BaseKit.Util.debug === true) {\n                console.log('test crashed after ' + clock + 'ms');\n            }\n\n            // RH: erh... something went wrong in the test method.\n            // Bomb and return back an Error.\n            clearInterval(interval);\n\n            result = false;\n\n            throw new Error(\"waitsFor: testMethod bombed!\\n\" + BaseKit.Util.expandException(exception));\n        }\n\n        if (result === true) {\n            if (BaseKit.Util.debug === true) {\n                console.log('test returned succeeded after: ' + clock + 'ms');\n            }\n\n            // RH: Stop testing\n            clearInterval(interval);\n\n            return callbackSuccess();\n        }\n\n        return true;\n\n    }, intervalPeriod);\n};\n\n/*\n * This changes widget name to the title case format\n */\nBaseKit.Util.toWidgetTitleCase = function (hello) {\n    return hello.replace('.', ' ').replace(/\\w\\S*/g, function (txt) {\n        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n    }).replace(' ', '.');\n};\n\nBaseKit.Util.strToCamelCase = function (str) {\n    return str.replace(/(\\.[a-z])/g, function (txt) {\n        return txt.toUpperCase().replace('.', '');\n    });\n};\n\n/*\n * PHP Date Time for JS\n */\n(function() {\n\n    Date.shortMonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    Date.longMonths = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n    Date.shortDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    Date.longDays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n\n    // defining patterns\n    var replaceChars = {\n        // Day\n        d: function() { return (this.getDate() < 10 ? '0' : '') + this.getDate(); },\n        D: function() { return Date.shortDays[this.getDay()]; },\n        j: function() { return this.getDate(); },\n        l: function() { return Date.longDays[this.getDay()]; },\n        N: function() { return (this.getDay() === 0 ? 7 : this.getDay()); },\n        S: function() { return (this.getDate() % 10 === 1 && this.getDate() !== 11 ? 'st' : (this.getDate() % 10 === 2 && this.getDate() !== 12 ? 'nd' : (this.getDate() % 10 === 3 && this.getDate() !== 13 ? 'rd' : 'th'))); },\n        w: function() { return this.getDay(); },\n        z: function() { var d = new Date(this.getFullYear(),0,1); return Math.ceil((this - d) / 86400000); }, // Fixed now\n        // Week\n        W: function() {\n            var target = new Date(this.valueOf());\n            var dayNr = (this.getDay() + 6) % 7;\n            target.setDate(target.getDate() - dayNr + 3);\n            var firstThursday = target.valueOf();\n            target.setMonth(0, 1);\n            if (target.getDay() !== 4) {\n                target.setMonth(0, 1 + ((4 - target.getDay()) + 7) % 7);\n            }\n            return 1 + Math.ceil((firstThursday - target) / 604800000);\n        },\n        // Month\n        F: function() { return Date.longMonths[this.getMonth()]; },\n        m: function() { return (this.getMonth() < 9 ? '0' : '') + (this.getMonth() + 1); },\n        M: function() { return Date.shortMonths[this.getMonth()]; },\n        n: function() { return this.getMonth() + 1; },\n        t: function() { var d = new Date(); return new Date(d.getFullYear(), d.getMonth(), 0).getDate() }, // Fixed now, gets #days of date\n        // Year\n        L: function() { var year = this.getFullYear(); return (year % 400 === 0 || (year % 100 !== 0 && year % 4 === 0)); },   // Fixed now\n        o: function() { var d  = new Date(this.valueOf());  d.setDate(d.getDate() - ((this.getDay() + 6) % 7) + 3); return d.getFullYear();}, //Fixed now\n        Y: function() { return this.getFullYear(); },\n        y: function() { return ('' + this.getFullYear()).substr(2); },\n        // Time\n        a: function() { return this.getHours() < 12 ? 'am' : 'pm'; },\n        A: function() { return this.getHours() < 12 ? 'AM' : 'PM'; },\n        B: function() { return Math.floor((((this.getUTCHours() + 1) % 24) + this.getUTCMinutes() / 60 + this.getUTCSeconds() / 3600) * 1000 / 24); }, // Fixed now\n        g: function() { return this.getHours() % 12 || 12; },\n        G: function() { return this.getHours(); },\n        h: function() { return ((this.getHours() % 12 || 12) < 10 ? '0' : '') + (this.getHours() % 12 || 12); },\n        H: function() { return (this.getHours() < 10 ? '0' : '') + this.getHours(); },\n        i: function() { return (this.getMinutes() < 10 ? '0' : '') + this.getMinutes(); },\n        s: function() { return (this.getSeconds() < 10 ? '0' : '') + this.getSeconds(); },\n        u: function() { var m = this.getMilliseconds(); return (m < 10 ? '00' : (m < 100 ?\n    '0' : '')) + m; },\n        // Timezone\n        e: function() { return \"Not Yet Supported\"; },\n        I: function() {\n            var DST = null;\n                for (var i = 0; i < 12; i += 1) {\n                        var d = new Date(this.getFullYear(), i, 1);\n                        var offset = d.getTimezoneOffset();\n\n                        if (DST === null) { DST = offset ;}\n                        else if (offset < DST) { DST = offset; break; }\n                        else if (offset > DST) { break; }\n                }\n                return (this.getTimezoneOffset() === DST) | 0;\n            },\n        O: function() { return (-this.getTimezoneOffset() < 0 ? '-' : '+') + (Math.abs(this.getTimezoneOffset() / 60) < 10 ? '0' : '') + (Math.abs(this.getTimezoneOffset() / 60)) + '00'; },\n        P: function() { return (-this.getTimezoneOffset() < 0 ? '-' : '+') + (Math.abs(this.getTimezoneOffset() / 60) < 10 ? '0' : '') + (Math.abs(this.getTimezoneOffset() / 60)) + ':00'; }, // Fixed now\n        T: function() { return this.toTimeString().replace(/^.+ \\(?([^\\)]+)\\)?$/, '$1'); },\n        Z: function() { return -this.getTimezoneOffset() * 60; },\n        // Full Date/Time\n        c: function() { return this.format(\"Y-m-d\\\\TH:i:sP\"); }, // Fixed now\n        r: function() { return this.toString(); },\n        U: function() { return this.getTime() / 1000; }\n    };\n\n    // Simulates PHP's date function\n    Date.prototype.format = function(format) {\n        var date = this;\n        return format.replace(/(\\\\?)(.)/g, function(_, esc, chr) {\n            return (esc === '' && replaceChars[chr]) ? replaceChars[chr].call(date) : chr;\n        });\n    };\n\n}).call(this);\n"},2258:e=>{e.exports="const templatesToProxy = window.twig.templates;\n\nconst proxyTemplatesObjectHandler = {\n    get(target, prop) {\n        if (prop.endsWith('.twig')) {\n            return target[prop];\n        }\n\n        return target[`${prop}.twig`];\n    },\n};\n\n// eslint-disable-next-line no-multi-assign\nwindow.Twig.templates = window.twig.templates = new Proxy(templatesToProxy, proxyTemplatesObjectHandler);\n"},9437:e=>{e.exports="(function () {\n    bk$ = $;\n}());\n"},3205:e=>{e.exports='/* Onsi Fakhouri <onsijoe@gmail.com>\n * backbone.cocktail v0.5.8\n * https://github.com/onsi/cocktail/\n MIT License\n Copyright (c) 2012 Onsi Fakhouri\n\n Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"),\n to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,\n and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n!function(a){"function"==typeof require&&"undefined"!=typeof module&&module.exports?module.exports=a(require("underscore")):"function"==typeof define?define(["underscore"],a):this.Cocktail=a(_)}(function(a){var b={};b.mixins={},b.mixin=function(c){var d=a.chain(arguments).toArray().rest().flatten().value(),e=c.prototype||c,f={};return a(d).each(function(c){a.isString(c)&&(c=b.mixins[c]),a(c).each(function(b,c){if(a.isFunction(b)){if(e[c]===b)return;e[c]&&(f[c]=f.hasOwnProperty(c)?f[c]:[e[c]],f[c].push(b)),e[c]=b}else a.isArray(b)?e[c]=a.union(b,e[c]||[]):a.isObject(b)?e[c]=a.extend({},b,e[c]||{}):c in e||(e[c]=b)})}),a(f).each(function(b,c){e[c]=function(){var c,d=this,e=arguments;return a(b).each(function(b){var f=a.isFunction(b)?b.apply(d,e):b;c="undefined"==typeof f?c:f}),c}}),c};var c;return b.patch=function(d){c=d.Model.extend;var e=function(a,d){var e=c.call(this,a,d),f=e.prototype.mixins;return f&&e.prototype.hasOwnProperty("mixins")&&b.mixin(e,f),e};a([d.Model,d.Collection,d.Router,d.View]).each(function(c){c.mixin=function(){b.mixin(this,a.toArray(arguments))},c.extend=e})},b.unpatch=function(b){a([b.Model,b.Collection,b.Router,b.View]).each(function(a){a.mixin=void 0,a.extend=c})},b});\n'},4290:e=>{e.exports='/* Copyright (c) 2010-2016 Jeremy Ashkenas, DocumentCloud\r\rPermission is hereby granted, free of charge, to any person\robtaining a copy of this software and associated documentation\rfiles (the "Software"), to deal in the Software without\rrestriction, including without limitation the rights to use,\r    copy, modify, merge, publish, distribute, sublicense, and/or sell\r    copies of the Software, and to permit persons to whom the\r    Software is furnished to do so, subject to the following\r    conditions:\r\r    The above copyright notice and this permission notice shall be\r    included in all copies or substantial portions of the Software.\r\r    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\r    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\r    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\r    OTHER DEALINGS IN THE SOFTWARE. */\r(function(t,e){if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(i,r,s){t.Backbone=e(t,s,i,r)})}else if(typeof exports!=="undefined"){var i=require("underscore"),r;try{r=require("jquery")}catch(s){}e(t,exports,i,r)}else{t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}})(this,function(t,e,i,r){var s=t.Backbone;var n=[];var a=n.push;var o=n.slice;var h=n.splice;e.VERSION="1.1.1";e.$=r;e.noConflict=function(){t.Backbone=s;return this};e.emulateHTTP=false;e.emulateJSON=false;var u=e.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);r.push({callback:e,context:i,ctx:i||this});return this},once:function(t,e,r){if(!c(this,"once",t,[e,r])||!e)return this;var s=this;var n=i.once(function(){s.off(t,n);e.apply(this,arguments)});n._callback=e;return this.on(t,n,r)},off:function(t,e,r){var s,n,a,o,h,u,l,f;if(!this._events||!c(this,"off",t,[e,r]))return this;if(!t&&!e&&!r){this._events=void 0;return this}o=t?[t]:i.keys(this._events);for(h=0,u=o.length;h<u;h++){t=o[h];if(a=this._events[t]){this._events[t]=s=[];if(e||r){for(l=0,f=a.length;l<f;l++){n=a[l];if(e&&e!==n.callback&&e!==n.callback._callback||r&&r!==n.context){s.push(n)}}}if(!s.length)delete this._events[t]}}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t];var r=this._events.all;if(i)f(i,e);if(r)f(r,arguments);return this},stopListening:function(t,e,r){var s=this._listeningTo;if(!s)return this;var n=!e&&!r;if(!r&&typeof e==="object")r=this;if(t)(s={})[t._listenId]=t;for(var a in s){t=s[a];t.off(e,r,this);if(n||i.isEmpty(t._events))delete this._listeningTo[a]}return this}};var l=/\\s+/;var c=function(t,e,i,r){if(!i)return true;if(typeof i==="object"){for(var s in i){t[e].apply(t,[s,i[s]].concat(r))}return false}if(l.test(i)){var n=i.split(l);for(var a=0,o=n.length;a<o;a++){t[e].apply(t,[n[a]].concat(r))}return false}return true};var f=function(t,e){var i,r=-1,s=t.length,n=e[0],a=e[1],o=e[2];switch(e.length){case 0:while(++r<s)(i=t[r]).callback.call(i.ctx);return;case 1:while(++r<s)(i=t[r]).callback.call(i.ctx,n);return;case 2:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a);return;case 3:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a,o);return;default:while(++r<s)(i=t[r]).callback.apply(i.ctx,e);return}};var d={listenTo:"on",listenToOnce:"once"};i.each(d,function(t,e){u[e]=function(e,r,s){var n=this._listeningTo||(this._listeningTo={});var a=e._listenId||(e._listenId=i.uniqueId("l"));n[a]=e;if(!s&&typeof r==="object")s=this;e[t](r,s,this);return this}});u.bind=u.on;u.unbind=u.off;i.extend(e,u);var p=e.Model=function(t,e){var r=t||{};e||(e={});this.cid=i.uniqueId("c");this.attributes={};if(e.collection)this.collection=e.collection;if(e.parse)r=this.parse(r,e)||{};r=i.defaults({},r,i.result(this,"defaults"));this.set(r,e);this.changed={};this.initialize.apply(this,arguments)};i.extend(p.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return this.get(t)!=null},set:function(t,e,r){var s,n,a,o,h,u,l,c;if(t==null)return this;if(typeof t==="object"){n=t;r=e}else{(n={})[t]=e}r||(r={});if(!this._validate(n,r))return false;a=r.unset;h=r.silent;o=[];u=this._changing;this._changing=true;if(!u){this._previousAttributes=i.clone(this.attributes);this.changed={}}c=this.attributes,l=this._previousAttributes;if(this.idAttribute in n)this.id=n[this.idAttribute];for(s in n){e=n[s];if(!i.isEqual(c[s],e))o.push(s);if(!i.isEqual(l[s],e)){this.changed[s]=e}else{delete this.changed[s]}a?delete c[s]:c[s]=e}if(!h){if(o.length)this._pending=r;for(var f=0,d=o.length;f<d;f++){this.trigger("change:"+o[f],this,c[o[f]],r)}}if(u)return this;if(!h){while(this._pending){r=this._pending;this._pending=false;this.trigger("change",this,r)}}this._pending=false;this._changing=false;return this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:true}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,i.extend({},t,{unset:true}))},hasChanged:function(t){if(t==null)return!i.isEmpty(this.changed);return i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):false;var e,r=false;var s=this._changing?this._previousAttributes:this.attributes;for(var n in t){if(i.isEqual(s[n],e=t[n]))continue;(r||(r={}))[n]=e}return r},previous:function(t){if(t==null||!this._previousAttributes)return null;return this._previousAttributes[t]},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{};if(t.parse===void 0)t.parse=true;var e=this;var r=t.success;t.success=function(i){if(!e.set(e.parse(i,t),t))return false;if(r)r(e,i,t);e.trigger("sync",e,i,t)};M(this,t);return this.sync("read",this,t)},save:function(t,e,r){var s,n,a,o=this.attributes;if(t==null||typeof t==="object"){s=t;r=e}else{(s={})[t]=e}r=i.extend({validate:true},r);if(s&&!r.wait){if(!this.set(s,r))return false}else{if(!this._validate(s,r))return false}if(s&&r.wait){this.attributes=i.extend({},o,s)}if(r.parse===void 0)r.parse=true;var h=this;var u=r.success;r.success=function(t){h.attributes=o;var e=h.parse(t,r);if(r.wait)e=i.extend(s||{},e);if(i.isObject(e)&&!h.set(e,r)){return false}if(u)u(h,t,r);h.trigger("sync",h,t,r)};M(this,r);n=this.isNew()?"create":r.patch?"patch":"update";if(n==="patch")r.attrs=s;a=this.sync(n,this,r);if(s&&r.wait)this.attributes=o;return a},destroy:function(t){t=t?i.clone(t):{};var e=this;var r=t.success;var s=function(){e.trigger("destroy",e,e.collection,t)};t.success=function(i){if(t.wait||e.isNew())s();if(r)r(e,i,t);if(!e.isNew())e.trigger("sync",e,i,t)};if(this.isNew()){t.success();return false}M(this,t);var n=this.sync("delete",this,t);if(!t.wait)s();return n},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||q();if(this.isNew())return t;return t.replace(/([^\\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:true}))},_validate:function(t,e){if(!e.validate||!this.validate)return true;t=i.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;if(!r)return true;this.trigger("invalid",this,r,i.extend(e,{validationError:r}));return false}});var v=["keys","values","pairs","invert","pick","omit"];i.each(v,function(t){p.prototype[t]=function(){var e=o.call(arguments);e.unshift(this.attributes);return i[t].apply(i,e)}});var g=e.Collection=function(t,e){e||(e={});if(e.model)this.model=e.model;if(e.comparator!==void 0)this.comparator=e.comparator;this._reset();this.initialize.apply(this,arguments);if(t)this.reset(t,i.extend({silent:true},e))};var m={add:true,remove:true,merge:true};var y={add:true,remove:false};i.extend(g.prototype,u,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:false},e,y))},remove:function(t,e){var r=!i.isArray(t);t=r?[t]:i.clone(t);e||(e={});var s,n,a,o;for(s=0,n=t.length;s<n;s++){o=t[s]=this.get(t[s]);if(!o)continue;delete this._byId[o.id];delete this._byId[o.cid];a=this.indexOf(o);this.models.splice(a,1);this.length--;if(!e.silent){e.index=a;o.trigger("remove",o,this,e)}this._removeReference(o,e)}return r?t[0]:t},set:function(t,e){e=i.defaults({},e,m);if(e.parse)t=this.parse(t,e);var r=!i.isArray(t);t=r?t?[t]:[]:i.clone(t);var s,n,a,o,h,u,l;var c=e.at;var f=this.model;var d=this.comparator&&c==null&&e.sort!==false;var v=i.isString(this.comparator)?this.comparator:null;var g=[],y=[],_={};var b=e.add,w=e.merge,x=e.remove;var E=!d&&b&&x?[]:false;for(s=0,n=t.length;s<n;s++){h=t[s]||{};if(h instanceof p){a=o=h}else{a=h[f.prototype.idAttribute||"id"]}if(u=this.get(a)){if(x)_[u.cid]=true;if(w){h=h===o?o.attributes:h;if(e.parse)h=u.parse(h,e);u.set(h,e);if(d&&!l&&u.hasChanged(v))l=true}t[s]=u}else if(b){o=t[s]=this._prepareModel(h,e);if(!o)continue;g.push(o);this._addReference(o,e)}o=u||o;if(E&&(o.isNew()||!_[o.id]))E.push(o);_[o.id]=true}if(x){for(s=0,n=this.length;s<n;++s){if(!_[(o=this.models[s]).cid])y.push(o)}if(y.length)this.remove(y,e)}if(g.length||E&&E.length){if(d)l=true;this.length+=g.length;if(c!=null){for(s=0,n=g.length;s<n;s++){this.models.splice(c+s,0,g[s])}}else{if(E)this.models.length=0;var k=E||g;for(s=0,n=k.length;s<n;s++){this.models.push(k[s])}}}if(l)this.sort({silent:true});if(!e.silent){for(s=0,n=g.length;s<n;s++){(o=g[s]).trigger("add",o,this,e)}if(l||E&&E.length)this.trigger("sort",this,e)}return r?t[0]:t},reset:function(t,e){e||(e={});for(var r=0,s=this.models.length;r<s;r++){this._removeReference(this.models[r],e)}e.previousModels=this.models;this._reset();t=this.add(t,i.extend({silent:true},e));if(!e.silent)this.trigger("reset",this,e);return t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);this.remove(e,t);return e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);this.remove(e,t);return e},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(t==null)return void 0;return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){if(i.isEmpty(t))return e?void 0:[];return this[e?"find":"filter"](function(e){for(var i in t){if(t[i]!==e.get(i))return false}return true})},findWhere:function(t){return this.where(t,true)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");t||(t={});if(i.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(i.bind(this.comparator,this))}if(!t.silent)this.trigger("sort",this,t);return this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{};if(t.parse===void 0)t.parse=true;var e=t.success;var r=this;t.success=function(i){var s=t.reset?"reset":"set";r[s](i,t);if(e)e(r,i,t);r.trigger("sync",r,i,t)};M(this,t);return this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};if(!(t=this._prepareModel(t,e)))return false;if(!e.wait)this.add(t,e);var r=this;var s=e.success;e.success=function(t,i){if(e.wait)r.add(t,e);if(s)s(t,i,e)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t;e=e?i.clone(e):{};e.collection=this;var r=new this.model(t,e);if(!r.validationError)return r;this.trigger("invalid",this,r.validationError,e);return false},_addReference:function(t,e){this._byId[t.cid]=t;if(t.id!=null)this._byId[t.id]=t;if(!t.collection)t.collection=this;t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){if(this===t.collection)delete t.collection;t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){if((t==="add"||t==="remove")&&i!==this)return;if(t==="destroy")this.remove(e,r);if(e&&t==="change:"+e.idAttribute){delete this._byId[e.previous(e.idAttribute)];if(e.id!=null)this._byId[e.id]=e}this.trigger.apply(this,arguments)}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(_,function(t){g.prototype[t]=function(){var e=o.call(arguments);e.unshift(this.models);return i[t].apply(i,e)}});var b=["groupBy","countBy","sortBy","indexBy"];i.each(b,function(t){g.prototype[t]=function(e,r){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,r)}});var w=e.View=function(t){this.cid=i.uniqueId("view");t||(t={});i.extend(this,i.pick(t,E));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var x=/^(\\S+)\\s*(.*)$/;var E=["model","collection","el","id","attributes","className","tagName","events"];i.extend(w.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(t,i){if(this.$el)this.undelegateEvents();this.$el=t instanceof e.$?t:e.$(t);this.el=this.$el[0];if(i!==false)this.delegateEvents();return this},delegateEvents:function(t){if(!(t||(t=i.result(this,"events"))))return this;this.undelegateEvents();for(var e in t){var r=t[e];if(!i.isFunction(r))r=this[t[e]];if(!r)continue;var s=e.match(x);var n=s[1],a=s[2];r=i.bind(r,this);n+=".delegateEvents"+this.cid;if(a===""){this.$el.on(n,r)}else{this.$el.on(n,a,r)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(!this.el){var t=i.extend({},i.result(this,"attributes"));if(this.id)t.id=i.result(this,"id");if(this.className)t["class"]=i.result(this,"className");var r=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(r,false)}else{this.setElement(i.result(this,"el"),false)}}});e.sync=function(t,r,s){var n=T[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:n,dataType:"json"};if(!s.url){a.url=i.result(r,"url")||q()}if(s.data==null&&r&&(t==="create"||t==="update"||t==="patch")){a.contentType="application/json";a.data=JSON.stringify(s.attrs||r.toJSON(s))}if(s.emulateJSON){a.contentType="application/x-www-form-urlencoded";a.data=a.data?{model:a.data}:{}}if(s.emulateHTTP&&(n==="PUT"||n==="DELETE"||n==="PATCH")){a.type="POST";if(s.emulateJSON)a.data._method=n;var o=s.beforeSend;s.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",n);if(o)return o.apply(this,arguments)}}if(a.type!=="GET"&&!s.emulateJSON){a.processData=false}if(a.type==="PATCH"&&k){a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var h=s.xhr=e.ajax(i.extend(a,s));r.trigger("request",r,h,s);return h};var k=typeof window!=="undefined"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var $=e.Router=function(t){t||(t={});if(t.routes)this.routes=t.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var S=/\\((.*?)\\)/g;var H=/(\\(\\?)?:\\w+/g;var A=/\\*\\w+/g;var I=/[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;i.extend($.prototype,u,{initialize:function(){},route:function(t,r,s){if(!i.isRegExp(t))t=this._routeToRegExp(t);if(i.isFunction(r)){s=r;r=""}if(!s)s=this[r];var n=this;e.history.route(t,function(i){var a=n._extractParameters(t,i);n.execute(s,a);n.trigger.apply(n,["route:"+r].concat(a));n.trigger("route",r,a);e.history.trigger("route",n,r,a)});return this},execute:function(t,e){if(t)t.apply(this,e)},navigate:function(t,i){e.history.navigate(t,i);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=i.result(this,"routes");var t,e=i.keys(this.routes);while((t=e.pop())!=null){this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(I,"\\\\$&").replace(S,"(?:$1)?").replace(H,function(t,e){return e?t:"([^/?]+)"}).replace(A,"([^?]*?)");return new RegExp("^"+t+"(?:\\\\?(.*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return i.map(r,function(t,e){if(e===r.length-1)return t||null;return t?decodeURIComponent(t):null})}});var N=e.History=function(){this.handlers=[];i.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var R=/^[#\\/]|\\s+$/g;var O=/^\\/+|\\/+$/g;var P=/msie [\\w.]+/;var j=/\\/$/;var C=/#.*$/;N.started=false;i.extend(N.prototype,u,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(t==null){if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(j,"");if(!t.indexOf(i))t=t.slice(i.length)}else{t=this.getHash()}}return t.replace(R,"")},start:function(t){if(N.started)throw new Error("Backbone.history has already been started");N.started=true;this.options=i.extend({root:"/"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment();var s=document.documentMode;var n=P.exec(navigator.userAgent.toLowerCase())&&(!s||s<=7);this.root=("/"+this.root+"/").replace(O,"/");if(n&&this._wantsHashChange){var a=e.$(\'<iframe src="javascript:0" tabindex="-1">\');this.iframe=a.hide().appendTo("body")[0].contentWindow;this.navigate(r)}if(this._hasPushState){e.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!n){e.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=r;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){this.fragment=this.getFragment(null,true);this.location.replace(this.root+"#"+this.fragment);return true}else if(this._hasPushState&&this.atRoot()&&o.hash){this.fragment=this.getHash().replace(R,"");this.history.replaceState({},document.title,this.root+this.fragment)}}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);N.started=false},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe){e=this.getFragment(this.getHash(this.iframe))}if(e===this.fragment)return false;if(this.iframe)this.navigate(e);this.loadUrl()},loadUrl:function(t){t=this.fragment=this.getFragment(t);return i.any(this.handlers,function(e){if(e.route.test(t)){e.callback(t);return true}})},navigate:function(t,e){if(!N.started)return false;if(!e||e===true)e={trigger:!!e};var i=this.root+(t=this.getFragment(t||""));t=t.replace(C,"");if(this.fragment===t)return;this.fragment=t;if(t===""&&i!=="/")i=i.slice(0,-1);if(this._hasPushState){this.history[e.replace?"replaceState":"pushState"]({},document.title,i)}else if(this._wantsHashChange){this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getFragment(this.getHash(this.iframe))){if(!e.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,t,e.replace)}}else{return this.location.assign(i)}if(e.trigger)return this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else{t.hash="#"+e}}});e.history=new N;var U=function(t,e){var r=this;var s;if(t&&i.has(t,"constructor")){s=t.constructor}else{s=function(){return r.apply(this,arguments)}}i.extend(s,r,e);var n=function(){this.constructor=s};n.prototype=r.prototype;s.prototype=new n;if(t)i.extend(s.prototype,t);s.__super__=r.prototype;return s};p.extend=g.extend=$.extend=w.extend=N.extend=U;var q=function(){throw new Error(\'A "url" property or function must be specified\')};var M=function(t,e){var i=e.error;e.error=function(r){if(i)i(t,r,e);t.trigger("error",t,r,e)}};return e});\n\r'},2278:e=>{e.exports='/*! jQuery v1.12.4 | (c) jQuery Foundation | jquery.org/license */\n!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="1.12.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,p=/^-ms-/,q=/-([\\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(!l.ownFirst)for(b in a)return k.call(a,b);for(b in a);return void 0===b||k.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(h)return h.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a)?(c=e.call(arguments,2),d=function(){return a.apply(b||this,c.concat(e.call(arguments)))},d.guid=a.guid=a.guid||n.guid++,d):void 0},now:function(){return+new Date},support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\\\x20\\\\t\\\\r\\\\n\\\\f]",M="(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+",N="\\\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:\'((?:\\\\\\\\.|[^\\\\\\\\\'])*)\'|\\"((?:\\\\\\\\.|[^\\\\\\\\\\"])*)\\"|("+M+"))|)"+L+"*\\\\]",O=":("+M+")(?:\\\\(((\'((?:\\\\\\\\.|[^\\\\\\\\\'])*)\'|\\"((?:\\\\\\\\.|[^\\\\\\\\\\"])*)\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|"+N+")*)|.*)\\\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\\\]\'\\"]*?)"+L+"*\\\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\("+L+"*(even|odd|(([+-]|)(\\\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\\\d+)|))"+L+"*\\\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\("+L+"*((?:-\\\\d)?\\\\d*)"+L+"*\\\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\\d$/i,Z=/^[^{]+\\{\\s*\\[native \\w/,$=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,_=/[+~]/,aa=/\'|\\\\/g,ba=new RegExp("\\\\\\\\([\\\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id=\'"+k+"\']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id=\'"+u+"\'></a><select id=\'"+u+"-\\r\\\\\' msallowcapture=\'\'><option selected=\'\'></option></select>",a.querySelectorAll("[msallowcapture^=\'\']").length&&q.push("[*^$]="+L+"*(?:\'\'|\\"\\")"),a.querySelectorAll("[selected]").length||q.push("\\\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!=\'\']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"=\'$1\']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=R.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href=\'#\'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\\w-]+)\\s*\\/?>(?:<\\/\\1>|)$/,y=/^.[^:#\\[\\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;e>b;b++)if(n.contains(d[b],this))return!0}));for(b=0;e>b;b++)n.find(a,d[b],c);return c=this.pushStack(e>1?n.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}if(f=d.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return A.find(a);this.length=1,this[0]=f}return this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(n.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||(e=n.uniqueSort(e)),D.test(a)&&(e=e.reverse())),this.pushStack(e)}});var G=/\\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=!0,c||j.disable(),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.addEventListener?(d.removeEventListener("DOMContentLoaded",K),a.removeEventListener("load",K)):(d.detachEvent("onreadystatechange",K),a.detachEvent("onload",K))}function K(){(d.addEventListener||"load"===a.event.type||"complete"===d.readyState)&&(J(),n.ready())}n.ready.promise=function(b){if(!I)if(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll)a.setTimeout(n.ready);else if(d.addEventListener)d.addEventListener("DOMContentLoaded",K),a.addEventListener("load",K);else{d.attachEvent("onreadystatechange",K),a.attachEvent("onload",K);var c=!1;try{c=null==a.frameElement&&d.documentElement}catch(e){}c&&c.doScroll&&!function f(){if(!n.isReady){try{c.doScroll("left")}catch(b){return a.setTimeout(f,50)}J(),n.ready()}}()}return I.promise(b)},n.ready.promise();var L;for(L in n(l))break;l.ownFirst="0"===L,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c,e;c=d.getElementsByTagName("body")[0],c&&c.style&&(b=d.createElement("div"),e=d.createElement("div"),e.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(e).appendChild(b),"undefined"!=typeof b.style.zoom&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",l.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(e))}),function(){var a=d.createElement("div");l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}a=null}();var M=function(a){var b=n.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b},N=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,O=/([A-Z])/g;function P(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(O,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}n.data(a,b,c)}else c=void 0;\n}return c}function Q(a){var b;for(b in a)if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function R(a,b,d,e){if(M(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),"object"!=typeof b&&"function"!=typeof b||(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[n.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[n.camelCase(b)])):f=g,f}}function S(a,b,c){if(M(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!Q(d):!n.isEmptyObject(d))return}(c||(delete g[h].data,Q(g[h])))&&(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=void 0)}}}n.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?n.cache[a[n.expando]]:a[n.expando],!!a&&!Q(a)},data:function(a,b,c){return R(a,b,c)},removeData:function(a,b){return S(a,b)},_data:function(a,b,c){return R(a,b,c,!0)},_removeData:function(a,b){return S(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=n.data(f),1===f.nodeType&&!n._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));n._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){n.data(this,a)}):arguments.length>1?this.each(function(){n.data(this,a,b)}):f?P(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=n._data(a,b),c&&(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks("once memory").add(function(){n._removeData(a,b+"queue"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=n._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}}),function(){var a;l.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,e;return c=d.getElementsByTagName("body")[0],c&&c.style?(b=d.createElement("div"),e=d.createElement("div"),e.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(e).appendChild(b),"undefined"!=typeof b.style.zoom&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(d.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(e),a):void 0}}();var T=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,U=new RegExp("^(?:([+-])=|)("+T+")([a-z%]*)$","i"),V=["Top","Right","Bottom","Left"],W=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function X(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&U.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var Y=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)Y(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Z=/^(?:checkbox|radio)$/i,$=/<([\\w:-]+)/,_=/^$|\\/(?:java|ecma)script/i,aa=/^\\s+/,ba="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";function ca(a){var b=ba.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}!function(){var a=d.createElement("div"),b=d.createDocumentFragment(),c=d.createElement("input");a.innerHTML="  <link/><table></table><a href=\'/a\'>a</a><input type=\'checkbox\'/>",l.leadingWhitespace=3===a.firstChild.nodeType,l.tbody=!a.getElementsByTagName("tbody").length,l.htmlSerialize=!!a.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==d.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,b.appendChild(c),l.appendChecked=c.checked,a.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue,b.appendChild(a),c=d.createElement("input"),c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),a.appendChild(c),l.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!!a.addEventListener,a[n.expando]=1,l.attributes=!a.getAttribute(n.expando)}();var da={option:[1,"<select multiple=\'multiple\'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};da.optgroup=da.option,da.tbody=da.tfoot=da.colgroup=da.caption=da.thead,da.th=da.td;function ea(a,b){var c,d,e=0,f="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||n.nodeName(d,b)?f.push(d):n.merge(f,ea(d,b));return void 0===b||b&&n.nodeName(a,b)?n.merge([a],f):f}function fa(a,b){for(var c,d=0;null!=(c=a[d]);d++)n._data(c,"globalEval",!b||n._data(b[d],"globalEval"))}var ga=/<|&#?\\w+;/,ha=/<tbody/i;function ia(a){Z.test(a.type)&&(a.defaultChecked=a.checked)}function ja(a,b,c,d,e){for(var f,g,h,i,j,k,m,o=a.length,p=ca(b),q=[],r=0;o>r;r++)if(g=a[r],g||0===g)if("object"===n.type(g))n.merge(q,g.nodeType?[g]:g);else if(ga.test(g)){i=i||p.appendChild(b.createElement("div")),j=($.exec(g)||["",""])[1].toLowerCase(),m=da[j]||da._default,i.innerHTML=m[1]+n.htmlPrefilter(g)+m[2],f=m[0];while(f--)i=i.lastChild;if(!l.leadingWhitespace&&aa.test(g)&&q.push(b.createTextNode(aa.exec(g)[0])),!l.tbody){g="table"!==j||ha.test(g)?"<table>"!==m[1]||ha.test(g)?0:i:i.firstChild,f=g&&g.childNodes.length;while(f--)n.nodeName(k=g.childNodes[f],"tbody")&&!k.childNodes.length&&g.removeChild(k)}n.merge(q,i.childNodes),i.textContent="";while(i.firstChild)i.removeChild(i.firstChild);i=p.lastChild}else q.push(b.createTextNode(g));i&&p.removeChild(i),l.appendChecked||n.grep(ea(q,"input"),ia),r=0;while(g=q[r++])if(d&&n.inArray(g,d)>-1)e&&e.push(g);else if(h=n.contains(g.ownerDocument,g),i=ea(p.appendChild(g),"script"),h&&fa(i),c){f=0;while(g=i[f++])_.test(g.type||"")&&c.push(g)}return i=null,p}!function(){var b,c,e=d.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(l[b]=c in a)||(e.setAttribute(c,"t"),l[b]=e.attributes[c].expando===!1);e=null}();var ka=/^(?:input|select|textarea)$/i,la=/^key/,ma=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,na=/^(?:focusinfocus|focusoutblur)$/,oa=/^([^.]*)(?:\\.(.+)|)/;function pa(){return!0}function qa(){return!1}function ra(){try{return d.activeElement}catch(a){}}function sa(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)sa(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=qa;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return"undefined"==typeof n||a&&n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(G)||[""],h=b.length;while(h--)f=oa.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)&&n._data(a);if(r&&(k=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=oa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]&&new RegExp("(^|\\\\.)"+p.join("\\\\.(?:.*\\\\.|)")+"(\\\\.|$)"),i=f=m.length;while(f--)g=m[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(k)&&(delete r.handle,n._removeData(a,"events"))}},trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(i=m=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!na.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),h=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\\\.)"+r.join("\\\\.(?:.*\\\\.|)")+"(\\\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),l=n.event.special[q]||{},f||!l.trigger||l.trigger.apply(e,c)!==!1)){if(!f&&!l.noBubble&&!n.isWindow(e)){for(j=l.delegateType||q,na.test(j+q)||(i=i.parentNode);i;i=i.parentNode)p.push(i),m=i;m===(e.ownerDocument||d)&&p.push(m.defaultView||m.parentWindow||a)}o=0;while((i=p[o++])&&!b.isPropagationStopped())b.type=o>1?j:l.bindType||q,g=(n._data(i,"events")||{})[b.type]&&n._data(i,"handle"),g&&g.apply(i,c),g=h&&i[h],g&&g.apply&&M(i)&&(b.result=g.apply(i,c),b.result===!1&&b.preventDefault());if(b.type=q,!f&&!b.isDefaultPrevented()&&(!l._default||l._default.apply(p.pop(),c)===!1)&&M(e)&&h&&e[q]&&!n.isWindow(e)){m=e[h],m&&(e[h]=null),n.event.triggered=q;try{e[q]()}catch(s){}n.event.triggered=void 0,m&&(e[h]=m)}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(n._data(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ma.test(f)?this.mouseHooks:la.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=g.srcElement||d),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,h.filter?h.filter(a,g):a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button,h=b.fromElement;return null==a.pageX&&null!=b.clientX&&(e=a.target.ownerDocument||d,f=e.documentElement,c=e.body,a.pageX=b.clientX+(f&&f.scrollLeft||c&&c.scrollLeft||0)-(f&&f.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(f&&f.scrollTop||c&&c.scrollTop||0)-(f&&f.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?b.toElement:h),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ra()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===ra()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return n.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b),d.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=d.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)}:function(a,b,c){var d="on"+b;a.detachEvent&&("undefined"==typeof a[d]&&(a[d]=null),a.detachEvent(d,c))},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?pa:qa):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:qa,isPropagationStopped:qa,isImmediatePropagationStopped:qa,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=pa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=pa,a&&!this.isSimulated&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=pa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||n.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.submit||(n.event.special.submit={setup:function(){return n.nodeName(this,"form")?!1:void n.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=n.nodeName(b,"input")||n.nodeName(b,"button")?n.prop(b,"form"):void 0;c&&!n._data(c,"submit")&&(n.event.add(c,"submit._submit",function(a){a._submitBubble=!0}),n._data(c,"submit",!0))})},postDispatch:function(a){a._submitBubble&&(delete a._submitBubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a))},teardown:function(){return n.nodeName(this,"form")?!1:void n.event.remove(this,"._submit")}}),l.change||(n.event.special.change={setup:function(){return ka.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._justChanged=!0)}),n.event.add(this,"click._change",function(a){this._justChanged&&!a.isTrigger&&(this._justChanged=!1),n.event.simulate("change",this,a)})),!1):void n.event.add(this,"beforeactivate._change",function(a){var b=a.target;ka.test(b.nodeName)&&!n._data(b,"change")&&(n.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a)}),n._data(b,"change",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return n.event.remove(this,"._change"),!ka.test(this.nodeName)}}),l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=n._data(d,b);e||d.addEventListener(a,c,!0),n._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=n._data(d,b)-1;e?n._data(d,b,e):(d.removeEventListener(a,c,!0),n._removeData(d,b))}}}),n.fn.extend({on:function(a,b,c,d){return sa(this,a,b,c,d)},one:function(a,b,c,d){return sa(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=qa),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ta=/ jQuery\\d+="(?:null|\\d+)"/g,ua=new RegExp("<(?:"+ba+")[\\\\s/>]","i"),va=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:-]+)[^>]*)\\/>/gi,wa=/<script|<style|<link/i,xa=/checked\\s*(?:[^=]|=\\s*.checked.)/i,ya=/^true\\/(.*)/,za=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,Aa=ca(d),Ba=Aa.appendChild(d.createElement("div"));function Ca(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function Da(a){return a.type=(null!==n.find.attr(a,"type"))+"/"+a.type,a}function Ea(a){var b=ya.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Fa(a,b){if(1===b.nodeType&&n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)n.event.add(b,c,h[c][d])}g.data&&(g.data=n.extend({},g.data))}}function Ga(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent&&b[n.expando]){e=n._data(b);for(d in e.events)n.removeEvent(b,d,e.handle);b.removeAttribute(n.expando)}"script"===c&&b.text!==a.text?(Da(b).text=a.text,Ea(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),l.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Z.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}}function Ha(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&xa.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),Ha(f,b,c,d)});if(o&&(k=ja(b,a[0].ownerDocument,!1,a,d),e=k.firstChild,1===k.childNodes.length&&(k=e),e||d)){for(i=n.map(ea(k,"script"),Da),h=i.length;o>m;m++)g=k,m!==p&&(g=n.clone(g,!0,!0),h&&n.merge(i,ea(g,"script"))),c.call(a[m],g,m);if(h)for(j=i[i.length-1].ownerDocument,n.map(i,Ea),m=0;h>m;m++)g=i[m],_.test(g.type||"")&&!n._data(g,"globalEval")&&n.contains(j,g)&&(g.src?n._evalUrl&&n._evalUrl(g.src):n.globalEval((g.text||g.textContent||g.innerHTML||"").replace(za,"")));k=e=null}return a}function Ia(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(ea(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&fa(ea(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(va,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!ua.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Ba.innerHTML=a.outerHTML,Ba.removeChild(f=Ba.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(d=ea(f),h=ea(a),g=0;null!=(e=h[g]);++g)d[g]&&Ga(e,d[g]);if(b)if(c)for(h=h||ea(a),d=d||ea(f),g=0;null!=(e=h[g]);g++)Fa(e,d[g]);else Fa(a,f);return d=ea(f,"script"),d.length>0&&fa(d,!i&&ea(a,"script")),d=h=e=null,f},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.attributes,m=n.event.special;null!=(d=a[h]);h++)if((b||M(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle);j[f]&&(delete j[f],k||"undefined"==typeof d.removeAttribute?d[i]=void 0:d.removeAttribute(i),c.push(f))}}}),n.fn.extend({domManip:Ha,detach:function(a){return Ia(this,a,!0)},remove:function(a){return Ia(this,a)},text:function(a){return Y(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||d).createTextNode(a))},null,a,arguments.length)},append:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.appendChild(a)}})},prepend:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&n.cleanData(ea(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&n.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return Y(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(ta,""):void 0;if("string"==typeof a&&!wa.test(a)&&(l.htmlSerialize||!ua.test(a))&&(l.leadingWhitespace||!aa.test(a))&&!da[($.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ea(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ha(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(ea(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=0,e=[],f=n(a),h=f.length-1;h>=d;d++)c=d===h?this:this.clone(!0),n(f[d])[b](c),g.apply(e,c.get());return this.pushStack(e)}});var Ja,Ka={HTML:"block",BODY:"block"};function La(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function Ma(a){var b=d,c=Ka[a];return c||(c=La(a,b),"none"!==c&&c||(Ja=(Ja||n("<iframe frameborder=\'0\' width=\'0\' height=\'0\'/>")).appendTo(b.documentElement),b=(Ja[0].contentWindow||Ja[0].contentDocument).document,b.write(),b.close(),c=La(a,b),Ja.detach()),Ka[a]=c),c}var Na=/^margin/,Oa=new RegExp("^("+T+")(?!px)[a-z%]+$","i"),Pa=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Qa=d.documentElement;!function(){var b,c,e,f,g,h,i=d.createElement("div"),j=d.createElement("div");if(j.style){j.style.cssText="float:left;opacity:.5",l.opacity="0.5"===j.style.opacity,l.cssFloat=!!j.style.cssFloat,j.style.backgroundClip="content-box",j.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===j.style.backgroundClip,i=d.createElement("div"),i.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",j.innerHTML="",i.appendChild(j),l.boxSizing=""===j.style.boxSizing||""===j.style.MozBoxSizing||""===j.style.WebkitBoxSizing,n.extend(l,{reliableHiddenOffsets:function(){return null==b&&k(),f},boxSizingReliable:function(){return null==b&&k(),e},pixelMarginRight:function(){return null==b&&k(),c},pixelPosition:function(){return null==b&&k(),b},reliableMarginRight:function(){return null==b&&k(),g},reliableMarginLeft:function(){return null==b&&k(),h}});function k(){var k,l,m=d.documentElement;m.appendChild(i),j.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",b=e=h=!1,c=g=!0,a.getComputedStyle&&(l=a.getComputedStyle(j),b="1%"!==(l||{}).top,h="2px"===(l||{}).marginLeft,e="4px"===(l||{width:"4px"}).width,j.style.marginRight="50%",c="4px"===(l||{marginRight:"4px"}).marginRight,k=j.appendChild(d.createElement("div")),k.style.cssText=j.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",k.style.marginRight=k.style.width="0",j.style.width="1px",g=!parseFloat((a.getComputedStyle(k)||{}).marginRight),j.removeChild(k)),j.style.display="none",f=0===j.getClientRects().length,f&&(j.style.display="",j.innerHTML="<table><tr><td></td><td>t</td></tr></table>",j.childNodes[0].style.borderCollapse="separate",k=j.getElementsByTagName("td"),k[0].style.cssText="margin:0;border:0;padding:0;display:none",f=0===k[0].offsetHeight,f&&(k[0].style.display="",k[1].style.display="none",f=0===k[0].offsetHeight)),m.removeChild(i)}}}();var Ra,Sa,Ta=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ra=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Oa.test(g)&&Na.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0===g?g:g+""}):Qa.currentStyle&&(Ra=function(a){return a.currentStyle},Sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Oa.test(g)&&!Ta.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Ua(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Va=/alpha\\([^)]*\\)/i,Wa=/opacity\\s*=\\s*([^)]*)/i,Xa=/^(none|table(?!-c[ea]).+)/,Ya=new RegExp("^("+T+")(.*)$","i"),Za={position:"absolute",visibility:"hidden",display:"block"},$a={letterSpacing:"0",fontWeight:"400"},_a=["Webkit","O","Moz","ms"],ab=d.createElement("div").style;function bb(a){if(a in ab)return a;var b=a.charAt(0).toUpperCase()+a.slice(1),c=_a.length;while(c--)if(a=_a[c]+b,a in ab)return a}function cb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=n._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&W(d)&&(f[g]=n._data(d,"olddisplay",Ma(d.nodeName)))):(e=W(d),(c&&"none"!==c||!e)&&n._data(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function db(a,b,c){var d=Ya.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function eb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+V[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+V[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+V[f]+"Width",!0,e))):(g+=n.css(a,"padding"+V[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+V[f]+"Width",!0,e)));return g}function fb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ra(a),g=l.boxSizing&&"border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Sa(a,b,f),(0>e||null==e)&&(e=a.style[b]),Oa.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+eb(a,b,c||(g?"border":"content"),d,f)+"px"}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Sa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=bb(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=U.exec(c))&&e[1]&&(c=X(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=bb(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Sa(a,b,d)),"normal"===f&&b in $a&&(f=$a[b]),""===c||c?(e=parseFloat(f),c===!0||isFinite(e)?e||0:f):f}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Xa.test(n.css(a,"display"))&&0===a.offsetWidth?Pa(a,Za,function(){return fb(a,b,d)}):fb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ra(a);return db(a,c,d?eb(a,b,d,l.boxSizing&&"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Wa.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===n.trim(f.replace(Va,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Va.test(f)?f.replace(Va,e):f+" "+e)}}),n.cssHooks.marginRight=Ua(l.reliableMarginRight,function(a,b){return b?Pa(a,{display:"inline-block"},Sa,[a,"marginRight"]):void 0}),n.cssHooks.marginLeft=Ua(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Sa(a,"marginLeft"))||(n.contains(a.ownerDocument,a)?a.getBoundingClientRect().left-Pa(a,{\nmarginLeft:0},function(){return a.getBoundingClientRect().left}):0))+"px":void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+V[d]+b]=f[d]||f[d-2]||f[0];return e}},Na.test(a)||(n.cssHooks[a+b].set=db)}),n.fn.extend({css:function(a,b){return Y(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ra(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return cb(this,!0)},hide:function(){return cb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){W(this)?n(this).show():n(this).hide()})}});function gb(a,b,c,d,e){return new gb.prototype.init(a,b,c,d,e)}n.Tween=gb,gb.prototype={constructor:gb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=gb.propHooks[this.prop];return a&&a.get?a.get(this):gb.propHooks._default.get(this)},run:function(a){var b,c=gb.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):gb.propHooks._default.set(this),this}},gb.prototype.init.prototype=gb.prototype,gb.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},gb.propHooks.scrollTop=gb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=gb.prototype.init,n.fx.step={};var hb,ib,jb=/^(?:toggle|show|hide)$/,kb=/queueHooks$/;function lb(){return a.setTimeout(function(){hb=void 0}),hb=n.now()}function mb(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=V[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function nb(a,b,c){for(var d,e=(qb.tweeners[b]||[]).concat(qb.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ob(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType&&W(a),r=n._data(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,"display"),k="none"===j?n._data(a,"olddisplay")||Ma(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==Ma(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],jb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(o))"inline"===("none"===j?Ma(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=n._data(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,"fxshow");for(b in o)n.style(a,b,o[b])});for(d in o)g=nb(q?r[d]:0,d,m),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function pb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function qb(a,b,c){var d,e,f=0,g=qb.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=hb||lb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:hb||lb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(pb(k,j.opts.specialEasing);g>f;f++)if(d=qb.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,nb,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(qb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return X(c.elem,a,U.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],qb.tweeners[c]=qb.tweeners[c]||[],qb.tweeners[c].unshift(b)},prefilters:[ob],prefilter:function(a,b){b?qb.prefilters.unshift(a):qb.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(W).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=qb(this,n.extend({},a),f);(e||n._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&kb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=n._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(mb(b,!0),a,d,e)}}),n.each({slideDown:mb("show"),slideUp:mb("hide"),slideToggle:mb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(hb=n.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||n.fx.stop(),hb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){ib||(ib=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(ib),ib=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a,b=d.createElement("input"),c=d.createElement("div"),e=d.createElement("select"),f=e.appendChild(d.createElement("option"));c=d.createElement("div"),c.setAttribute("className","t"),c.innerHTML="  <link/><table></table><a href=\'/a\'>a</a><input type=\'checkbox\'/>",a=c.getElementsByTagName("a")[0],b.setAttribute("type","checkbox"),c.appendChild(b),a=c.getElementsByTagName("a")[0],a.style.cssText="top:1px",l.getSetAttribute="t"!==c.className,l.style=/top/.test(a.getAttribute("style")),l.hrefNormalized="/a"===a.getAttribute("href"),l.checkOn=!!b.value,l.optSelected=f.selected,l.enctype=!!d.createElement("form").enctype,e.disabled=!0,l.optDisabled=!f.disabled,b=d.createElement("input"),b.setAttribute("value",""),l.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),l.radioValue="t"===b.value}();var rb=/\\r/g,sb=/[\\x20\\t\\r\\n\\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(rb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a)).replace(sb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)if(d=e[g],n.inArray(n.valHooks.option.get(d),f)>-1)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var tb,ub,vb=n.expr.attrHandle,wb=/^(?:checked|selected)$/i,xb=l.getSetAttribute,yb=l.input;n.fn.extend({attr:function(a,b){return Y(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ub:tb)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)?yb&&xb||!wb.test(c)?a[d]=!1:a[n.camelCase("default-"+c)]=a[d]=!1:n.attr(a,c,""),a.removeAttribute(xb?c:d)}}),ub={set:function(a,b,c){return b===!1?n.removeAttr(a,c):yb&&xb||!wb.test(c)?a.setAttribute(!xb&&n.propFix[c]||c,c):a[n.camelCase("default-"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\\w+/g),function(a,b){var c=vb[b]||n.find.attr;yb&&xb||!wb.test(b)?vb[b]=function(a,b,d){var e,f;return d||(f=vb[b],vb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,vb[b]=f),e}:vb[b]=function(a,b,c){return c?void 0:a[n.camelCase("default-"+b)]?b.toLowerCase():null}}),yb&&xb||(n.attrHooks.value={set:function(a,b,c){return n.nodeName(a,"input")?void(a.defaultValue=b):tb&&tb.set(a,b,c)}}),xb||(tb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},vb.id=vb.name=vb.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:tb.set},n.attrHooks.contenteditable={set:function(a,b,c){tb.set(a,""===b?!1:b,c)}},n.each(["width","height"],function(a,b){n.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var zb=/^(?:input|select|textarea|button|object)$/i,Ab=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return Y(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):zb.test(a.nodeName)||Ab.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.hrefNormalized||n.each(["href","src"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype="encoding");var Bb=/[\\t\\r\\n\\f]/g;function Cb(a){return n.attr(a,"class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,Cb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=Cb(c),d=1===c.nodeType&&(" "+e+" ").replace(Bb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&n.attr(c,"class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,Cb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=Cb(c),d=1===c.nodeType&&(" "+e+" ").replace(Bb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&n.attr(c,"class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,Cb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=Cb(this),b&&n._data(this,"__className__",b),n.attr(this,"class",b||a===!1?"":n._data(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+Cb(c)+" ").replace(Bb," ").indexOf(b)>-1)return!0;return!1}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Db=a.location,Eb=n.now(),Fb=/\\?/,Gb=/(,)|(\\[|{)|(}|])|"(?:[^"\\\\\\r\\n]|\\\\["\\\\\\/bfnrt]|\\\\u[\\da-fA-F]{4})*"\\s*:?|true|false|null|-?(?!0\\d)\\d+(?:\\.\\d+|)(?:[eE][+-]?\\d+|)/g;n.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=n.trim(b+"");return e&&!n.trim(e.replace(Gb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():n.error("Invalid JSON: "+b)},n.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new a.DOMParser,c=d.parseFromString(b,"text/xml")):(c=new a.ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var Hb=/#.*$/,Ib=/([?&])_=[^&]*/,Jb=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/gm,Kb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Lb=/^(?:GET|HEAD)$/,Mb=/^\\/\\//,Nb=/^([\\w.+-]+:)(?:\\/\\/(?:[^\\/?#]*@|)([^\\/?#:]*)(?::(\\d+)|)|)/,Ob={},Pb={},Qb="*/".concat("*"),Rb=Db.href,Sb=Nb.exec(Rb.toLowerCase())||[];function Tb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Ub(a,b,c,d){var e={},f=a===Pb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Vb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&n.extend(!0,a,c),a}function Wb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Xb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rb,type:"GET",isLocal:Kb.test(Sb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Qb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Vb(Vb(a,n.ajaxSettings),b):Vb(n.ajaxSettings,a)},ajaxPrefilter:Tb(Ob),ajaxTransport:Tb(Pb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var d,e,f,g,h,i,j,k,l=n.ajaxSetup({},c),m=l.context||l,o=l.context&&(m.nodeType||m.jquery)?n(m):n.event,p=n.Deferred(),q=n.Callbacks("once memory"),r=l.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!k){k={};while(b=Jb.exec(g))k[b[1].toLowerCase()]=b[2]}b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return j&&j.abort(b),y(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,l.url=((b||l.url||Rb)+"").replace(Hb,"").replace(Mb,Sb[1]+"//"),l.type=c.method||c.type||l.method||l.type,l.dataTypes=n.trim(l.dataType||"*").toLowerCase().match(G)||[""],null==l.crossDomain&&(d=Nb.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Sb[1]&&d[2]===Sb[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Sb[3]||("http:"===Sb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=n.param(l.data,l.traditional)),Ub(Ob,l,c,w),2===u)return w;i=n.event&&l.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Lb.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(Fb.test(f)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Ib.test(f)?f.replace(Ib,"$1_="+Eb++):f+(Fb.test(f)?"&":"?")+"_="+Eb++)),l.ifModified&&(n.lastModified[f]&&w.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&w.setRequestHeader("If-None-Match",n.etag[f])),(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",l.contentType),w.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Qb+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)w.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(l.beforeSend.call(m,w,l)===!1||2===u))return w.abort();v="abort";for(e in{success:1,error:1,complete:1})w[e](l[e]);if(j=Ub(Pb,l,c,w)){if(w.readyState=1,i&&o.trigger("ajaxSend",[w,l]),2===u)return w;l.async&&l.timeout>0&&(h=a.setTimeout(function(){w.abort("timeout")},l.timeout));try{u=1,j.send(s,y)}catch(x){if(!(2>u))throw x;y(-1,x)}}else y(-1,"No Transport");function y(b,c,d,e){var k,s,t,v,x,y=c;2!==u&&(u=2,h&&a.clearTimeout(h),j=void 0,g=e||"",w.readyState=b>0?4:0,k=b>=200&&300>b||304===b,d&&(v=Wb(l,w,d)),v=Xb(l,v,w,k),k?(l.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(n.lastModified[f]=x),x=w.getResponseHeader("etag"),x&&(n.etag[f]=x)),204===b||"HEAD"===l.type?y="nocontent":304===b?y="notmodified":(y=v.state,s=v.data,t=v.error,k=!t)):(t=y,!b&&y||(y="error",0>b&&(b=0))),w.status=b,w.statusText=(c||y)+"",k?p.resolveWith(m,[s,y,w]):p.rejectWith(m,[w,y,t]),w.statusCode(r),r=void 0,i&&o.trigger(k?"ajaxSuccess":"ajaxError",[w,l,k?s:t]),q.fireWith(m,[w,y]),i&&(o.trigger("ajaxComplete",[w,l]),--n.active||n.event.trigger("ajaxStop")))}return w},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a))return this.each(function(b){n(this).wrapAll(a.call(this,b))});if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}});function Yb(a){return a.style&&a.style.display||n.css(a,"display")}function Zb(a){if(!n.contains(a.ownerDocument||d,a))return!0;while(a&&1===a.nodeType){if("none"===Yb(a)||"hidden"===a.type)return!0;a=a.parentNode}return!1}n.expr.filters.hidden=function(a){return l.reliableHiddenOffsets()?a.offsetWidth<=0&&a.offsetHeight<=0&&!a.getClientRects().length:Zb(a)},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var $b=/%20/g,_b=/\\[\\]$/,ac=/\\r?\\n/g,bc=/^(?:submit|button|image|reset|file)$/i,cc=/^(?:input|select|textarea|keygen)/i;function dc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||_b.test(a)?d(a,e):dc(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)dc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)dc(c,a[c],b,e);return d.join("&").replace($b,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&cc.test(this.nodeName)&&!bc.test(a)&&(this.checked||!Z.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(ac,"\\r\\n")}}):{name:b.name,value:c.replace(ac,"\\r\\n")}}).get()}}),n.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return this.isLocal?ic():d.documentMode>8?hc():/^(get|post|head|put|delete|options)$/i.test(this.type)&&hc()||ic()}:hc;var ec=0,fc={},gc=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in fc)fc[a](void 0,!0)}),l.cors=!!gc&&"withCredentials"in gc,gc=l.ajax=!!gc,gc&&n.ajaxTransport(function(b){if(!b.crossDomain||l.cors){var c;return{send:function(d,e){var f,g=b.xhr(),h=++ec;if(g.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(f in b.xhrFields)g[f]=b.xhrFields[f];b.mimeType&&g.overrideMimeType&&g.overrideMimeType(b.mimeType),b.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");for(f in d)void 0!==d[f]&&g.setRequestHeader(f,d[f]+"");g.send(b.hasContent&&b.data||null),c=function(a,d){var f,i,j;if(c&&(d||4===g.readyState))if(delete fc[h],c=void 0,g.onreadystatechange=n.noop,d)4!==g.readyState&&g.abort();else{j={},f=g.status,"string"==typeof g.responseText&&(j.text=g.responseText);try{i=g.statusText}catch(k){i=""}f||!b.isLocal||b.crossDomain?1223===f&&(f=204):f=j.text?200:404}j&&e(f,i,j,g.getAllResponseHeaders())},b.async?4===g.readyState?a.setTimeout(c):g.onreadystatechange=fc[h]=c:c()},abort:function(){c&&c(void 0,!0)}}}});function hc(){try{return new a.XMLHttpRequest}catch(b){}}function ic(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=d.head||n("head")[0]||d.documentElement;return{send:function(e,f){b=d.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||f(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var jc=[],kc=/(=)\\?(?=&|$)|\\?\\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=jc.pop()||n.expando+"_"+Eb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(kc.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&kc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(kc,"$1"+e):b.jsonp!==!1&&(b.url+=(Fb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,jc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ja([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var lc=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&lc)return lc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h,a.length)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function mc(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&n.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,n.contains(b,e)?("undefined"!=typeof e.getBoundingClientRect&&(d=e.getBoundingClientRect()),c=mc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===n.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(c=a.offset()),c.top+=n.css(a[0],"borderTopWidth",!0),c.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-n.css(d,"marginTop",!0),left:b.left-c.left-n.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Qa})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return Y(this,function(a,d,e){var f=mc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ua(l.pixelPosition,function(a,c){return c?(c=Sa(a,b),Oa.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({\npadding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return Y(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var nc=a.jQuery,oc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=oc),b&&a.jQuery===n&&(a.jQuery=nc),n},b||(a.jQuery=a.$=n),n});\n'},3883:e=>{e.exports="/* MarionetteJS (Backbone.Marionette)\n ----------------------------------\n v2.3.0\n\n Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.\n Distributed under MIT license\n\n http://marionettejs.com\nCopyright  2016 Muted Solutions, LLC <derick@mutedsolutions.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the Software),\nto deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,\nand/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED AS IS, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n * Includes BabySitter\n * https://github.com/marionettejs/backbone.babysitter/\n *\n * Includes Wreqr\n * https://github.com/marionettejs/backbone.wreqr/\n*/\n\n\n(function(root, factory) {\n\n  /* istanbul ignore next */\n  if (typeof define === 'function' && define.amd) {\n    define(['backbone', 'underscore'], function(Backbone, _) {\n      return (root.Marionette = root.Mn = factory(root, Backbone, _));\n    });\n  } else if (typeof exports !== 'undefined') {\n    var Backbone = require('backbone');\n    var _ = require('underscore');\n    module.exports = factory(root, Backbone, _);\n  } else {\n    root.Marionette = root.Mn = factory(root, root.Backbone, root._);\n  }\n\n}(this, function(root, Backbone, _) {\n  'use strict';\n\n  /* istanbul ignore next */\n  // Backbone.BabySitter\n  // -------------------\n  // v0.1.4\n  //\n  // Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.\n  // Distributed under MIT license\n  //\n  // http://github.com/marionettejs/backbone.babysitter\n  (function(Backbone, _) {\n    \"use strict\";\n    var previousChildViewContainer = Backbone.ChildViewContainer;\n    // BabySitter.ChildViewContainer\n    // -----------------------------\n    //\n    // Provide a container to store, retrieve and\n    // shut down child views.\n    Backbone.ChildViewContainer = function(Backbone, _) {\n      // Container Constructor\n      // ---------------------\n      var Container = function(views) {\n        this._views = {};\n        this._indexByModel = {};\n        this._indexByCustom = {};\n        this._updateLength();\n        _.each(views, this.add, this);\n      };\n      // Container Methods\n      // -----------------\n      _.extend(Container.prototype, {\n        // Add a view to this container. Stores the view\n        // by `cid` and makes it searchable by the model\n        // cid (and model itself). Optionally specify\n        // a custom key to store an retrieve the view.\n        add: function(view, customIndex) {\n          var viewCid = view.cid;\n          // store the view\n          this._views[viewCid] = view;\n          // index it by model\n          if (view.model) {\n            this._indexByModel[view.model.cid] = viewCid;\n          }\n          // index by custom\n          if (customIndex) {\n            this._indexByCustom[customIndex] = viewCid;\n          }\n          this._updateLength();\n          return this;\n        },\n        // Find a view by the model that was attached to\n        // it. Uses the model's `cid` to find it.\n        findByModel: function(model) {\n          return this.findByModelCid(model.cid);\n        },\n        // Find a view by the `cid` of the model that was attached to\n        // it. Uses the model's `cid` to find the view `cid` and\n        // retrieve the view using it.\n        findByModelCid: function(modelCid) {\n          var viewCid = this._indexByModel[modelCid];\n          return this.findByCid(viewCid);\n        },\n        // Find a view by a custom indexer.\n        findByCustom: function(index) {\n          var viewCid = this._indexByCustom[index];\n          return this.findByCid(viewCid);\n        },\n        // Find by index. This is not guaranteed to be a\n        // stable index.\n        findByIndex: function(index) {\n          return _.values(this._views)[index];\n        },\n        // retrieve a view by its `cid` directly\n        findByCid: function(cid) {\n          return this._views[cid];\n        },\n        // Remove a view\n        remove: function(view) {\n          var viewCid = view.cid;\n          // delete model index\n          if (view.model) {\n            delete this._indexByModel[view.model.cid];\n          }\n          // delete custom index\n          _.any(this._indexByCustom, function(cid, key) {\n            if (cid === viewCid) {\n              delete this._indexByCustom[key];\n              return true;\n            }\n          }, this);\n          // remove the view from the container\n          delete this._views[viewCid];\n          // update the length\n          this._updateLength();\n          return this;\n        },\n        // Call a method on every view in the container,\n        // passing parameters to the call method one at a\n        // time, like `function.call`.\n        call: function(method) {\n          this.apply(method, _.tail(arguments));\n        },\n        // Apply a method on every view in the container,\n        // passing parameters to the call method one at a\n        // time, like `function.apply`.\n        apply: function(method, args) {\n          _.each(this._views, function(view) {\n            if (_.isFunction(view[method])) {\n              view[method].apply(view, args || []);\n            }\n          });\n        },\n        // Update the `.length` attribute on this container\n        _updateLength: function() {\n          this.length = _.size(this._views);\n        }\n      });\n      // Borrowing this code from Backbone.Collection:\n      // http://backbonejs.org/docs/backbone.html#section-106\n      //\n      // Mix in methods from Underscore, for iteration, and other\n      // collection related features.\n      var methods = [ \"forEach\", \"each\", \"map\", \"find\", \"detect\", \"filter\", \"select\", \"reject\", \"every\", \"all\", \"some\", \"any\", \"include\", \"contains\", \"invoke\", \"toArray\", \"first\", \"initial\", \"rest\", \"last\", \"without\", \"isEmpty\", \"pluck\" ];\n      _.each(methods, function(method) {\n        Container.prototype[method] = function() {\n          var views = _.values(this._views);\n          var args = [ views ].concat(_.toArray(arguments));\n          return _[method].apply(_, args);\n        };\n      });\n      // return the public API\n      return Container;\n    }(Backbone, _);\n    Backbone.ChildViewContainer.VERSION = \"0.1.4\";\n    Backbone.ChildViewContainer.noConflict = function() {\n      Backbone.ChildViewContainer = previousChildViewContainer;\n      return this;\n    };\n    return Backbone.ChildViewContainer;\n  })(Backbone, _);\n\n  /* istanbul ignore next */\n  // Backbone.Wreqr (Backbone.Marionette)\n  // ----------------------------------\n  // v1.3.1\n  //\n  // Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.\n  // Distributed under MIT license\n  //\n  // http://github.com/marionettejs/backbone.wreqr\n  (function(Backbone, _) {\n    \"use strict\";\n    var previousWreqr = Backbone.Wreqr;\n    var Wreqr = Backbone.Wreqr = {};\n    Backbone.Wreqr.VERSION = \"1.3.1\";\n    Backbone.Wreqr.noConflict = function() {\n      Backbone.Wreqr = previousWreqr;\n      return this;\n    };\n    // Handlers\n    // --------\n    // A registry of functions to call, given a name\n    Wreqr.Handlers = function(Backbone, _) {\n      \"use strict\";\n      // Constructor\n      // -----------\n      var Handlers = function(options) {\n        this.options = options;\n        this._wreqrHandlers = {};\n        if (_.isFunction(this.initialize)) {\n          this.initialize(options);\n        }\n      };\n      Handlers.extend = Backbone.Model.extend;\n      // Instance Members\n      // ----------------\n      _.extend(Handlers.prototype, Backbone.Events, {\n        // Add multiple handlers using an object literal configuration\n        setHandlers: function(handlers) {\n          _.each(handlers, function(handler, name) {\n            var context = null;\n            if (_.isObject(handler) && !_.isFunction(handler)) {\n              context = handler.context;\n              handler = handler.callback;\n            }\n            this.setHandler(name, handler, context);\n          }, this);\n        },\n        // Add a handler for the given name, with an\n        // optional context to run the handler within\n        setHandler: function(name, handler, context) {\n          var config = {\n            callback: handler,\n            context: context\n          };\n          this._wreqrHandlers[name] = config;\n          this.trigger(\"handler:add\", name, handler, context);\n        },\n        // Determine whether or not a handler is registered\n        hasHandler: function(name) {\n          return !!this._wreqrHandlers[name];\n        },\n        // Get the currently registered handler for\n        // the specified name. Throws an exception if\n        // no handler is found.\n        getHandler: function(name) {\n          var config = this._wreqrHandlers[name];\n          if (!config) {\n            return;\n          }\n          return function() {\n            var args = Array.prototype.slice.apply(arguments);\n            return config.callback.apply(config.context, args);\n          };\n        },\n        // Remove a handler for the specified name\n        removeHandler: function(name) {\n          delete this._wreqrHandlers[name];\n        },\n        // Remove all handlers from this registry\n        removeAllHandlers: function() {\n          this._wreqrHandlers = {};\n        }\n      });\n      return Handlers;\n    }(Backbone, _);\n    // Wreqr.CommandStorage\n    // --------------------\n    //\n    // Store and retrieve commands for execution.\n    Wreqr.CommandStorage = function() {\n      \"use strict\";\n      // Constructor function\n      var CommandStorage = function(options) {\n        this.options = options;\n        this._commands = {};\n        if (_.isFunction(this.initialize)) {\n          this.initialize(options);\n        }\n      };\n      // Instance methods\n      _.extend(CommandStorage.prototype, Backbone.Events, {\n        // Get an object literal by command name, that contains\n        // the `commandName` and the `instances` of all commands\n        // represented as an array of arguments to process\n        getCommands: function(commandName) {\n          var commands = this._commands[commandName];\n          // we don't have it, so add it\n          if (!commands) {\n            // build the configuration\n            commands = {\n              command: commandName,\n              instances: []\n            };\n            // store it\n            this._commands[commandName] = commands;\n          }\n          return commands;\n        },\n        // Add a command by name, to the storage and store the\n        // args for the command\n        addCommand: function(commandName, args) {\n          var command = this.getCommands(commandName);\n          command.instances.push(args);\n        },\n        // Clear all commands for the given `commandName`\n        clearCommands: function(commandName) {\n          var command = this.getCommands(commandName);\n          command.instances = [];\n        }\n      });\n      return CommandStorage;\n    }();\n    // Wreqr.Commands\n    // --------------\n    //\n    // A simple command pattern implementation. Register a command\n    // handler and execute it.\n    Wreqr.Commands = function(Wreqr) {\n      \"use strict\";\n      return Wreqr.Handlers.extend({\n        // default storage type\n        storageType: Wreqr.CommandStorage,\n        constructor: function(options) {\n          this.options = options || {};\n          this._initializeStorage(this.options);\n          this.on(\"handler:add\", this._executeCommands, this);\n          var args = Array.prototype.slice.call(arguments);\n          Wreqr.Handlers.prototype.constructor.apply(this, args);\n        },\n        // Execute a named command with the supplied args\n        execute: function(name, args) {\n          name = arguments[0];\n          args = Array.prototype.slice.call(arguments, 1);\n          if (this.hasHandler(name)) {\n            this.getHandler(name).apply(this, args);\n          } else {\n            this.storage.addCommand(name, args);\n          }\n        },\n        // Internal method to handle bulk execution of stored commands\n        _executeCommands: function(name, handler, context) {\n          var command = this.storage.getCommands(name);\n          // loop through and execute all the stored command instances\n          _.each(command.instances, function(args) {\n            handler.apply(context, args);\n          });\n          this.storage.clearCommands(name);\n        },\n        // Internal method to initialize storage either from the type's\n        // `storageType` or the instance `options.storageType`.\n        _initializeStorage: function(options) {\n          var storage;\n          var StorageType = options.storageType || this.storageType;\n          if (_.isFunction(StorageType)) {\n            storage = new StorageType();\n          } else {\n            storage = StorageType;\n          }\n          this.storage = storage;\n        }\n      });\n    }(Wreqr);\n    // Wreqr.RequestResponse\n    // ---------------------\n    //\n    // A simple request/response implementation. Register a\n    // request handler, and return a response from it\n    Wreqr.RequestResponse = function(Wreqr) {\n      \"use strict\";\n      return Wreqr.Handlers.extend({\n        request: function() {\n          var name = arguments[0];\n          var args = Array.prototype.slice.call(arguments, 1);\n          if (this.hasHandler(name)) {\n            return this.getHandler(name).apply(this, args);\n          }\n        }\n      });\n    }(Wreqr);\n    // Event Aggregator\n    // ----------------\n    // A pub-sub object that can be used to decouple various parts\n    // of an application through event-driven architecture.\n    Wreqr.EventAggregator = function(Backbone, _) {\n      \"use strict\";\n      var EA = function() {};\n      // Copy the `extend` function used by Backbone's classes\n      EA.extend = Backbone.Model.extend;\n      // Copy the basic Backbone.Events on to the event aggregator\n      _.extend(EA.prototype, Backbone.Events);\n      return EA;\n    }(Backbone, _);\n    // Wreqr.Channel\n    // --------------\n    //\n    // An object that wraps the three messaging systems:\n    // EventAggregator, RequestResponse, Commands\n    Wreqr.Channel = function(Wreqr) {\n      \"use strict\";\n      var Channel = function(channelName) {\n        this.vent = new Backbone.Wreqr.EventAggregator();\n        this.reqres = new Backbone.Wreqr.RequestResponse();\n        this.commands = new Backbone.Wreqr.Commands();\n        this.channelName = channelName;\n      };\n      _.extend(Channel.prototype, {\n        // Remove all handlers from the messaging systems of this channel\n        reset: function() {\n          this.vent.off();\n          this.vent.stopListening();\n          this.reqres.removeAllHandlers();\n          this.commands.removeAllHandlers();\n          return this;\n        },\n        // Connect a hash of events; one for each messaging system\n        connectEvents: function(hash, context) {\n          this._connect(\"vent\", hash, context);\n          return this;\n        },\n        connectCommands: function(hash, context) {\n          this._connect(\"commands\", hash, context);\n          return this;\n        },\n        connectRequests: function(hash, context) {\n          this._connect(\"reqres\", hash, context);\n          return this;\n        },\n        // Attach the handlers to a given message system `type`\n        _connect: function(type, hash, context) {\n          if (!hash) {\n            return;\n          }\n          context = context || this;\n          var method = type === \"vent\" ? \"on\" : \"setHandler\";\n          _.each(hash, function(fn, eventName) {\n            this[type][method](eventName, _.bind(fn, context));\n          }, this);\n        }\n      });\n      return Channel;\n    }(Wreqr);\n    // Wreqr.Radio\n    // --------------\n    //\n    // An object that lets you communicate with many channels.\n    Wreqr.radio = function(Wreqr) {\n      \"use strict\";\n      var Radio = function() {\n        this._channels = {};\n        this.vent = {};\n        this.commands = {};\n        this.reqres = {};\n        this._proxyMethods();\n      };\n      _.extend(Radio.prototype, {\n        channel: function(channelName) {\n          if (!channelName) {\n            throw new Error(\"Channel must receive a name\");\n          }\n          return this._getChannel(channelName);\n        },\n        _getChannel: function(channelName) {\n          var channel = this._channels[channelName];\n          if (!channel) {\n            channel = new Wreqr.Channel(channelName);\n            this._channels[channelName] = channel;\n          }\n          return channel;\n        },\n        _proxyMethods: function() {\n          _.each([ \"vent\", \"commands\", \"reqres\" ], function(system) {\n            _.each(messageSystems[system], function(method) {\n              this[system][method] = proxyMethod(this, system, method);\n            }, this);\n          }, this);\n        }\n      });\n      var messageSystems = {\n        vent: [ \"on\", \"off\", \"trigger\", \"once\", \"stopListening\", \"listenTo\", \"listenToOnce\" ],\n        commands: [ \"execute\", \"setHandler\", \"setHandlers\", \"removeHandler\", \"removeAllHandlers\" ],\n        reqres: [ \"request\", \"setHandler\", \"setHandlers\", \"removeHandler\", \"removeAllHandlers\" ]\n      };\n      var proxyMethod = function(radio, system, method) {\n        return function(channelName) {\n          var messageSystem = radio._getChannel(channelName)[system];\n          var args = Array.prototype.slice.call(arguments, 1);\n          return messageSystem[method].apply(messageSystem, args);\n        };\n      };\n      return new Radio();\n    }(Wreqr);\n    return Backbone.Wreqr;\n  })(Backbone, _);\n\n  var previousMarionette = root.Marionette;\n\n  var Marionette = Backbone.Marionette = {};\n\n  Marionette.VERSION = '2.3.0';\n\n  Marionette.noConflict = function() {\n    root.Marionette = previousMarionette;\n    return this;\n  };\n\n  Backbone.Marionette = Marionette;\n\n  // Get the Deferred creator for later use\n  Marionette.Deferred = Backbone.$.Deferred;\n\n  /* jshint unused: false *//* global console */\n\n  // Helpers\n  // -------\n\n  // Marionette.extend\n  // -----------------\n\n  // Borrow the Backbone `extend` method so we can use it as needed\n  Marionette.extend = Backbone.Model.extend;\n\n  // Marionette.isNodeAttached\n  // -------------------------\n\n  // Determine if `el` is a child of the document\n  Marionette.isNodeAttached = function(el) {\n    return Backbone.$.contains(document.documentElement, el);\n  };\n\n\n  // Marionette.getOption\n  // --------------------\n\n  // Retrieve an object, function or other value from a target\n  // object or its `options`, with `options` taking precedence.\n  Marionette.getOption = function(target, optionName) {\n    if (!target || !optionName) { return; }\n    if (target.options && (target.options[optionName] !== undefined)) {\n      return target.options[optionName];\n    } else {\n      return target[optionName];\n    }\n  };\n\n  // Proxy `Marionette.getOption`\n  Marionette.proxyGetOption = function(optionName) {\n    return Marionette.getOption(this, optionName);\n  };\n\n  // Marionette.normalizeMethods\n  // ----------------------\n\n  // Pass in a mapping of events => functions or function names\n  // and return a mapping of events => functions\n  Marionette.normalizeMethods = function(hash) {\n    return _.reduce(hash, function(normalizedHash, method, name) {\n      if (!_.isFunction(method)) {\n        method = this[method];\n      }\n      if (method) {\n        normalizedHash[name] = method;\n      }\n      return normalizedHash;\n    }, {}, this);\n  };\n\n  // utility method for parsing @ui. syntax strings\n  // into associated selector\n  Marionette.normalizeUIString = function(uiString, ui) {\n    return uiString.replace(/@ui\\.[a-zA-Z_$0-9]*/g, function(r) {\n      return ui[r.slice(4)];\n    });\n  };\n\n  // allows for the use of the @ui. syntax within\n  // a given key for triggers and events\n  // swaps the @ui with the associated selector.\n  // Returns a new, non-mutated, parsed events hash.\n  Marionette.normalizeUIKeys = function(hash, ui) {\n    return _.reduce(hash, function(memo, val, key) {\n      var normalizedKey = Marionette.normalizeUIString(key, ui);\n      memo[normalizedKey] = val;\n      return memo;\n    }, {});\n  };\n\n  // allows for the use of the @ui. syntax within\n  // a given value for regions\n  // swaps the @ui with the associated selector\n  Marionette.normalizeUIValues = function(hash, ui) {\n    _.each(hash, function(val, key) {\n      if (_.isString(val)) {\n        hash[key] = Marionette.normalizeUIString(val, ui);\n      }\n    });\n    return hash;\n  };\n\n  // Mix in methods from Underscore, for iteration, and other\n  // collection related features.\n  // Borrowing this code from Backbone.Collection:\n  // http://backbonejs.org/docs/backbone.html#section-121\n  Marionette.actAsCollection = function(object, listProperty) {\n    var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',\n      'select', 'reject', 'every', 'all', 'some', 'any', 'include',\n      'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',\n      'last', 'without', 'isEmpty', 'pluck'];\n\n    _.each(methods, function(method) {\n      object[method] = function() {\n        var list = _.values(_.result(this, listProperty));\n        var args = [list].concat(_.toArray(arguments));\n        return _[method].apply(_, args);\n      };\n    });\n  };\n\n  var deprecate = Marionette.deprecate = function(message, test) {\n    if (_.isObject(message)) {\n      message = (\n        message.prev + ' is going to be removed in the future. ' +\n        'Please use ' + message.next + ' instead.' +\n        (message.url ? ' See: ' + message.url : '')\n      );\n    }\n\n    if ((test === undefined || !test) && !deprecate._cache[message]) {\n      deprecate._warn('Deprecation warning: ' + message);\n      deprecate._cache[message] = true;\n    }\n  };\n\n  deprecate._warn = typeof console !== 'undefined' && (console.warn || console.log) || function() {};\n  deprecate._cache = {};\n\n  /* jshint maxstatements: 14, maxcomplexity: 7 */\n\n  // Trigger Method\n  // --------------\n\n\n  Marionette._triggerMethod = (function() {\n    // split the event name on the \":\"\n    var splitter = /(^|:)(\\w)/gi;\n\n    // take the event section (\"section1:section2:section3\")\n    // and turn it in to uppercase name\n    function getEventName(match, prefix, eventName) {\n      return eventName.toUpperCase();\n    }\n\n    return function(context, event, args) {\n      var noEventArg = arguments.length < 3;\n      if (noEventArg) {\n        args = event;\n        event = args[0];\n      }\n\n      // get the method name from the event name\n      var methodName = 'on' + event.replace(splitter, getEventName);\n      var method = context[methodName];\n      var result;\n\n      // call the onMethodName if it exists\n      if (_.isFunction(method)) {\n        // pass all args, except the event name\n        result = method.apply(context, noEventArg ? _.rest(args) : args);\n      }\n\n      // trigger the event, if a trigger method exists\n      if (_.isFunction(context.trigger)) {\n        if (noEventArg + args.length > 1) {\n          context.trigger.apply(context, noEventArg ? args : [event].concat(_.rest(args, 0)));\n        } else {\n          context.trigger(event);\n        }\n      }\n\n      return result;\n    };\n  })();\n\n  // Trigger an event and/or a corresponding method name. Examples:\n  //\n  // `this.triggerMethod(\"foo\")` will trigger the \"foo\" event and\n  // call the \"onFoo\" method.\n  //\n  // `this.triggerMethod(\"foo:bar\")` will trigger the \"foo:bar\" event and\n  // call the \"onFooBar\" method.\n  Marionette.triggerMethod = function(event) {\n    return Marionette._triggerMethod(this, arguments);\n  };\n\n  // triggerMethodOn invokes triggerMethod on a specific context\n  //\n  // e.g. `Marionette.triggerMethodOn(view, 'show')`\n  // will trigger a \"show\" event or invoke onShow the view.\n  Marionette.triggerMethodOn = function(context) {\n    var fnc = _.isFunction(context.triggerMethod) ?\n                  context.triggerMethod :\n                  Marionette.triggerMethod;\n\n    return fnc.apply(context, _.rest(arguments));\n  };\n\n  // DOM Refresh\n  // -----------\n\n  // Monitor a view's state, and after it has been rendered and shown\n  // in the DOM, trigger a \"dom:refresh\" event every time it is\n  // re-rendered.\n\n  Marionette.MonitorDOMRefresh = function(view) {\n\n    // track when the view has been shown in the DOM,\n    // using a Marionette.Region (or by other means of triggering \"show\")\n    function handleShow() {\n      view._isShown = true;\n      triggerDOMRefresh();\n    }\n\n    // track when the view has been rendered\n    function handleRender() {\n      view._isRendered = true;\n      triggerDOMRefresh();\n    }\n\n    // Trigger the \"dom:refresh\" event and corresponding \"onDomRefresh\" method\n    function triggerDOMRefresh() {\n      if (view._isShown && view._isRendered && Marionette.isNodeAttached(view.el)) {\n        if (_.isFunction(view.triggerMethod)) {\n          view.triggerMethod('dom:refresh');\n        }\n      }\n    }\n\n    view.on({\n      show: handleShow,\n      render: handleRender\n    });\n  };\n\n  /* jshint maxparams: 5 */\n\n  // Bind Entity Events & Unbind Entity Events\n  // -----------------------------------------\n  //\n  // These methods are used to bind/unbind a backbone \"entity\" (collection/model)\n  // to methods on a target object.\n  //\n  // The first parameter, `target`, must have a `listenTo` method from the\n  // EventBinder object.\n  //\n  // The second parameter is the entity (Backbone.Model or Backbone.Collection)\n  // to bind the events from.\n  //\n  // The third parameter is a hash of { \"event:name\": \"eventHandler\" }\n  // configuration. Multiple handlers can be separated by a space. A\n  // function can be supplied instead of a string handler name.\n\n  (function(Marionette) {\n    'use strict';\n\n    // Bind the event to handlers specified as a string of\n    // handler names on the target object\n    function bindFromStrings(target, entity, evt, methods) {\n      var methodNames = methods.split(/\\s+/);\n\n      _.each(methodNames, function(methodName) {\n\n        var method = target[methodName];\n        if (!method) {\n          throw new Marionette.Error('Method \"' + methodName +\n            '\" was configured as an event handler, but does not exist.');\n        }\n\n        target.listenTo(entity, evt, method);\n      });\n    }\n\n    // Bind the event to a supplied callback function\n    function bindToFunction(target, entity, evt, method) {\n      target.listenTo(entity, evt, method);\n    }\n\n    // Bind the event to handlers specified as a string of\n    // handler names on the target object\n    function unbindFromStrings(target, entity, evt, methods) {\n      var methodNames = methods.split(/\\s+/);\n\n      _.each(methodNames, function(methodName) {\n        var method = target[methodName];\n        target.stopListening(entity, evt, method);\n      });\n    }\n\n    // Bind the event to a supplied callback function\n    function unbindToFunction(target, entity, evt, method) {\n      target.stopListening(entity, evt, method);\n    }\n\n\n    // generic looping function\n    function iterateEvents(target, entity, bindings, functionCallback, stringCallback) {\n      if (!entity || !bindings) { return; }\n\n      // type-check bindings\n      if (!_.isFunction(bindings) && !_.isObject(bindings)) {\n        throw new Marionette.Error({\n          message: 'Bindings must be an object or function.',\n          url: 'marionette.functions.html#marionettebindentityevents'\n        });\n      }\n\n      // allow the bindings to be a function\n      if (_.isFunction(bindings)) {\n        bindings = bindings.call(target);\n      }\n\n      // iterate the bindings and bind them\n      _.each(bindings, function(methods, evt) {\n\n        // allow for a function as the handler,\n        // or a list of event names as a string\n        if (_.isFunction(methods)) {\n          functionCallback(target, entity, evt, methods);\n        } else {\n          stringCallback(target, entity, evt, methods);\n        }\n\n      });\n    }\n\n    // Export Public API\n    Marionette.bindEntityEvents = function(target, entity, bindings) {\n      iterateEvents(target, entity, bindings, bindToFunction, bindFromStrings);\n    };\n\n    Marionette.unbindEntityEvents = function(target, entity, bindings) {\n      iterateEvents(target, entity, bindings, unbindToFunction, unbindFromStrings);\n    };\n\n    // Proxy `bindEntityEvents`\n    Marionette.proxyBindEntityEvents = function(entity, bindings) {\n      return Marionette.bindEntityEvents(this, entity, bindings);\n    };\n\n    // Proxy `unbindEntityEvents`\n    Marionette.proxyUnbindEntityEvents = function(entity, bindings) {\n      return Marionette.unbindEntityEvents(this, entity, bindings);\n    };\n  })(Marionette);\n\n\n  // Error\n  // -----\n\n  var errorProps = ['description', 'fileName', 'lineNumber', 'name', 'message', 'number'];\n\n  Marionette.Error = Marionette.extend.call(Error, {\n    urlRoot: 'http://marionettejs.com/docs/v' + Marionette.VERSION + '/',\n\n    constructor: function(message, options) {\n      if (_.isObject(message)) {\n        options = message;\n        message = options.message;\n      } else if (!options) {\n        options = {};\n      }\n\n      var error = Error.call(this, message);\n      _.extend(this, _.pick(error, errorProps), _.pick(options, errorProps));\n\n      this.captureStackTrace();\n\n      if (options.url) {\n        this.url = this.urlRoot + options.url;\n      }\n    },\n\n    captureStackTrace: function() {\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, Marionette.Error);\n      }\n    },\n\n    toString: function() {\n      return this.name + ': ' + this.message + (this.url ? ' See: ' + this.url : '');\n    }\n  });\n\n  Marionette.Error.extend = Marionette.extend;\n\n  // Callbacks\n  // ---------\n\n  // A simple way of managing a collection of callbacks\n  // and executing them at a later point in time, using jQuery's\n  // `Deferred` object.\n  Marionette.Callbacks = function() {\n    this._deferred = Marionette.Deferred();\n    this._callbacks = [];\n  };\n\n  _.extend(Marionette.Callbacks.prototype, {\n\n    // Add a callback to be executed. Callbacks added here are\n    // guaranteed to execute, even if they are added after the\n    // `run` method is called.\n    add: function(callback, contextOverride) {\n      var promise = _.result(this._deferred, 'promise');\n\n      this._callbacks.push({cb: callback, ctx: contextOverride});\n\n      promise.then(function(args) {\n        if (contextOverride){ args.context = contextOverride; }\n        callback.call(args.context, args.options);\n      });\n    },\n\n    // Run all registered callbacks with the context specified.\n    // Additional callbacks can be added after this has been run\n    // and they will still be executed.\n    run: function(options, context) {\n      this._deferred.resolve({\n        options: options,\n        context: context\n      });\n    },\n\n    // Resets the list of callbacks to be run, allowing the same list\n    // to be run multiple times - whenever the `run` method is called.\n    reset: function() {\n      var callbacks = this._callbacks;\n      this._deferred = Marionette.Deferred();\n      this._callbacks = [];\n\n      _.each(callbacks, function(cb) {\n        this.add(cb.cb, cb.ctx);\n      }, this);\n    }\n  });\n\n  // Controller\n  // ----------\n\n  // A multi-purpose object to use as a controller for\n  // modules and routers, and as a mediator for workflow\n  // and coordination of other objects, views, and more.\n  Marionette.Controller = function(options) {\n    this.options = options || {};\n\n    if (_.isFunction(this.initialize)) {\n      this.initialize(this.options);\n    }\n  };\n\n  Marionette.Controller.extend = Marionette.extend;\n\n  // Controller Methods\n  // --------------\n\n  // Ensure it can trigger events with Backbone.Events\n  _.extend(Marionette.Controller.prototype, Backbone.Events, {\n    destroy: function() {\n      Marionette._triggerMethod(this, 'before:destroy', arguments);\n      Marionette._triggerMethod(this, 'destroy', arguments);\n\n      this.stopListening();\n      this.off();\n      return this;\n    },\n\n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod,\n\n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption\n\n  });\n\n  // Object\n  // ------\n\n  // A Base Class that other Classes should descend from.\n  // Object borrows many conventions and utilities from Backbone.\n  Marionette.Object = function(options) {\n    this.options = _.extend({}, _.result(this, 'options'), options);\n\n    this.initialize.apply(this, arguments);\n  };\n\n  Marionette.Object.extend = Marionette.extend;\n\n  // Object Methods\n  // --------------\n\n  // Ensure it can trigger events with Backbone.Events\n  _.extend(Marionette.Object.prototype, Backbone.Events, {\n\n    //this is a noop method intended to be overridden by classes that extend from this base\n    initialize: function() {},\n\n    destroy: function() {\n      this.triggerMethod('before:destroy');\n      this.triggerMethod('destroy');\n      this.stopListening();\n    },\n\n    // Import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod,\n\n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption,\n\n    // Proxy `bindEntityEvents` to enable binding view's events from another entity.\n    bindEntityEvents: Marionette.proxyBindEntityEvents,\n\n    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.\n    unbindEntityEvents: Marionette.proxyUnbindEntityEvents\n  });\n\n  /* jshint maxcomplexity: 16, maxstatements: 45, maxlen: 120 */\n\n  // Region\n  // ------\n\n  // Manage the visual regions of your composite application. See\n  // http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/\n\n  Marionette.Region = Marionette.Object.extend({\n    constructor: function (options) {\n\n      // set options temporarily so that we can get `el`.\n      // options will be overriden by Object.constructor\n      this.options = options || {};\n      this.el = this.getOption('el');\n\n      // Handle when this.el is passed in as a $ wrapped element.\n      this.el = this.el instanceof Backbone.$ ? this.el[0] : this.el;\n\n      if (!this.el) {\n        throw new Marionette.Error({\n          name: 'NoElError',\n          message: 'An \"el\" must be specified for a region.'\n        });\n      }\n\n      this.$el = this.getEl(this.el);\n      Marionette.Object.call(this, options);\n    },\n\n    // Displays a backbone view instance inside of the region.\n    // Handles calling the `render` method for you. Reads content\n    // directly from the `el` attribute. Also calls an optional\n    // `onShow` and `onDestroy` method on your view, just after showing\n    // or just before destroying the view, respectively.\n    // The `preventDestroy` option can be used to prevent a view from\n    // the old view being destroyed on show.\n    // The `forceShow` option can be used to force a view to be\n    // re-rendered if it's already shown in the region.\n    show: function(view, options){\n      if (!this._ensureElement()) {\n        return;\n      }\n\n      this._ensureViewIsIntact(view);\n\n      var showOptions     = options || {};\n      var isDifferentView = view !== this.currentView;\n      var preventDestroy  = !!showOptions.preventDestroy;\n      var forceShow       = !!showOptions.forceShow;\n\n      // We are only changing the view if there is a current view to change to begin with\n      var isChangingView = !!this.currentView;\n\n      // Only destroy the current view if we don't want to `preventDestroy` and if\n      // the view given in the first argument is different than `currentView`\n      var _shouldDestroyView = isDifferentView && !preventDestroy;\n\n      // Only show the view given in the first argument if it is different than\n      // the current view or if we want to re-show the view. Note that if\n      // `_shouldDestroyView` is true, then `_shouldShowView` is also necessarily true.\n      var _shouldShowView = isDifferentView || forceShow;\n\n      if (isChangingView) {\n        this.triggerMethod('before:swapOut', this.currentView, this, options);\n      }\n\n      if (this.currentView) {\n        delete this.currentView._parent;\n      }\n\n      if (_shouldDestroyView) {\n        this.empty();\n\n      // A `destroy` event is attached to the clean up manually removed views.\n      // We need to detach this event when a new view is going to be shown as it\n      // is no longer relevant.\n      } else if (isChangingView && _shouldShowView) {\n        this.currentView.off('destroy', this.empty, this);\n      }\n\n      if (_shouldShowView) {\n\n        // We need to listen for if a view is destroyed\n        // in a way other than through the region.\n        // If this happens we need to remove the reference\n        // to the currentView since once a view has been destroyed\n        // we can not reuse it.\n        view.once('destroy', this.empty, this);\n        view.render();\n\n        view._parent = this;\n\n        if (isChangingView) {\n          this.triggerMethod('before:swap', view, this, options);\n        }\n\n        this.triggerMethod('before:show', view, this, options);\n        Marionette.triggerMethodOn(view, 'before:show', view, this, options);\n\n        if (isChangingView) {\n          this.triggerMethod('swapOut', this.currentView, this, options);\n        }\n\n        // An array of views that we're about to display\n        var attachedRegion = Marionette.isNodeAttached(this.el);\n\n        // The views that we're about to attach to the document\n        // It's important that we prevent _getNestedViews from being executed unnecessarily\n        // as it's a potentially-slow method\n        var displayedViews = [];\n\n        var triggerBeforeAttach = showOptions.triggerBeforeAttach || this.triggerBeforeAttach;\n        var triggerAttach = showOptions.triggerAttach || this.triggerAttach;\n\n        if (attachedRegion && triggerBeforeAttach) {\n          displayedViews = this._displayedViews(view);\n          this._triggerAttach(displayedViews, 'before:');\n        }\n\n        this.attachHtml(view);\n        this.currentView = view;\n\n        if (attachedRegion && triggerAttach) {\n          displayedViews = this._displayedViews(view);\n          this._triggerAttach(displayedViews);\n        }\n\n        if (isChangingView) {\n          this.triggerMethod('swap', view, this, options);\n        }\n\n        this.triggerMethod('show', view, this, options);\n        Marionette.triggerMethodOn(view, 'show', view, this, options);\n\n        return this;\n      }\n\n      return this;\n    },\n\n    triggerBeforeAttach: true,\n    triggerAttach: true,\n\n    _triggerAttach: function(views, prefix) {\n      var eventName = (prefix || '') + 'attach';\n      _.each(views, function(view) {\n        Marionette.triggerMethodOn(view, eventName, view, this);\n      }, this);\n    },\n\n    _displayedViews: function(view) {\n      return _.union([view], _.result(view, '_getNestedViews') || []);\n    },\n\n    _ensureElement: function(){\n      if (!_.isObject(this.el)) {\n        this.$el = this.getEl(this.el);\n        this.el = this.$el[0];\n      }\n\n      if (!this.$el || this.$el.length === 0) {\n        if (this.getOption('allowMissingEl')) {\n          return false;\n        } else {\n          throw new Marionette.Error('An \"el\" ' + this.$el.selector + ' must exist in DOM');\n        }\n      }\n      return true;\n    },\n\n    _ensureViewIsIntact: function(view) {\n      if (!view) {\n        throw new Marionette.Error({\n          name: 'ViewNotValid',\n          message: 'The view passed is undefined and therefore invalid. You must pass a view instance to show.'\n        });\n      }\n\n      if (view.isDestroyed) {\n        throw new Marionette.Error({\n          name: 'ViewDestroyedError',\n          message: 'View (cid: \"' + view.cid + '\") has already been destroyed and cannot be used.'\n        });\n      }\n    },\n\n    // Override this method to change how the region finds the\n    // DOM element that it manages. Return a jQuery selector object.\n    getEl: function(el) {\n      return Backbone.$(el);\n    },\n\n    // Override this method to change how the new view is\n    // appended to the `$el` that the region is managing\n    attachHtml: function(view) {\n      // empty the node and append new view\n      // We can not use `.innerHTML` due to the fact that IE\n      // will not let us clear the html of tables and selects.\n      // We also do not want to use the more declarative `empty` method\n      // that jquery exposes since `.empty` loops over all of the children DOM\n      // nodes and unsets the listeners on each node. While this seems like\n      // a desirable thing, it comes at quite a high perf cost. For that reason\n      // we are simply clearing the html contents of the node.\n      this.$el.html('');\n      this.el.appendChild(view.el);\n    },\n\n    // Destroy the current view, if there is one. If there is no\n    // current view, it does nothing and returns immediately.\n    empty: function() {\n      var view = this.currentView;\n\n      // If there is no view in the region\n      // we should not remove anything\n      if (!view) { return; }\n\n      view.off('destroy', this.empty, this);\n      this.triggerMethod('before:empty', view);\n      this._destroyView();\n      this.triggerMethod('empty', view);\n\n      // Remove region pointer to the currentView\n      delete this.currentView;\n      return this;\n    },\n\n    // call 'destroy' or 'remove', depending on which is found\n    // on the view (if showing a raw Backbone view or a Marionette View)\n    _destroyView: function() {\n      var view = this.currentView;\n\n      if (view.destroy && !view.isDestroyed) {\n        view.destroy();\n      } else if (view.remove) {\n        view.remove();\n\n        // appending isDestroyed to raw Backbone View allows regions\n        // to throw a ViewDestroyedError for this view\n        view.isDestroyed = true;\n      }\n    },\n\n    // Attach an existing view to the region. This\n    // will not call `render` or `onShow` for the new view,\n    // and will not replace the current HTML for the `el`\n    // of the region.\n    attachView: function(view) {\n      this.currentView = view;\n      return this;\n    },\n\n    // Checks whether a view is currently present within\n    // the region. Returns `true` if there is and `false` if\n    // no view is present.\n    hasView: function() {\n      return !!this.currentView;\n    },\n\n    // Reset the region by destroying any existing view and\n    // clearing out the cached `$el`. The next time a view\n    // is shown via this region, the region will re-query the\n    // DOM for the region's `el`.\n    reset: function() {\n      this.empty();\n\n      if (this.$el) {\n        this.el = this.$el.selector;\n      }\n\n      delete this.$el;\n      return this;\n    }\n\n  },\n\n  // Static Methods\n  {\n\n    // Build an instance of a region by passing in a configuration object\n    // and a default region class to use if none is specified in the config.\n    //\n    // The config object should either be a string as a jQuery DOM selector,\n    // a Region class directly, or an object literal that specifies a selector,\n    // a custom regionClass, and any options to be supplied to the region:\n    //\n    // ```js\n    // {\n    //   selector: \"#foo\",\n    //   regionClass: MyCustomRegion,\n    //   allowMissingEl: false\n    // }\n    // ```\n    //\n    buildRegion: function(regionConfig, DefaultRegionClass) {\n      if (_.isString(regionConfig)) {\n        return this._buildRegionFromSelector(regionConfig, DefaultRegionClass);\n      }\n\n      if (regionConfig.selector || regionConfig.el || regionConfig.regionClass) {\n        return this._buildRegionFromObject(regionConfig, DefaultRegionClass);\n      }\n\n      if (_.isFunction(regionConfig)) {\n        return this._buildRegionFromRegionClass(regionConfig);\n      }\n\n      throw new Marionette.Error({\n        message: 'Improper region configuration type.',\n        url: 'marionette.region.html#region-configuration-types'\n      });\n    },\n\n    // Build the region from a string selector like '#foo-region'\n    _buildRegionFromSelector: function(selector, DefaultRegionClass) {\n      return new DefaultRegionClass({ el: selector });\n    },\n\n    // Build the region from a configuration object\n    // ```js\n    // { selector: '#foo', regionClass: FooRegion, allowMissingEl: false }\n    // ```\n    _buildRegionFromObject: function(regionConfig, DefaultRegionClass) {\n      var RegionClass = regionConfig.regionClass || DefaultRegionClass;\n      var options = _.omit(regionConfig, 'selector', 'regionClass');\n\n      if (regionConfig.selector && !options.el) {\n        options.el = regionConfig.selector;\n      }\n\n      var region = new RegionClass(options);\n\n      // override the `getEl` function if we have a parentEl\n      // this must be overridden to ensure the selector is found\n      // on the first use of the region. if we try to assign the\n      // region's `el` to `parentEl.find(selector)` in the object\n      // literal to build the region, the element will not be\n      // guaranteed to be in the DOM already, and will cause problems\n      if (regionConfig.parentEl) {\n        region.getEl = function(el) {\n          if (_.isObject(el)) {\n            return Backbone.$(el);\n          }\n          var parentEl = regionConfig.parentEl;\n          if (_.isFunction(parentEl)) {\n            parentEl = parentEl();\n          }\n          return parentEl.find(el);\n        };\n      }\n\n      return region;\n    },\n\n    // Build the region directly from a given `RegionClass`\n    _buildRegionFromRegionClass: function(RegionClass) {\n      return new RegionClass();\n    }\n  });\n\n  // Region Manager\n  // --------------\n\n  // Manage one or more related `Marionette.Region` objects.\n  Marionette.RegionManager = Marionette.Controller.extend({\n    constructor: function(options) {\n      this._regions = {};\n\n      Marionette.Controller.call(this, options);\n\n      this.addRegions(this.getOption('regions'));\n    },\n\n    // Add multiple regions using an object literal or a\n    // function that returns an object literal, where\n    // each key becomes the region name, and each value is\n    // the region definition.\n    addRegions: function(regionDefinitions, defaults) {\n      if (_.isFunction(regionDefinitions)) {\n        regionDefinitions = regionDefinitions.apply(this, arguments);\n      }\n\n      var regions = {};\n\n      _.each(regionDefinitions, function(definition, name) {\n        if (_.isString(definition)) {\n          definition = {selector: definition};\n        }\n\n        if (definition.selector) {\n          definition = _.defaults({}, definition, defaults);\n        }\n\n        var region = this.addRegion(name, definition);\n        regions[name] = region;\n      }, this);\n\n      return regions;\n    },\n\n    // Add an individual region to the region manager,\n    // and return the region instance\n    addRegion: function(name, definition) {\n      var region;\n\n      if (definition instanceof Marionette.Region) {\n        region = definition;\n      } else {\n        region = Marionette.Region.buildRegion(definition, Marionette.Region);\n      }\n\n      this.triggerMethod('before:add:region', name, region);\n\n      region._parent = this;\n      this._store(name, region);\n\n      this.triggerMethod('add:region', name, region);\n      return region;\n    },\n\n    // Get a region by name\n    get: function(name) {\n      return this._regions[name];\n    },\n\n    // Gets all the regions contained within\n    // the `regionManager` instance.\n    getRegions: function(){\n      return _.clone(this._regions);\n    },\n\n    // Remove a region by name\n    removeRegion: function(name) {\n      var region = this._regions[name];\n      this._remove(name, region);\n\n      return region;\n    },\n\n    // Empty all regions in the region manager, and\n    // remove them\n    removeRegions: function() {\n      var regions = this.getRegions();\n      _.each(this._regions, function(region, name) {\n        this._remove(name, region);\n      }, this);\n\n      return regions;\n    },\n\n    // Empty all regions in the region manager, but\n    // leave them attached\n    emptyRegions: function() {\n      var regions = this.getRegions();\n      _.invoke(regions, 'empty');\n      return regions;\n    },\n\n    // Destroy all regions and shut down the region\n    // manager entirely\n    destroy: function() {\n      this.removeRegions();\n      return Marionette.Controller.prototype.destroy.apply(this, arguments);\n    },\n\n    // internal method to store regions\n    _store: function(name, region) {\n      this._regions[name] = region;\n      this._setLength();\n    },\n\n    // internal method to remove a region\n    _remove: function(name, region) {\n      this.triggerMethod('before:remove:region', name, region);\n      region.empty();\n      region.stopListening();\n\n      delete region._parent;\n      delete this._regions[name];\n      this._setLength();\n      this.triggerMethod('remove:region', name, region);\n    },\n\n    // set the number of regions current held\n    _setLength: function() {\n      this.length = _.size(this._regions);\n    }\n  });\n\n  Marionette.actAsCollection(Marionette.RegionManager.prototype, '_regions');\n\n\n  // Template Cache\n  // --------------\n\n  // Manage templates stored in `<script>` blocks,\n  // caching them for faster access.\n  Marionette.TemplateCache = function(templateId) {\n    this.templateId = templateId;\n  };\n\n  // TemplateCache object-level methods. Manage the template\n  // caches from these method calls instead of creating\n  // your own TemplateCache instances\n  _.extend(Marionette.TemplateCache, {\n    templateCaches: {},\n\n    // Get the specified template by id. Either\n    // retrieves the cached version, or loads it\n    // from the DOM.\n    get: function(templateId) {\n      var cachedTemplate = this.templateCaches[templateId];\n\n      if (!cachedTemplate) {\n        cachedTemplate = new Marionette.TemplateCache(templateId);\n        this.templateCaches[templateId] = cachedTemplate;\n      }\n\n      return cachedTemplate.load();\n    },\n\n    // Clear templates from the cache. If no arguments\n    // are specified, clears all templates:\n    // `clear()`\n    //\n    // If arguments are specified, clears each of the\n    // specified templates from the cache:\n    // `clear(\"#t1\", \"#t2\", \"...\")`\n    clear: function() {\n      var i;\n      var args = _.toArray(arguments);\n      var length = args.length;\n\n      if (length > 0) {\n        for (i = 0; i < length; i++) {\n          delete this.templateCaches[args[i]];\n        }\n      } else {\n        this.templateCaches = {};\n      }\n    }\n  });\n\n  // TemplateCache instance methods, allowing each\n  // template cache object to manage its own state\n  // and know whether or not it has been loaded\n  _.extend(Marionette.TemplateCache.prototype, {\n\n    // Internal method to load the template\n    load: function() {\n      // Guard clause to prevent loading this template more than once\n      if (this.compiledTemplate) {\n        return this.compiledTemplate;\n      }\n\n      // Load the template and compile it\n      var template = this.loadTemplate(this.templateId);\n      this.compiledTemplate = this.compileTemplate(template);\n\n      return this.compiledTemplate;\n    },\n\n    // Load a template from the DOM, by default. Override\n    // this method to provide your own template retrieval\n    // For asynchronous loading with AMD/RequireJS, consider\n    // using a template-loader plugin as described here:\n    // https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs\n    loadTemplate: function(templateId) {\n      var template = Backbone.$(templateId).html();\n\n      if (!template || template.length === 0) {\n        throw new Marionette.Error({\n          name: 'NoTemplateError',\n          message: 'Could not find template: \"' + templateId + '\"'\n        });\n      }\n\n      return template;\n    },\n\n    // Pre-compile the template before caching it. Override\n    // this method if you do not need to pre-compile a template\n    // (JST / RequireJS for example) or if you want to change\n    // the template engine used (Handebars, etc).\n    compileTemplate: function(rawTemplate) {\n      return _.template(rawTemplate);\n    }\n  });\n\n  // Renderer\n  // --------\n\n  // Render a template with data by passing in the template\n  // selector and the data to render.\n  Marionette.Renderer = {\n\n    // Render a template with data. The `template` parameter is\n    // passed to the `TemplateCache` object to retrieve the\n    // template function. Override this method to provide your own\n    // custom rendering and template handling for all of Marionette.\n    render: function(template, data) {\n      if (!template) {\n        throw new Marionette.Error({\n          name: 'TemplateNotFoundError',\n          message: 'Cannot render the template since its false, null or undefined.'\n        });\n      }\n\n      var templateFunc;\n      if (typeof template === 'function') {\n        templateFunc = template;\n      } else {\n        templateFunc = Marionette.TemplateCache.get(template);\n      }\n\n      return templateFunc(data);\n    }\n  };\n\n\n  /* jshint maxlen: 114, nonew: false */\n  // View\n  // ----\n\n  // The core view class that other Marionette views extend from.\n  Marionette.View = Backbone.View.extend({\n\n    constructor: function(options) {\n      _.bindAll(this, 'render');\n\n      options = _.isFunction(options) ? options.call(this) : options;\n\n      // this exposes view options to the view initializer\n      // this is a backfill since backbone removed the assignment\n      // of this.options\n      // at some point however this may be removed\n      this.options = _.extend({}, _.result(this, 'options'), options);\n\n      this._behaviors = Marionette.Behaviors(this);\n\n      Backbone.View.apply(this, arguments);\n\n      Marionette.MonitorDOMRefresh(this);\n      this.on('show', this.onShowCalled);\n    },\n\n    // Get the template for this view\n    // instance. You can set a `template` attribute in the view\n    // definition or pass a `template: \"whatever\"` parameter in\n    // to the constructor options.\n    getTemplate: function() {\n      return this.getOption('template');\n    },\n\n    // Serialize a model by returning its attributes. Clones\n    // the attributes to allow modification.\n    serializeModel: function(model){\n      return model.toJSON.apply(model, _.rest(arguments));\n    },\n\n    // Mix in template helper methods. Looks for a\n    // `templateHelpers` attribute, which can either be an\n    // object literal, or a function that returns an object\n    // literal. All methods and attributes from this object\n    // are copies to the object passed in.\n    mixinTemplateHelpers: function(target) {\n      target = target || {};\n      var templateHelpers = this.getOption('templateHelpers');\n      if (_.isFunction(templateHelpers)) {\n        templateHelpers = templateHelpers.call(this);\n      }\n      return _.extend(target, templateHelpers);\n    },\n\n    // normalize the keys of passed hash with the views `ui` selectors.\n    // `{\"@ui.foo\": \"bar\"}`\n    normalizeUIKeys: function(hash) {\n      var uiBindings = _.result(this, '_uiBindings');\n      return Marionette.normalizeUIKeys(hash, uiBindings || _.result(this, 'ui'));\n    },\n\n    // normalize the values of passed hash with the views `ui` selectors.\n    // `{foo: \"@ui.bar\"}`\n    normalizeUIValues: function(hash) {\n      var ui = _.result(this, 'ui');\n      var uiBindings = _.result(this, '_uiBindings');\n      return Marionette.normalizeUIValues(hash, uiBindings || ui);\n    },\n\n    // Configure `triggers` to forward DOM events to view\n    // events. `triggers: {\"click .foo\": \"do:foo\"}`\n    configureTriggers: function() {\n      if (!this.triggers) { return; }\n\n      // Allow `triggers` to be configured as a function\n      var triggers = this.normalizeUIKeys(_.result(this, 'triggers'));\n\n      // Configure the triggers, prevent default\n      // action and stop propagation of DOM events\n      return _.reduce(triggers, function(events, value, key) {\n        events[key] = this._buildViewTrigger(value);\n        return events;\n      }, {}, this);\n    },\n\n    // Overriding Backbone.View's delegateEvents to handle\n    // the `triggers`, `modelEvents`, and `collectionEvents` configuration\n    delegateEvents: function(events) {\n      this._delegateDOMEvents(events);\n      this.bindEntityEvents(this.model, this.getOption('modelEvents'));\n      this.bindEntityEvents(this.collection, this.getOption('collectionEvents'));\n\n      _.each(this._behaviors, function(behavior) {\n        behavior.bindEntityEvents(this.model, behavior.getOption('modelEvents'));\n        behavior.bindEntityEvents(this.collection, behavior.getOption('collectionEvents'));\n      }, this);\n\n      return this;\n    },\n\n    // internal method to delegate DOM events and triggers\n    _delegateDOMEvents: function(eventsArg) {\n      var events = eventsArg || this.events;\n      if (_.isFunction(events)) { events = events.call(this); }\n\n      // normalize ui keys\n      events = this.normalizeUIKeys(events);\n      if(_.isUndefined(eventsArg)) {this.events = events;}\n\n      var combinedEvents = {};\n\n      // look up if this view has behavior events\n      var behaviorEvents = _.result(this, 'behaviorEvents') || {};\n      var triggers = this.configureTriggers();\n      var behaviorTriggers = _.result(this, 'behaviorTriggers') || {};\n\n      // behavior events will be overriden by view events and or triggers\n      _.extend(combinedEvents, behaviorEvents, events, triggers, behaviorTriggers);\n\n      Backbone.View.prototype.delegateEvents.call(this, combinedEvents);\n    },\n\n    // Overriding Backbone.View's undelegateEvents to handle unbinding\n    // the `triggers`, `modelEvents`, and `collectionEvents` config\n    undelegateEvents: function() {\n      Backbone.View.prototype.undelegateEvents.apply(this, arguments);\n\n      this.unbindEntityEvents(this.model, this.getOption('modelEvents'));\n      this.unbindEntityEvents(this.collection, this.getOption('collectionEvents'));\n\n      _.each(this._behaviors, function(behavior) {\n        behavior.unbindEntityEvents(this.model, behavior.getOption('modelEvents'));\n        behavior.unbindEntityEvents(this.collection, behavior.getOption('collectionEvents'));\n      }, this);\n\n      return this;\n    },\n\n    // Internal method, handles the `show` event.\n    onShowCalled: function() {},\n\n    // Internal helper method to verify whether the view hasn't been destroyed\n    _ensureViewIsIntact: function() {\n      if (this.isDestroyed) {\n        throw new Marionette.Error({\n          name: 'ViewDestroyedError',\n          message: 'View (cid: \"' + this.cid + '\") has already been destroyed and cannot be used.'\n        });\n      }\n    },\n\n    // Default `destroy` implementation, for removing a view from the\n    // DOM and unbinding it. Regions will call this method\n    // for you. You can specify an `onDestroy` method in your view to\n    // add custom code that is called after the view is destroyed.\n    destroy: function() {\n      if (this.isDestroyed) { return; }\n\n      var args = _.toArray(arguments);\n\n      this.triggerMethod.apply(this, ['before:destroy'].concat(args));\n\n      // mark as destroyed before doing the actual destroy, to\n      // prevent infinite loops within \"destroy\" event handlers\n      // that are trying to destroy other views\n      this.isDestroyed = true;\n      this.triggerMethod.apply(this, ['destroy'].concat(args));\n\n      // unbind UI elements\n      this.unbindUIElements();\n\n      // remove the view from the DOM\n      this.remove();\n\n      // Call destroy on each behavior after\n      // destroying the view.\n      // This unbinds event listeners\n      // that behaviors have registered for.\n      _.invoke(this._behaviors, 'destroy', args);\n\n      return this;\n    },\n\n    bindUIElements: function() {\n      this._bindUIElements();\n      _.invoke(this._behaviors, this._bindUIElements);\n    },\n\n    // This method binds the elements specified in the \"ui\" hash inside the view's code with\n    // the associated jQuery selectors.\n    _bindUIElements: function() {\n      if (!this.ui) { return; }\n\n      // store the ui hash in _uiBindings so they can be reset later\n      // and so re-rendering the view will be able to find the bindings\n      if (!this._uiBindings) {\n        this._uiBindings = this.ui;\n      }\n\n      // get the bindings result, as a function or otherwise\n      var bindings = _.result(this, '_uiBindings');\n\n      // empty the ui so we don't have anything to start with\n      this.ui = {};\n\n      // bind each of the selectors\n      _.each(_.keys(bindings), function(key) {\n        var selector = bindings[key];\n        this.ui[key] = this.$(selector);\n      }, this);\n    },\n\n    // This method unbinds the elements specified in the \"ui\" hash\n    unbindUIElements: function() {\n      this._unbindUIElements();\n      _.invoke(this._behaviors, this._unbindUIElements);\n    },\n\n    _unbindUIElements: function() {\n      if (!this.ui || !this._uiBindings) { return; }\n\n      // delete all of the existing ui bindings\n      _.each(this.ui, function($el, name) {\n        delete this.ui[name];\n      }, this);\n\n      // reset the ui element to the original bindings configuration\n      this.ui = this._uiBindings;\n      delete this._uiBindings;\n    },\n\n    // Internal method to create an event handler for a given `triggerDef` like\n    // 'click:foo'\n    _buildViewTrigger: function(triggerDef) {\n      var hasOptions = _.isObject(triggerDef);\n\n      var options = _.defaults({}, (hasOptions ? triggerDef : {}), {\n        preventDefault: true,\n        stopPropagation: true\n      });\n\n      var eventName = hasOptions ? options.event : triggerDef;\n\n      return function(e) {\n        if (e) {\n          if (e.preventDefault && options.preventDefault) {\n            e.preventDefault();\n          }\n\n          if (e.stopPropagation && options.stopPropagation) {\n            e.stopPropagation();\n          }\n        }\n\n        var args = {\n          view: this,\n          model: this.model,\n          collection: this.collection\n        };\n\n        this.triggerMethod(eventName, args);\n      };\n    },\n\n    setElement: function() {\n      var ret = Backbone.View.prototype.setElement.apply(this, arguments);\n\n      // proxy behavior $el to the view's $el.\n      // This is needed because a view's $el proxy\n      // is not set until after setElement is called.\n      _.invoke(this._behaviors, 'proxyViewProperties', this);\n\n      return ret;\n    },\n\n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: function() {\n      var triggerMethod = Marionette._triggerMethod;\n      var ret = triggerMethod(this, arguments);\n      var behaviors = this._behaviors;\n      // Use good ol' for as this is a very hot function\n      for (var i = 0, length = behaviors && behaviors.length; i < length; i++) {\n        triggerMethod(behaviors[i], arguments);\n      }\n\n      return ret;\n    },\n\n    // This method returns any views that are immediate\n    // children of this view\n    _getImmediateChildren: function() {\n      return [];\n    },\n\n    // Returns an array of every nested view within this view\n    _getNestedViews: function() {\n      var children = this._getImmediateChildren();\n\n      if (!children.length) { return children; }\n\n      return _.reduce(children, function(memo, view) {\n        if (!view._getNestedViews) { return memo; }\n        return memo.concat(view._getNestedViews());\n      }, children);\n    },\n\n    // Imports the \"normalizeMethods\" to transform hashes of\n    // events=>function references/names to a hash of events=>function references\n    normalizeMethods: Marionette.normalizeMethods,\n\n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption,\n\n    // Proxy `bindEntityEvents` to enable binding view's events from another entity.\n    bindEntityEvents: Marionette.proxyBindEntityEvents,\n\n    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.\n    unbindEntityEvents: Marionette.proxyUnbindEntityEvents\n  });\n\n  // Item View\n  // ---------\n\n  // A single item view implementation that contains code for rendering\n  // with underscore.js templates, serializing the view's model or collection,\n  // and calling several methods on extended views, such as `onRender`.\n  Marionette.ItemView = Marionette.View.extend({\n\n    // Setting up the inheritance chain which allows changes to\n    // Marionette.View.prototype.constructor which allows overriding\n    constructor: function() {\n      Marionette.View.apply(this, arguments);\n    },\n\n    // Serialize the model or collection for the view. If a model is\n    // found, the view's `serializeModel` is called. If a collection is found,\n    // each model in the collection is serialized by calling\n    // the view's `serializeCollection` and put into an `items` array in\n    // the resulting data. If both are found, defaults to the model.\n    // You can override the `serializeData` method in your own view definition,\n    // to provide custom serialization for your view's data.\n    serializeData: function(){\n      if (!this.model && !this.collection) {\n        return {};\n      }\n\n      var args = [this.model || this.collection];\n      if (arguments.length) {\n        args.push.apply(args, arguments);\n      }\n\n      if (this.model) {\n        return this.serializeModel.apply(this, args);\n      } else {\n        return {\n          items: this.serializeCollection.apply(this, args)\n        };\n      }\n    },\n\n    // Serialize a collection by serializing each of its models.\n    serializeCollection: function(collection){\n      return collection.toJSON.apply(collection, _.rest(arguments));\n    },\n\n    // Render the view, defaulting to underscore.js templates.\n    // You can override this in your view definition to provide\n    // a very specific rendering for your view. In general, though,\n    // you should override the `Marionette.Renderer` object to\n    // change how Marionette renders views.\n    render: function() {\n      this._ensureViewIsIntact();\n\n      this.triggerMethod('before:render', this);\n\n      this._renderTemplate();\n      this.bindUIElements();\n\n      this.triggerMethod('render', this);\n\n      return this;\n    },\n\n    // Internal method to render the template with the serialized data\n    // and template helpers via the `Marionette.Renderer` object.\n    // Throws an `UndefinedTemplateError` error if the template is\n    // any falsely value but literal `false`.\n    _renderTemplate: function() {\n      var template = this.getTemplate();\n\n      // Allow template-less item views\n      if (template === false) {\n        return;\n      }\n\n      if (!template) {\n        throw new Marionette.Error({\n          name: 'UndefinedTemplateError',\n          message: 'Cannot render the template since it is null or undefined.'\n        });\n      }\n\n      // Add in entity data and template helpers\n      var data = this.serializeData();\n      data = this.mixinTemplateHelpers(data);\n\n      // Render and add to el\n      var html = Marionette.Renderer.render(template, data, this);\n      this.attachElContent(html);\n\n      return this;\n    },\n\n    // Attaches the content of a given view.\n    // This method can be overridden to optimize rendering,\n    // or to render in a non standard way.\n    //\n    // For example, using `innerHTML` instead of `$el.html`\n    //\n    // ```js\n    // attachElContent: function(html) {\n    //   this.el.innerHTML = html;\n    //   return this;\n    // }\n    // ```\n    attachElContent: function(html) {\n      this.$el.html(html);\n\n      return this;\n    }\n  });\n\n  /* jshint maxstatements: 14 */\n\n  // Collection View\n  // ---------------\n\n  // A view that iterates over a Backbone.Collection\n  // and renders an individual child view for each model.\n  Marionette.CollectionView = Marionette.View.extend({\n\n    // used as the prefix for child view events\n    // that are forwarded through the collectionview\n    childViewEventPrefix: 'childview',\n\n    // constructor\n    // option to pass `{sort: false}` to prevent the `CollectionView` from\n    // maintaining the sorted order of the collection.\n    // This will fallback onto appending childView's to the end.\n    constructor: function(options){\n      var initOptions = options || {};\n      if (_.isUndefined(this.sort)){\n        this.sort = _.isUndefined(initOptions.sort) ? true : initOptions.sort;\n      }\n\n      this.once('render', this._initialEvents);\n      this._initChildViewStorage();\n\n      Marionette.View.apply(this, arguments);\n\n      this.initRenderBuffer();\n    },\n\n    // Instead of inserting elements one by one into the page,\n    // it's much more performant to insert elements into a document\n    // fragment and then insert that document fragment into the page\n    initRenderBuffer: function() {\n      this.elBuffer = document.createDocumentFragment();\n      this._bufferedChildren = [];\n    },\n\n    startBuffering: function() {\n      this.initRenderBuffer();\n      this.isBuffering = true;\n    },\n\n    endBuffering: function() {\n      this.isBuffering = false;\n      this._triggerBeforeShowBufferedChildren();\n      this.attachBuffer(this, this.elBuffer);\n      this._triggerShowBufferedChildren();\n      this.initRenderBuffer();\n    },\n\n    _triggerBeforeShowBufferedChildren: function() {\n      if (this._isShown) {\n        _.each(this._bufferedChildren, _.partial(this._triggerMethodOnChild, 'before:show'));\n      }\n    },\n\n    _triggerShowBufferedChildren: function() {\n      if (this._isShown) {\n        _.each(this._bufferedChildren, _.partial(this._triggerMethodOnChild, 'show'));\n\n        this._bufferedChildren = [];\n      }\n    },\n\n    // Internal method for _.each loops to call `Marionette.triggerMethodOn` on\n    // a child view\n    _triggerMethodOnChild: function(event, childView) {\n      Marionette.triggerMethodOn(childView, event);\n    },\n\n    // Configured the initial events that the collection view\n    // binds to.\n    _initialEvents: function() {\n      if (this.collection) {\n        this.listenTo(this.collection, 'add', this._onCollectionAdd);\n        this.listenTo(this.collection, 'remove', this._onCollectionRemove);\n        this.listenTo(this.collection, 'reset', this.render);\n\n        if (this.sort) {\n          this.listenTo(this.collection, 'sort', this._sortViews);\n        }\n      }\n    },\n\n    // Handle a child added to the collection\n    _onCollectionAdd: function(child) {\n      this.destroyEmptyView();\n      var ChildView = this.getChildView(child);\n      var index = this.collection.indexOf(child);\n      this.addChild(child, ChildView, index);\n    },\n\n    // get the child view by model it holds, and remove it\n    _onCollectionRemove: function(model) {\n      var view = this.children.findByModel(model);\n      this.removeChildView(view);\n      this.checkEmpty();\n    },\n\n    // Override from `Marionette.View` to trigger show on child views\n    onShowCalled: function() {\n      this.children.each(_.partial(this._triggerMethodOnChild, 'show'));\n    },\n\n    // Render children views. Override this method to\n    // provide your own implementation of a render function for\n    // the collection view.\n    render: function() {\n      this._ensureViewIsIntact();\n      this.triggerMethod('before:render', this);\n      this._renderChildren();\n      this.triggerMethod('render', this);\n      return this;\n    },\n\n    // Render view after sorting. Override this method to\n    // change how the view renders after a `sort` on the collection.\n    // An example of this would be to only `renderChildren` in a `CompositeView`\n    // rather than the full view.\n    resortView: function() {\n      this.render();\n    },\n\n    // Internal method. This checks for any changes in the order of the collection.\n    // If the index of any view doesn't match, it will render.\n    _sortViews: function() {\n      // check for any changes in sort order of views\n      var orderChanged = this.collection.find(function(item, index){\n        var view = this.children.findByModel(item);\n        return !view || view._index !== index;\n      }, this);\n\n      if (orderChanged) {\n        this.resortView();\n      }\n    },\n\n    // Internal reference to what index a `emptyView` is.\n    _emptyViewIndex: -1,\n\n    // Internal method. Separated so that CompositeView can have\n    // more control over events being triggered, around the rendering\n    // process\n    _renderChildren: function() {\n      this.destroyEmptyView();\n      this.destroyChildren();\n\n      if (this.isEmpty(this.collection)) {\n        this.showEmptyView();\n      } else {\n        this.triggerMethod('before:render:collection', this);\n        this.startBuffering();\n        this.showCollection();\n        this.endBuffering();\n        this.triggerMethod('render:collection', this);\n      }\n    },\n\n    // Internal method to loop through collection and show each child view.\n    showCollection: function() {\n      var ChildView;\n      this.collection.each(function(child, index) {\n        ChildView = this.getChildView(child);\n        this.addChild(child, ChildView, index);\n      }, this);\n    },\n\n    // Internal method to show an empty view in place of\n    // a collection of child views, when the collection is empty\n    showEmptyView: function() {\n      var EmptyView = this.getEmptyView();\n\n      if (EmptyView && !this._showingEmptyView) {\n        this.triggerMethod('before:render:empty');\n\n        this._showingEmptyView = true;\n        var model = new Backbone.Model();\n        this.addEmptyView(model, EmptyView);\n\n        this.triggerMethod('render:empty');\n      }\n    },\n\n    // Internal method to destroy an existing emptyView instance\n    // if one exists. Called when a collection view has been\n    // rendered empty, and then a child is added to the collection.\n    destroyEmptyView: function() {\n      if (this._showingEmptyView) {\n        this.triggerMethod('before:remove:empty');\n\n        this.destroyChildren();\n        delete this._showingEmptyView;\n\n        this.triggerMethod('remove:empty');\n      }\n    },\n\n    // Retrieve the empty view class\n    getEmptyView: function() {\n      return this.getOption('emptyView');\n    },\n\n    // Render and show the emptyView. Similar to addChild method\n    // but \"child:added\" events are not fired, and the event from\n    // emptyView are not forwarded\n    addEmptyView: function(child, EmptyView) {\n\n      // get the emptyViewOptions, falling back to childViewOptions\n      var emptyViewOptions = this.getOption('emptyViewOptions') ||\n                            this.getOption('childViewOptions');\n\n      if (_.isFunction(emptyViewOptions)){\n        emptyViewOptions = emptyViewOptions.call(this, child, this._emptyViewIndex);\n      }\n\n      // build the empty view\n      var view = this.buildChildView(child, EmptyView, emptyViewOptions);\n\n      view._parent = this;\n\n      // Proxy emptyView events\n      this.proxyChildEvents(view);\n\n      // trigger the 'before:show' event on `view` if the collection view\n      // has already been shown\n      if (this._isShown) {\n        Marionette.triggerMethodOn(view, 'before:show');\n      }\n\n      // Store the `emptyView` like a `childView` so we can properly\n      // remove and/or close it later\n      this.children.add(view);\n\n      // Render it and show it\n      this.renderChildView(view, this._emptyViewIndex);\n\n      // call the 'show' method if the collection view\n      // has already been shown\n      if (this._isShown) {\n        Marionette.triggerMethodOn(view, 'show');\n      }\n    },\n\n    // Retrieve the `childView` class, either from `this.options.childView`\n    // or from the `childView` in the object definition. The \"options\"\n    // takes precedence.\n    // This method receives the model that will be passed to the instance\n    // created from this `childView`. Overriding methods may use the child\n    // to determine what `childView` class to return.\n    getChildView: function(child) {\n      var childView = this.getOption('childView');\n\n      if (!childView) {\n        throw new Marionette.Error({\n          name: 'NoChildViewError',\n          message: 'A \"childView\" must be specified'\n        });\n      }\n\n      return childView;\n    },\n\n    // Render the child's view and add it to the\n    // HTML for the collection view at a given index.\n    // This will also update the indices of later views in the collection\n    // in order to keep the children in sync with the collection.\n    addChild: function(child, ChildView, index) {\n      var childViewOptions = this.getOption('childViewOptions');\n      if (_.isFunction(childViewOptions)) {\n        childViewOptions = childViewOptions.call(this, child, index);\n      }\n\n      var view = this.buildChildView(child, ChildView, childViewOptions);\n\n      // increment indices of views after this one\n      this._updateIndices(view, true, index);\n\n      this._addChildView(view, index);\n\n      view._parent = this;\n\n      return view;\n    },\n\n    // Internal method. This decrements or increments the indices of views after the\n    // added/removed view to keep in sync with the collection.\n    _updateIndices: function(view, increment, index) {\n      if (!this.sort) {\n        return;\n      }\n\n      if (increment) {\n        // assign the index to the view\n        view._index = index;\n\n        // increment the index of views after this one\n        this.children.each(function (laterView) {\n          if (laterView._index >= view._index) {\n            laterView._index++;\n          }\n        });\n      }\n      else {\n        // decrement the index of views after this one\n        this.children.each(function (laterView) {\n          if (laterView._index >= view._index) {\n            laterView._index--;\n          }\n        });\n      }\n    },\n\n\n    // Internal Method. Add the view to children and render it at\n    // the given index.\n    _addChildView: function(view, index) {\n      // set up the child view event forwarding\n      this.proxyChildEvents(view);\n\n      this.triggerMethod('before:add:child', view);\n\n      // Store the child view itself so we can properly\n      // remove and/or destroy it later\n      this.children.add(view);\n      this.renderChildView(view, index);\n\n      if (this._isShown && !this.isBuffering) {\n        Marionette.triggerMethodOn(view, 'show');\n      }\n\n      this.triggerMethod('add:child', view);\n    },\n\n    // render the child view\n    renderChildView: function(view, index) {\n      view.render();\n      this.attachHtml(this, view, index);\n      return view;\n    },\n\n    // Build a `childView` for a model in the collection.\n    buildChildView: function(child, ChildViewClass, childViewOptions) {\n      var options = _.extend({model: child}, childViewOptions);\n      return new ChildViewClass(options);\n    },\n\n    // Remove the child view and destroy it.\n    // This function also updates the indices of\n    // later views in the collection in order to keep\n    // the children in sync with the collection.\n    removeChildView: function(view) {\n\n      if (view) {\n        this.triggerMethod('before:remove:child', view);\n        // call 'destroy' or 'remove', depending on which is found\n        if (view.destroy) { view.destroy(); }\n        else if (view.remove) { view.remove(); }\n\n        delete view._parent;\n        this.stopListening(view);\n        this.children.remove(view);\n        this.triggerMethod('remove:child', view);\n\n        // decrement the index of views after this one\n        this._updateIndices(view, false);\n      }\n\n      return view;\n    },\n\n    // check if the collection is empty\n    isEmpty: function() {\n      return !this.collection || this.collection.length === 0;\n    },\n\n    // If empty, show the empty view\n    checkEmpty: function() {\n      if (this.isEmpty(this.collection)) {\n        this.showEmptyView();\n      }\n    },\n\n    // You might need to override this if you've overridden attachHtml\n    attachBuffer: function(collectionView, buffer) {\n      collectionView.$el.append(buffer);\n    },\n\n    // Append the HTML to the collection's `el`.\n    // Override this method to do something other\n    // than `.append`.\n    attachHtml: function(collectionView, childView, index) {\n      if (collectionView.isBuffering) {\n        // buffering happens on reset events and initial renders\n        // in order to reduce the number of inserts into the\n        // document, which are expensive.\n        collectionView.elBuffer.appendChild(childView.el);\n        collectionView._bufferedChildren.push(childView);\n      }\n      else {\n        // If we've already rendered the main collection, append\n        // the new child into the correct order if we need to. Otherwise\n        // append to the end.\n        if (!collectionView._insertBefore(childView, index)){\n          collectionView._insertAfter(childView);\n        }\n      }\n    },\n\n    // Internal method. Check whether we need to insert the view into\n    // the correct position.\n    _insertBefore: function(childView, index) {\n      var currentView;\n      var findPosition = this.sort && (index < this.children.length - 1);\n      if (findPosition) {\n        // Find the view after this one\n        currentView = this.children.find(function (view) {\n          return view._index === index + 1;\n        });\n      }\n\n      if (currentView) {\n        currentView.$el.before(childView.el);\n        return true;\n      }\n\n      return false;\n    },\n\n    // Internal method. Append a view to the end of the $el\n    _insertAfter: function(childView) {\n      this.$el.append(childView.el);\n    },\n\n    // Internal method to set up the `children` object for\n    // storing all of the child views\n    _initChildViewStorage: function() {\n      this.children = new Backbone.ChildViewContainer();\n    },\n\n    // Handle cleanup and other destroying needs for the collection of views\n    destroy: function() {\n      if (this.isDestroyed) { return; }\n\n      this.triggerMethod('before:destroy:collection');\n      this.destroyChildren();\n      this.triggerMethod('destroy:collection');\n\n      return Marionette.View.prototype.destroy.apply(this, arguments);\n    },\n\n    // Destroy the child views that this collection view\n    // is holding on to, if any\n    destroyChildren: function() {\n      var childViews = this.children.map(_.identity);\n      this.children.each(this.removeChildView, this);\n      this.checkEmpty();\n      return childViews;\n    },\n\n    // Set up the child view event forwarding. Uses a \"childview:\"\n    // prefix in front of all forwarded events.\n    proxyChildEvents: function(view) {\n      var prefix = this.getOption('childViewEventPrefix');\n\n      // Forward all child view events through the parent,\n      // prepending \"childview:\" to the event name\n      this.listenTo(view, 'all', function() {\n        var args = _.toArray(arguments);\n        var rootEvent = args[0];\n        var childEvents = this.normalizeMethods(_.result(this, 'childEvents'));\n\n        args[0] = prefix + ':' + rootEvent;\n        args.splice(1, 0, view);\n\n        // call collectionView childEvent if defined\n        if (typeof childEvents !== 'undefined' && _.isFunction(childEvents[rootEvent])) {\n          childEvents[rootEvent].apply(this, args.slice(1));\n        }\n\n        this.triggerMethod.apply(this, args);\n      }, this);\n    },\n\n    _getImmediateChildren: function() {\n      return _.values(this.children._views);\n    }\n  });\n\n  /* jshint maxstatements: 17, maxlen: 117 */\n\n  // Composite View\n  // --------------\n\n  // Used for rendering a branch-leaf, hierarchical structure.\n  // Extends directly from CollectionView and also renders an\n  // a child view as `modelView`, for the top leaf\n  Marionette.CompositeView = Marionette.CollectionView.extend({\n\n    // Setting up the inheritance chain which allows changes to\n    // Marionette.CollectionView.prototype.constructor which allows overriding\n    // option to pass '{sort: false}' to prevent the CompositeView from\n    // maintaining the sorted order of the collection.\n    // This will fallback onto appending childView's to the end.\n    constructor: function() {\n      Marionette.CollectionView.apply(this, arguments);\n    },\n\n    // Configured the initial events that the composite view\n    // binds to. Override this method to prevent the initial\n    // events, or to add your own initial events.\n    _initialEvents: function() {\n\n      // Bind only after composite view is rendered to avoid adding child views\n      // to nonexistent childViewContainer\n\n      if (this.collection) {\n        this.listenTo(this.collection, 'add', this._onCollectionAdd);\n        this.listenTo(this.collection, 'remove', this._onCollectionRemove);\n        this.listenTo(this.collection, 'reset', this._renderChildren);\n\n        if (this.sort) {\n          this.listenTo(this.collection, 'sort', this._sortViews);\n        }\n      }\n    },\n\n    // Retrieve the `childView` to be used when rendering each of\n    // the items in the collection. The default is to return\n    // `this.childView` or Marionette.CompositeView if no `childView`\n    // has been defined\n    getChildView: function(child) {\n      var childView = this.getOption('childView') || this.constructor;\n\n      return childView;\n    },\n\n    // Serialize the model for the view.\n    // You can override the `serializeData` method in your own view\n    // definition, to provide custom serialization for your view's data.\n    serializeData: function() {\n      var data = {};\n\n      if (this.model){\n        data = _.partial(this.serializeModel, this.model).apply(this, arguments);\n      }\n\n      return data;\n    },\n\n    // Renders the model and the collection.\n    render: function() {\n      this._ensureViewIsIntact();\n      this.isRendered = true;\n      this.resetChildViewContainer();\n\n      this.triggerMethod('before:render', this);\n\n      this._renderTemplate();\n      this._renderChildren();\n\n      this.triggerMethod('render', this);\n      return this;\n    },\n\n    _renderChildren: function() {\n      if (this.isRendered) {\n        Marionette.CollectionView.prototype._renderChildren.call(this);\n      }\n    },\n\n    // Render the root template that the children\n    // views are appended to\n    _renderTemplate: function() {\n      var data = {};\n      data = this.serializeData();\n      data = this.mixinTemplateHelpers(data);\n\n      this.triggerMethod('before:render:template');\n\n      var template = this.getTemplate();\n      var html = Marionette.Renderer.render(template, data, this);\n      this.attachElContent(html);\n\n      // the ui bindings is done here and not at the end of render since they\n      // will not be available until after the model is rendered, but should be\n      // available before the collection is rendered.\n      this.bindUIElements();\n      this.triggerMethod('render:template');\n    },\n\n    // Attaches the content of the root.\n    // This method can be overridden to optimize rendering,\n    // or to render in a non standard way.\n    //\n    // For example, using `innerHTML` instead of `$el.html`\n    //\n    // ```js\n    // attachElContent: function(html) {\n    //   this.el.innerHTML = html;\n    //   return this;\n    // }\n    // ```\n    attachElContent: function(html) {\n      this.$el.html(html);\n\n      return this;\n    },\n\n    // You might need to override this if you've overridden attachHtml\n    attachBuffer: function(compositeView, buffer) {\n      var $container = this.getChildViewContainer(compositeView);\n      $container.append(buffer);\n    },\n\n    // Internal method. Append a view to the end of the $el.\n    // Overidden from CollectionView to ensure view is appended to\n    // childViewContainer\n    _insertAfter: function (childView) {\n      var $container = this.getChildViewContainer(this, childView);\n      $container.append(childView.el);\n    },\n\n    // Internal method to ensure an `$childViewContainer` exists, for the\n    // `attachHtml` method to use.\n    getChildViewContainer: function(containerView, childView) {\n      if ('$childViewContainer' in containerView) {\n        return containerView.$childViewContainer;\n      }\n\n      var container;\n      var childViewContainer = Marionette.getOption(containerView, 'childViewContainer');\n      if (childViewContainer) {\n\n        var selector = _.isFunction(childViewContainer) ? childViewContainer.call(containerView) : childViewContainer;\n\n        if (selector.charAt(0) === '@' && containerView.ui) {\n          container = containerView.ui[selector.substr(4)];\n        } else {\n          container = containerView.$(selector);\n        }\n\n        if (container.length <= 0) {\n          throw new Marionette.Error({\n            name: 'ChildViewContainerMissingError',\n            message: 'The specified \"childViewContainer\" was not found: ' + containerView.childViewContainer\n          });\n        }\n\n      } else {\n        container = containerView.$el;\n      }\n\n      containerView.$childViewContainer = container;\n      return container;\n    },\n\n    // Internal method to reset the `$childViewContainer` on render\n    resetChildViewContainer: function() {\n      if (this.$childViewContainer) {\n        delete this.$childViewContainer;\n      }\n    }\n  });\n\n  // Layout View\n  // -----------\n\n  // Used for managing application layoutViews, nested layoutViews and\n  // multiple regions within an application or sub-application.\n  //\n  // A specialized view class that renders an area of HTML and then\n  // attaches `Region` instances to the specified `regions`.\n  // Used for composite view management and sub-application areas.\n  Marionette.LayoutView = Marionette.ItemView.extend({\n    regionClass: Marionette.Region,\n\n    // Ensure the regions are available when the `initialize` method\n    // is called.\n    constructor: function(options) {\n      options = options || {};\n\n      this._firstRender = true;\n      this._initializeRegions(options);\n\n      Marionette.ItemView.call(this, options);\n    },\n\n    // LayoutView's render will use the existing region objects the\n    // first time it is called. Subsequent calls will destroy the\n    // views that the regions are showing and then reset the `el`\n    // for the regions to the newly rendered DOM elements.\n    render: function() {\n      this._ensureViewIsIntact();\n\n      if (this._firstRender) {\n        // if this is the first render, don't do anything to\n        // reset the regions\n        this._firstRender = false;\n      } else {\n        // If this is not the first render call, then we need to\n        // re-initialize the `el` for each region\n        this._reInitializeRegions();\n      }\n\n      return Marionette.ItemView.prototype.render.apply(this, arguments);\n    },\n\n    // Handle destroying regions, and then destroy the view itself.\n    destroy: function() {\n      if (this.isDestroyed) { return this; }\n\n      this.regionManager.destroy();\n      return Marionette.ItemView.prototype.destroy.apply(this, arguments);\n    },\n\n    // Add a single region, by name, to the layoutView\n    addRegion: function(name, definition) {\n      var regions = {};\n      regions[name] = definition;\n      return this._buildRegions(regions)[name];\n    },\n\n    // Add multiple regions as a {name: definition, name2: def2} object literal\n    addRegions: function(regions) {\n      this.regions = _.extend({}, this.regions, regions);\n      return this._buildRegions(regions);\n    },\n\n    // Remove a single region from the LayoutView, by name\n    removeRegion: function(name) {\n      delete this.regions[name];\n      return this.regionManager.removeRegion(name);\n    },\n\n    // Provides alternative access to regions\n    // Accepts the region name\n    // getRegion('main')\n    getRegion: function(region) {\n      return this.regionManager.get(region);\n    },\n\n    // Get all regions\n    getRegions: function(){\n      return this.regionManager.getRegions();\n    },\n\n    // internal method to build regions\n    _buildRegions: function(regions) {\n      var defaults = {\n        regionClass: this.getOption('regionClass'),\n        parentEl: _.partial(_.result, this, '$el')\n      };\n\n      return this.regionManager.addRegions(regions, defaults);\n    },\n\n    // Internal method to initialize the regions that have been defined in a\n    // `regions` attribute on this layoutView.\n    _initializeRegions: function(options) {\n      var regions;\n      this._initRegionManager();\n\n      if (_.isFunction(this.regions)) {\n        regions = this.regions(options);\n      } else {\n        regions = this.regions || {};\n      }\n\n      // Enable users to define `regions` as instance options.\n      var regionOptions = this.getOption.call(options, 'regions');\n\n      // enable region options to be a function\n      if (_.isFunction(regionOptions)) {\n        regionOptions = regionOptions.call(this, options);\n      }\n\n      _.extend(regions, regionOptions);\n\n      // Normalize region selectors hash to allow\n      // a user to use the @ui. syntax.\n      regions = this.normalizeUIValues(regions);\n\n      this.addRegions(regions);\n    },\n\n    // Internal method to re-initialize all of the regions by updating the `el` that\n    // they point to\n    _reInitializeRegions: function() {\n      this.regionManager.invoke('reset');\n    },\n\n    // Enable easy overriding of the default `RegionManager`\n    // for customized region interactions and business specific\n    // view logic for better control over single regions.\n    getRegionManager: function() {\n      return new Marionette.RegionManager();\n    },\n\n    // Internal method to initialize the region manager\n    // and all regions in it\n    _initRegionManager: function() {\n      this.regionManager = this.getRegionManager();\n      this.regionManager._parent = this;\n\n      this.listenTo(this.regionManager, 'before:add:region', function(name) {\n        this.triggerMethod('before:add:region', name);\n      });\n\n      this.listenTo(this.regionManager, 'add:region', function(name, region) {\n        this[name] = region;\n        this.triggerMethod('add:region', name, region);\n      });\n\n      this.listenTo(this.regionManager, 'before:remove:region', function(name) {\n        this.triggerMethod('before:remove:region', name);\n      });\n\n      this.listenTo(this.regionManager, 'remove:region', function(name, region) {\n        delete this[name];\n        this.triggerMethod('remove:region', name, region);\n      });\n    },\n\n    _getImmediateChildren: function() {\n      return _.chain(this.regionManager.getRegions())\n        .pluck('currentView')\n        .compact()\n        .value();\n    }\n  });\n\n\n  // Behavior\n  // --------\n\n  // A Behavior is an isolated set of DOM /\n  // user interactions that can be mixed into any View.\n  // Behaviors allow you to blackbox View specific interactions\n  // into portable logical chunks, keeping your views simple and your code DRY.\n\n  Marionette.Behavior = Marionette.Object.extend({\n    constructor: function(options, view) {\n      // Setup reference to the view.\n      // this comes in handle when a behavior\n      // wants to directly talk up the chain\n      // to the view.\n      this.view = view;\n      this.defaults = _.result(this, 'defaults') || {};\n      this.options  = _.extend({}, this.defaults, options);\n\n      Marionette.Object.apply(this, arguments);\n    },\n\n    // proxy behavior $ method to the view\n    // this is useful for doing jquery DOM lookups\n    // scoped to behaviors view.\n    $: function() {\n      return this.view.$.apply(this.view, arguments);\n    },\n\n    // Stops the behavior from listening to events.\n    // Overrides Object#destroy to prevent additional events from being triggered.\n    destroy: function() {\n      this.stopListening();\n    },\n\n    proxyViewProperties: function (view) {\n      this.$el = view.$el;\n      this.el = view.el;\n    }\n  });\n\n  /* jshint maxlen: 143 */\n  // Behaviors\n  // ---------\n\n  // Behaviors is a utility class that takes care of\n  // gluing your behavior instances to their given View.\n  // The most important part of this class is that you\n  // **MUST** override the class level behaviorsLookup\n  // method for things to work properly.\n\n  Marionette.Behaviors = (function(Marionette, _) {\n\n    function Behaviors(view, behaviors) {\n\n      if (!_.isObject(view.behaviors)) {\n        return {};\n      }\n\n      // Behaviors defined on a view can be a flat object literal\n      // or it can be a function that returns an object.\n      behaviors = Behaviors.parseBehaviors(view, behaviors || _.result(view, 'behaviors'));\n\n      // Wraps several of the view's methods\n      // calling the methods first on each behavior\n      // and then eventually calling the method on the view.\n      Behaviors.wrap(view, behaviors, _.keys(methods));\n      return behaviors;\n    }\n\n    var methods = {\n      behaviorTriggers: function(behaviorTriggers, behaviors) {\n        var triggerBuilder = new BehaviorTriggersBuilder(this, behaviors);\n        return triggerBuilder.buildBehaviorTriggers();\n      },\n\n      behaviorEvents: function(behaviorEvents, behaviors) {\n        var _behaviorsEvents = {};\n        var viewUI = _.result(this, 'ui');\n\n        _.each(behaviors, function(b, i) {\n          var _events = {};\n          var behaviorEvents = _.clone(_.result(b, 'events')) || {};\n          var behaviorUI = _.result(b, 'ui');\n\n          // Construct an internal UI hash first using\n          // the views UI hash and then the behaviors UI hash.\n          // This allows the user to use UI hash elements\n          // defined in the parent view as well as those\n          // defined in the given behavior.\n          var ui = _.extend({}, viewUI, behaviorUI);\n\n          // Normalize behavior events hash to allow\n          // a user to use the @ui. syntax.\n          behaviorEvents = Marionette.normalizeUIKeys(behaviorEvents, ui);\n\n          _.each(_.keys(behaviorEvents), function(key) {\n            // Append white-space at the end of each key to prevent behavior key collisions.\n            // This is relying on the fact that backbone events considers \"click .foo\" the same as\n            // \"click .foo \".\n\n            // +2 is used because new Array(1) or 0 is \"\" and not \" \"\n            var whitespace = (new Array(i + 2)).join(' ');\n            var eventKey   = key + whitespace;\n            var handler    = _.isFunction(behaviorEvents[key]) ? behaviorEvents[key] : b[behaviorEvents[key]];\n\n            _events[eventKey] = _.bind(handler, b);\n          });\n\n          _behaviorsEvents = _.extend(_behaviorsEvents, _events);\n        });\n\n        return _behaviorsEvents;\n      }\n    };\n\n    _.extend(Behaviors, {\n\n      // Placeholder method to be extended by the user.\n      // The method should define the object that stores the behaviors.\n      // i.e.\n      //\n      // ```js\n      // Marionette.Behaviors.behaviorsLookup: function() {\n      //   return App.Behaviors\n      // }\n      // ```\n      behaviorsLookup: function() {\n        throw new Marionette.Error({\n          message: 'You must define where your behaviors are stored.',\n          url: 'marionette.behaviors.html#behaviorslookup'\n        });\n      },\n\n      // Takes care of getting the behavior class\n      // given options and a key.\n      // If a user passes in options.behaviorClass\n      // default to using that. Otherwise delegate\n      // the lookup to the users `behaviorsLookup` implementation.\n      getBehaviorClass: function(options, key) {\n        if (options.behaviorClass) {\n          return options.behaviorClass;\n        }\n\n        // Get behavior class can be either a flat object or a method\n        return _.isFunction(Behaviors.behaviorsLookup) ? Behaviors.behaviorsLookup.apply(this, arguments)[key] : Behaviors.behaviorsLookup[key];\n      },\n\n      // Iterate over the behaviors object, for each behavior\n      // instantiate it and get its grouped behaviors.\n      parseBehaviors: function(view, behaviors) {\n        return _.chain(behaviors).map(function(options, key) {\n          var BehaviorClass = Behaviors.getBehaviorClass(options, key);\n\n          var behavior = new BehaviorClass(options, view);\n          var nestedBehaviors = Behaviors.parseBehaviors(view, _.result(behavior, 'behaviors'));\n\n          return [behavior].concat(nestedBehaviors);\n        }).flatten().value();\n      },\n\n      // Wrap view internal methods so that they delegate to behaviors. For example,\n      // `onDestroy` should trigger destroy on all of the behaviors and then destroy itself.\n      // i.e.\n      //\n      // `view.delegateEvents = _.partial(methods.delegateEvents, view.delegateEvents, behaviors);`\n      wrap: function(view, behaviors, methodNames) {\n        _.each(methodNames, function(methodName) {\n          view[methodName] = _.partial(methods[methodName], view[methodName], behaviors);\n        });\n      }\n    });\n\n    // Class to build handlers for `triggers` on behaviors\n    // for views\n    function BehaviorTriggersBuilder(view, behaviors) {\n      this._view      = view;\n      this._viewUI    = _.result(view, 'ui');\n      this._behaviors = behaviors;\n      this._triggers  = {};\n    }\n\n    _.extend(BehaviorTriggersBuilder.prototype, {\n      // Main method to build the triggers hash with event keys and handlers\n      buildBehaviorTriggers: function() {\n        _.each(this._behaviors, this._buildTriggerHandlersForBehavior, this);\n        return this._triggers;\n      },\n\n      // Internal method to build all trigger handlers for a given behavior\n      _buildTriggerHandlersForBehavior: function(behavior, i) {\n        var ui = _.extend({}, this._viewUI, _.result(behavior, 'ui'));\n        var triggersHash = _.clone(_.result(behavior, 'triggers')) || {};\n\n        triggersHash = Marionette.normalizeUIKeys(triggersHash, ui);\n\n        _.each(triggersHash, _.partial(this._setHandlerForBehavior, behavior, i), this);\n      },\n\n      // Internal method to create and assign the trigger handler for a given\n      // behavior\n      _setHandlerForBehavior: function(behavior, i, eventName, trigger) {\n        // Unique identifier for the `this._triggers` hash\n        var triggerKey = trigger.replace(/^\\S+/, function(triggerName) {\n          return triggerName + '.' + 'behaviortriggers' + i;\n        });\n\n        this._triggers[triggerKey] = this._view._buildViewTrigger(eventName);\n      }\n    });\n\n    return Behaviors;\n\n  })(Marionette, _);\n\n\n  // App Router\n  // ----------\n\n  // Reduce the boilerplate code of handling route events\n  // and then calling a single method on another object.\n  // Have your routers configured to call the method on\n  // your object, directly.\n  //\n  // Configure an AppRouter with `appRoutes`.\n  //\n  // App routers can only take one `controller` object.\n  // It is recommended that you divide your controller\n  // objects in to smaller pieces of related functionality\n  // and have multiple routers / controllers, instead of\n  // just one giant router and controller.\n  //\n  // You can also add standard routes to an AppRouter.\n\n  Marionette.AppRouter = Backbone.Router.extend({\n\n    constructor: function(options) {\n      this.options = options || {};\n\n      Backbone.Router.apply(this, arguments);\n\n      var appRoutes = this.getOption('appRoutes');\n      var controller = this._getController();\n      this.processAppRoutes(controller, appRoutes);\n      this.on('route', this._processOnRoute, this);\n    },\n\n    // Similar to route method on a Backbone Router but\n    // method is called on the controller\n    appRoute: function(route, methodName) {\n      var controller = this._getController();\n      this._addAppRoute(controller, route, methodName);\n    },\n\n    // process the route event and trigger the onRoute\n    // method call, if it exists\n    _processOnRoute: function(routeName, routeArgs) {\n      // make sure an onRoute before trying to call it\n      if (_.isFunction(this.onRoute)) {\n        // find the path that matches the current route\n        var routePath = _.invert(this.getOption('appRoutes'))[routeName];\n        this.onRoute(routeName, routePath, routeArgs);\n      }\n    },\n\n    // Internal method to process the `appRoutes` for the\n    // router, and turn them in to routes that trigger the\n    // specified method on the specified `controller`.\n    processAppRoutes: function(controller, appRoutes) {\n      if (!appRoutes) { return; }\n\n      var routeNames = _.keys(appRoutes).reverse(); // Backbone requires reverted order of routes\n\n      _.each(routeNames, function(route) {\n        this._addAppRoute(controller, route, appRoutes[route]);\n      }, this);\n    },\n\n    _getController: function() {\n      return this.getOption('controller');\n    },\n\n    _addAppRoute: function(controller, route, methodName) {\n      var method = controller[methodName];\n\n      if (!method) {\n        throw new Marionette.Error('Method \"' + methodName + '\" was not found on the controller');\n      }\n\n      this.route(route, methodName, _.bind(method, controller));\n    },\n\n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption,\n\n    triggerMethod: Marionette.triggerMethod,\n\n    bindEntityEvents: Marionette.proxyBindEntityEvents,\n\n    unbindEntityEvents: Marionette.proxyUnbindEntityEvents\n  });\n\n  // Application\n  // -----------\n\n  // Contain and manage the composite application as a whole.\n  // Stores and starts up `Region` objects, includes an\n  // event aggregator as `app.vent`\n  Marionette.Application = Marionette.Object.extend({\n    constructor: function(options) {\n      this._initializeRegions(options);\n      this._initCallbacks = new Marionette.Callbacks();\n      this.submodules = {};\n      _.extend(this, options);\n      this._initChannel();\n      Marionette.Object.call(this, options);\n    },\n\n    // Command execution, facilitated by Backbone.Wreqr.Commands\n    execute: function() {\n      this.commands.execute.apply(this.commands, arguments);\n    },\n\n    // Request/response, facilitated by Backbone.Wreqr.RequestResponse\n    request: function() {\n      return this.reqres.request.apply(this.reqres, arguments);\n    },\n\n    // Add an initializer that is either run at when the `start`\n    // method is called, or run immediately if added after `start`\n    // has already been called.\n    addInitializer: function(initializer) {\n      this._initCallbacks.add(initializer);\n    },\n\n    // kick off all of the application's processes.\n    // initializes all of the regions that have been added\n    // to the app, and runs all of the initializer functions\n    start: function(options) {\n      this.triggerMethod('before:start', options);\n      this._initCallbacks.run(options, this);\n      this.triggerMethod('start', options);\n    },\n\n    // Add regions to your app.\n    // Accepts a hash of named strings or Region objects\n    // addRegions({something: \"#someRegion\"})\n    // addRegions({something: Region.extend({el: \"#someRegion\"}) });\n    addRegions: function(regions) {\n      return this._regionManager.addRegions(regions);\n    },\n\n    // Empty all regions in the app, without removing them\n    emptyRegions: function() {\n      return this._regionManager.emptyRegions();\n    },\n\n    // Removes a region from your app, by name\n    // Accepts the regions name\n    // removeRegion('myRegion')\n    removeRegion: function(region) {\n      return this._regionManager.removeRegion(region);\n    },\n\n    // Provides alternative access to regions\n    // Accepts the region name\n    // getRegion('main')\n    getRegion: function(region) {\n      return this._regionManager.get(region);\n    },\n\n    // Get all the regions from the region manager\n    getRegions: function(){\n      return this._regionManager.getRegions();\n    },\n\n    // Create a module, attached to the application\n    module: function(moduleNames, moduleDefinition) {\n\n      // Overwrite the module class if the user specifies one\n      var ModuleClass = Marionette.Module.getClass(moduleDefinition);\n\n      var args = _.toArray(arguments);\n      args.unshift(this);\n\n      // see the Marionette.Module object for more information\n      return ModuleClass.create.apply(ModuleClass, args);\n    },\n\n    // Enable easy overriding of the default `RegionManager`\n    // for customized region interactions and business-specific\n    // view logic for better control over single regions.\n    getRegionManager: function() {\n      return new Marionette.RegionManager();\n    },\n\n    // Internal method to initialize the regions that have been defined in a\n    // `regions` attribute on the application instance\n    _initializeRegions: function(options) {\n      var regions = _.isFunction(this.regions) ? this.regions(options) : this.regions || {};\n\n      this._initRegionManager();\n\n      // Enable users to define `regions` in instance options.\n      var optionRegions = Marionette.getOption(options, 'regions');\n\n      // Enable region options to be a function\n      if (_.isFunction(optionRegions)) {\n        optionRegions = optionRegions.call(this, options);\n      }\n\n      // Overwrite current regions with those passed in options\n      _.extend(regions, optionRegions);\n\n      this.addRegions(regions);\n\n      return this;\n    },\n\n    // Internal method to set up the region manager\n    _initRegionManager: function() {\n      this._regionManager = this.getRegionManager();\n      this._regionManager._parent = this;\n\n      this.listenTo(this._regionManager, 'before:add:region', function() {\n        Marionette._triggerMethod(this, 'before:add:region', arguments);\n      });\n\n      this.listenTo(this._regionManager, 'add:region', function(name, region) {\n        this[name] = region;\n        Marionette._triggerMethod(this, 'add:region', arguments);\n      });\n\n      this.listenTo(this._regionManager, 'before:remove:region', function() {\n        Marionette._triggerMethod(this, 'before:remove:region', arguments);\n      });\n\n      this.listenTo(this._regionManager, 'remove:region', function(name) {\n        delete this[name];\n        Marionette._triggerMethod(this, 'remove:region', arguments);\n      });\n    },\n\n    // Internal method to setup the Wreqr.radio channel\n    _initChannel: function() {\n      this.channelName = _.result(this, 'channelName') || 'global';\n      this.channel = _.result(this, 'channel') || Backbone.Wreqr.radio.channel(this.channelName);\n      this.vent = _.result(this, 'vent') || this.channel.vent;\n      this.commands = _.result(this, 'commands') || this.channel.commands;\n      this.reqres = _.result(this, 'reqres') || this.channel.reqres;\n    }\n  });\n\n  /* jshint maxparams: 9 */\n\n  // Module\n  // ------\n\n  // A simple module system, used to create privacy and encapsulation in\n  // Marionette applications\n  Marionette.Module = function(moduleName, app, options) {\n    this.moduleName = moduleName;\n    this.options = _.extend({}, this.options, options);\n    // Allow for a user to overide the initialize\n    // for a given module instance.\n    this.initialize = options.initialize || this.initialize;\n\n    // Set up an internal store for sub-modules.\n    this.submodules = {};\n\n    this._setupInitializersAndFinalizers();\n\n    // Set an internal reference to the app\n    // within a module.\n    this.app = app;\n\n    if (_.isFunction(this.initialize)) {\n      this.initialize(moduleName, app, this.options);\n    }\n  };\n\n  Marionette.Module.extend = Marionette.extend;\n\n  // Extend the Module prototype with events / listenTo, so that the module\n  // can be used as an event aggregator or pub/sub.\n  _.extend(Marionette.Module.prototype, Backbone.Events, {\n\n    // By default modules start with their parents.\n    startWithParent: true,\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic when extending Marionette.Module.\n    initialize: function() {},\n\n    // Initializer for a specific module. Initializers are run when the\n    // module's `start` method is called.\n    addInitializer: function(callback) {\n      this._initializerCallbacks.add(callback);\n    },\n\n    // Finalizers are run when a module is stopped. They are used to teardown\n    // and finalize any variables, references, events and other code that the\n    // module had set up.\n    addFinalizer: function(callback) {\n      this._finalizerCallbacks.add(callback);\n    },\n\n    // Start the module, and run all of its initializers\n    start: function(options) {\n      // Prevent re-starting a module that is already started\n      if (this._isInitialized) { return; }\n\n      // start the sub-modules (depth-first hierarchy)\n      _.each(this.submodules, function(mod) {\n        // check to see if we should start the sub-module with this parent\n        if (mod.startWithParent) {\n          mod.start(options);\n        }\n      });\n\n      // run the callbacks to \"start\" the current module\n      this.triggerMethod('before:start', options);\n\n      this._initializerCallbacks.run(options, this);\n      this._isInitialized = true;\n\n      this.triggerMethod('start', options);\n    },\n\n    // Stop this module by running its finalizers and then stop all of\n    // the sub-modules for this module\n    stop: function() {\n      // if we are not initialized, don't bother finalizing\n      if (!this._isInitialized) { return; }\n      this._isInitialized = false;\n\n      this.triggerMethod('before:stop');\n\n      // stop the sub-modules; depth-first, to make sure the\n      // sub-modules are stopped / finalized before parents\n      _.invoke(this.submodules, 'stop');\n\n      // run the finalizers\n      this._finalizerCallbacks.run(undefined, this);\n\n      // reset the initializers and finalizers\n      this._initializerCallbacks.reset();\n      this._finalizerCallbacks.reset();\n\n      this.triggerMethod('stop');\n    },\n\n    // Configure the module with a definition function and any custom args\n    // that are to be passed in to the definition function\n    addDefinition: function(moduleDefinition, customArgs) {\n      this._runModuleDefinition(moduleDefinition, customArgs);\n    },\n\n    // Internal method: run the module definition function with the correct\n    // arguments\n    _runModuleDefinition: function(definition, customArgs) {\n      // If there is no definition short circut the method.\n      if (!definition) { return; }\n\n      // build the correct list of arguments for the module definition\n      var args = _.flatten([\n        this,\n        this.app,\n        Backbone,\n        Marionette,\n        Backbone.$, _,\n        customArgs\n      ]);\n\n      definition.apply(this, args);\n    },\n\n    // Internal method: set up new copies of initializers and finalizers.\n    // Calling this method will wipe out all existing initializers and\n    // finalizers.\n    _setupInitializersAndFinalizers: function() {\n      this._initializerCallbacks = new Marionette.Callbacks();\n      this._finalizerCallbacks = new Marionette.Callbacks();\n    },\n\n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod\n  });\n\n  // Class methods to create modules\n  _.extend(Marionette.Module, {\n\n    // Create a module, hanging off the app parameter as the parent object.\n    create: function(app, moduleNames, moduleDefinition) {\n      var module = app;\n\n      // get the custom args passed in after the module definition and\n      // get rid of the module name and definition function\n      var customArgs = _.rest(arguments, 3);\n\n      // Split the module names and get the number of submodules.\n      // i.e. an example module name of `Doge.Wow.Amaze` would\n      // then have the potential for 3 module definitions.\n      moduleNames = moduleNames.split('.');\n      var length = moduleNames.length;\n\n      // store the module definition for the last module in the chain\n      var moduleDefinitions = [];\n      moduleDefinitions[length - 1] = moduleDefinition;\n\n      // Loop through all the parts of the module definition\n      _.each(moduleNames, function(moduleName, i) {\n        var parentModule = module;\n        module = this._getModule(parentModule, moduleName, app, moduleDefinition);\n        this._addModuleDefinition(parentModule, module, moduleDefinitions[i], customArgs);\n      }, this);\n\n      // Return the last module in the definition chain\n      return module;\n    },\n\n    _getModule: function(parentModule, moduleName, app, def, args) {\n      var options = _.extend({}, def);\n      var ModuleClass = this.getClass(def);\n\n      // Get an existing module of this name if we have one\n      var module = parentModule[moduleName];\n\n      if (!module) {\n        // Create a new module if we don't have one\n        module = new ModuleClass(moduleName, app, options);\n        parentModule[moduleName] = module;\n        // store the module on the parent\n        parentModule.submodules[moduleName] = module;\n      }\n\n      return module;\n    },\n\n    // ## Module Classes\n    //\n    // Module classes can be used as an alternative to the define pattern.\n    // The extend function of a Module is identical to the extend functions\n    // on other Backbone and Marionette classes.\n    // This allows module lifecyle events like `onStart` and `onStop` to be called directly.\n    getClass: function(moduleDefinition) {\n      var ModuleClass = Marionette.Module;\n\n      if (!moduleDefinition) {\n        return ModuleClass;\n      }\n\n      // If all of the module's functionality is defined inside its class,\n      // then the class can be passed in directly. `MyApp.module(\"Foo\", FooModule)`.\n      if (moduleDefinition.prototype instanceof ModuleClass) {\n        return moduleDefinition;\n      }\n\n      return moduleDefinition.moduleClass || ModuleClass;\n    },\n\n    // Add the module definition and add a startWithParent initializer function.\n    // This is complicated because module definitions are heavily overloaded\n    // and support an anonymous function, module class, or options object\n    _addModuleDefinition: function(parentModule, module, def, args) {\n      var fn = this._getDefine(def);\n      var startWithParent = this._getStartWithParent(def, module);\n\n      if (fn) {\n        module.addDefinition(fn, args);\n      }\n\n      this._addStartWithParent(parentModule, module, startWithParent);\n    },\n\n    _getStartWithParent: function(def, module) {\n      var swp;\n\n      if (_.isFunction(def) && (def.prototype instanceof Marionette.Module)) {\n        swp = module.constructor.prototype.startWithParent;\n        return _.isUndefined(swp) ? true : swp;\n      }\n\n      if (_.isObject(def)) {\n        swp = def.startWithParent;\n        return _.isUndefined(swp) ? true : swp;\n      }\n\n      return true;\n    },\n\n    _getDefine: function(def) {\n      if (_.isFunction(def) && !(def.prototype instanceof Marionette.Module)) {\n        return def;\n      }\n\n      if (_.isObject(def)) {\n        return def.define;\n      }\n\n      return null;\n    },\n\n    _addStartWithParent: function(parentModule, module, startWithParent) {\n      module.startWithParent = module.startWithParent && startWithParent;\n\n      if (!module.startWithParent || !!module.startWithParentIsConfigured) {\n        return;\n      }\n\n      module.startWithParentIsConfigured = true;\n\n      parentModule.addInitializer(function(options) {\n        if (module.startWithParent) {\n          module.start(options);\n        }\n      });\n    }\n  });\n\n\n  return Marionette;\n}));\n"},9815:e=>{e.exports='/*! PhotoSwipe Default UI - 4.1.1 - 2015-12-24\n* http://photoswipe.com\n* Copyright (c) 2015 Dmitry Semenov; */\n!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipeUI_Default=b()}(this,function(){"use strict";var a=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this,w=!1,x=!0,y=!0,z={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(a,b){return a.title?(b.children[0].innerHTML=a.title,!0):(b.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return a.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return a.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},A=function(a){if(r)return!0;a=a||window.event,q.timeToIdle&&q.mouseUsed&&!k&&K();for(var c,d,e=a.target||a.srcElement,f=e.getAttribute("class")||"",g=0;g<S.length;g++)c=S[g],c.onTap&&f.indexOf("pswp__"+c.name)>-1&&(c.onTap(),d=!0);if(d){a.stopPropagation&&a.stopPropagation(),r=!0;var h=b.features.isOldAndroid?600:30;s=setTimeout(function(){r=!1},h)}},B=function(){return!a.likelyTouchDevice||q.mouseUsed||screen.width>q.fitControlsWidth},C=function(a,c,d){b[(d?"add":"remove")+"Class"](a,"pswp__"+c)},D=function(){var a=1===q.getNumItemsFn();a!==p&&(C(d,"ui--one-slide",a),p=a)},E=function(){C(i,"share-modal--hidden",y)},F=function(){return y=!y,y?(b.removeClass(i,"pswp__share-modal--fade-in"),setTimeout(function(){y&&E()},300)):(E(),setTimeout(function(){y||b.addClass(i,"pswp__share-modal--fade-in")},30)),y||H(),!1},G=function(b){b=b||window.event;var c=b.target||b.srcElement;return a.shout("shareLinkClick",b,c),c.href?c.hasAttribute("download")?!0:(window.open(c.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),y||F(),!1):!1},H=function(){for(var a,b,c,d,e,f="",g=0;g<q.shareButtons.length;g++)a=q.shareButtons[g],c=q.getImageURLForShare(a),d=q.getPageURLForShare(a),e=q.getTextForShare(a),b=a.url.replace("{{url}}",encodeURIComponent(d)).replace("{{image_url}}",encodeURIComponent(c)).replace("{{raw_image_url}}",c).replace("{{text}}",encodeURIComponent(e)),f+=\'<a href="\'+b+\'" target="_blank" class="pswp__share--\'+a.id+\'"\'+(a.download?"download":"")+">"+a.label+"</a>",q.parseShareButtonOut&&(f=q.parseShareButtonOut(a,f));i.children[0].innerHTML=f,i.children[0].onclick=G},I=function(a){for(var c=0;c<q.closeElClasses.length;c++)if(b.hasClass(a,"pswp__"+q.closeElClasses[c]))return!0},J=0,K=function(){clearTimeout(u),J=0,k&&v.setIdle(!1)},L=function(a){a=a?a:window.event;var b=a.relatedTarget||a.toElement;b&&"HTML"!==b.nodeName||(clearTimeout(u),u=setTimeout(function(){v.setIdle(!0)},q.timeToIdleOutside))},M=function(){q.fullscreenEl&&!b.features.isOldAndroid&&(c||(c=v.getFullscreenAPI()),c?(b.bind(document,c.eventK,v.updateFullscreen),v.updateFullscreen(),b.addClass(a.template,"pswp--supports-fs")):b.removeClass(a.template,"pswp--supports-fs"))},N=function(){q.preloaderEl&&(O(!0),l("beforeChange",function(){clearTimeout(o),o=setTimeout(function(){a.currItem&&a.currItem.loading?(!a.allowProgressiveImg()||a.currItem.img&&!a.currItem.img.naturalWidth)&&O(!1):O(!0)},q.loadingIndicatorDelay)}),l("imageLoadComplete",function(b,c){a.currItem===c&&O(!0)}))},O=function(a){n!==a&&(C(m,"preloader--active",!a),n=a)},P=function(a){var c=a.vGap;if(B()){var g=q.barsSize;if(q.captionEl&&"auto"===g.bottom)if(f||(f=b.createEl("pswp__caption pswp__caption--fake"),f.appendChild(b.createEl("pswp__caption__center")),d.insertBefore(f,e),b.addClass(d,"pswp__ui--fit")),q.addCaptionHTMLFn(a,f,!0)){var h=f.clientHeight;c.bottom=parseInt(h,10)||44}else c.bottom=g.top;else c.bottom="auto"===g.bottom?0:g.bottom;c.top=g.top}else c.top=c.bottom=0},Q=function(){q.timeToIdle&&l("mouseUsed",function(){b.bind(document,"mousemove",K),b.bind(document,"mouseout",L),t=setInterval(function(){J++,2===J&&v.setIdle(!0)},q.timeToIdle/2)})},R=function(){l("onVerticalDrag",function(a){x&&.95>a?v.hideControls():!x&&a>=.95&&v.showControls()});var a;l("onPinchClose",function(b){x&&.9>b?(v.hideControls(),a=!0):a&&!x&&b>.9&&v.showControls()}),l("zoomGestureEnded",function(){a=!1,a&&!x&&v.showControls()})},S=[{name:"caption",option:"captionEl",onInit:function(a){e=a}},{name:"share-modal",option:"shareEl",onInit:function(a){i=a},onTap:function(){F()}},{name:"button--share",option:"shareEl",onInit:function(a){h=a},onTap:function(){F()}},{name:"button--zoom",option:"zoomEl",onTap:a.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(a){g=a}},{name:"button--close",option:"closeEl",onTap:a.close},{name:"button--arrow--left",option:"arrowEl",onTap:a.prev},{name:"button--arrow--right",option:"arrowEl",onTap:a.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){c.isFullscreen()?c.exit():c.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(a){m=a}}],T=function(){var a,c,e,f=function(d){if(d)for(var f=d.length,g=0;f>g;g++){a=d[g],c=a.className;for(var h=0;h<S.length;h++)e=S[h],c.indexOf("pswp__"+e.name)>-1&&(q[e.option]?(b.removeClass(a,"pswp__element--disabled"),e.onInit&&e.onInit(a)):b.addClass(a,"pswp__element--disabled"))}};f(d.children);var g=b.getChildByClass(d,"pswp__top-bar");g&&f(g.children)};v.init=function(){b.extend(a.options,z,!0),q=a.options,d=b.getChildByClass(a.scrollWrap,"pswp__ui"),l=a.listen,R(),l("beforeChange",v.update),l("doubleTap",function(b){var c=a.currItem.initialZoomLevel;a.getZoomLevel()!==c?a.zoomTo(c,b,333):a.zoomTo(q.getDoubleTapZoom(!1,a.currItem),b,333)}),l("preventDragEvent",function(a,b,c){var d=a.target||a.srcElement;d&&d.getAttribute("class")&&a.type.indexOf("mouse")>-1&&(d.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(d.tagName))&&(c.prevent=!1)}),l("bindEvents",function(){b.bind(d,"pswpTap click",A),b.bind(a.scrollWrap,"pswpTap",v.onGlobalTap),a.likelyTouchDevice||b.bind(a.scrollWrap,"mouseover",v.onMouseOver)}),l("unbindEvents",function(){y||F(),t&&clearInterval(t),b.unbind(document,"mouseout",L),b.unbind(document,"mousemove",K),b.unbind(d,"pswpTap click",A),b.unbind(a.scrollWrap,"pswpTap",v.onGlobalTap),b.unbind(a.scrollWrap,"mouseover",v.onMouseOver),c&&(b.unbind(document,c.eventK,v.updateFullscreen),c.isFullscreen()&&(q.hideAnimationDuration=0,c.exit()),c=null)}),l("destroy",function(){q.captionEl&&(f&&d.removeChild(f),b.removeClass(e,"pswp__caption--empty")),i&&(i.children[0].onclick=null),b.removeClass(d,"pswp__ui--over-close"),b.addClass(d,"pswp__ui--hidden"),v.setIdle(!1)}),q.showAnimationDuration||b.removeClass(d,"pswp__ui--hidden"),l("initialZoomIn",function(){q.showAnimationDuration&&b.removeClass(d,"pswp__ui--hidden")}),l("initialZoomOut",function(){b.addClass(d,"pswp__ui--hidden")}),l("parseVerticalMargin",P),T(),q.shareEl&&h&&i&&(y=!0),D(),Q(),M(),N()},v.setIdle=function(a){k=a,C(d,"ui--idle",a)},v.update=function(){x&&a.currItem?(v.updateIndexIndicator(),q.captionEl&&(q.addCaptionHTMLFn(a.currItem,e),C(e,"caption--empty",!a.currItem.title)),w=!0):w=!1,y||F(),D()},v.updateFullscreen=function(d){d&&setTimeout(function(){a.setScrollOffset(0,b.getScrollY())},50),b[(c.isFullscreen()?"add":"remove")+"Class"](a.template,"pswp--fs")},v.updateIndexIndicator=function(){q.counterEl&&(g.innerHTML=a.getCurrentIndex()+1+q.indexIndicatorSep+q.getNumItemsFn())},v.onGlobalTap=function(c){c=c||window.event;var d=c.target||c.srcElement;if(!r)if(c.detail&&"mouse"===c.detail.pointerType){if(I(d))return void a.close();b.hasClass(d,"pswp__img")&&(1===a.getZoomLevel()&&a.getZoomLevel()<=a.currItem.fitRatio?q.clickToCloseNonZoomable&&a.close():a.toggleDesktopZoom(c.detail.releasePoint))}else if(q.tapToToggleControls&&(x?v.hideControls():v.showControls()),q.tapToClose&&(b.hasClass(d,"pswp__img")||I(d)))return void a.close()},v.onMouseOver=function(a){a=a||window.event;var b=a.target||a.srcElement;C(d,"ui--over-close",I(b))},v.hideControls=function(){b.addClass(d,"pswp__ui--hidden"),x=!1},v.showControls=function(){x=!0,w||v.update(),b.removeClass(d,"pswp__ui--hidden")},v.supportsFullscreen=function(){var a=document;return!!(a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen)},v.getFullscreenAPI=function(){var b,c=document.documentElement,d="fullscreenchange";return c.requestFullscreen?b={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:d}:c.mozRequestFullScreen?b={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+d}:c.webkitRequestFullscreen?b={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+d}:c.msRequestFullscreen&&(b={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),b&&(b.enter=function(){return j=q.closeOnScroll,q.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?a.template[this.enterK]():void a.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},b.exit=function(){return q.closeOnScroll=j,document[this.exitK]()},b.isFullscreen=function(){return document[this.elementK]}),b}};return a});\n'},9908:e=>{e.exports='/*! PhotoSwipe - v4.1.1 - 2015-12-24\n* http://photoswipe.com\n* Copyright (c) 2015 Dmitry Semenov; */\n!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipe=b()}(this,function(){"use strict";var a=function(a,b,c,d){var e={features:null,bind:function(a,b,c,d){var e=(d?"remove":"add")+"EventListener";b=b.split(" ");for(var f=0;f<b.length;f++)b[f]&&a[e](b[f],c,!1)},isArray:function(a){return a instanceof Array},createEl:function(a,b){var c=document.createElement(b||"div");return a&&(c.className=a),c},getScrollY:function(){var a=window.pageYOffset;return void 0!==a?a:document.documentElement.scrollTop},unbind:function(a,b,c){e.bind(a,b,c,!0)},removeClass:function(a,b){var c=new RegExp("(\\\\s|^)"+b+"(\\\\s|$)");a.className=a.className.replace(c," ").replace(/^\\s\\s*/,"").replace(/\\s\\s*$/,"")},addClass:function(a,b){e.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},hasClass:function(a,b){return a.className&&new RegExp("(^|\\\\s)"+b+"(\\\\s|$)").test(a.className)},getChildByClass:function(a,b){for(var c=a.firstChild;c;){if(e.hasClass(c,b))return c;c=c.nextSibling}},arraySearch:function(a,b,c){for(var d=a.length;d--;)if(a[d][c]===b)return d;return-1},extend:function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){if(c&&a.hasOwnProperty(d))continue;a[d]=b[d]}},easing:{sine:{out:function(a){return Math.sin(a*(Math.PI/2))},inOut:function(a){return-(Math.cos(Math.PI*a)-1)/2}},cubic:{out:function(a){return--a*a*a+1}}},detectFeatures:function(){if(e.features)return e.features;var a=e.createEl(),b=a.style,c="",d={};if(d.oldIE=document.all&&!document.addEventListener,d.touch="ontouchstart"in window,window.requestAnimationFrame&&(d.raf=window.requestAnimationFrame,d.caf=window.cancelAnimationFrame),d.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!d.pointerEvent){var f=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var g=navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);g&&g.length>0&&(g=parseInt(g[1],10),g>=1&&8>g&&(d.isOldIOSPhone=!0))}var h=f.match(/Android\\s([0-9\\.]*)/),i=h?h[1]:0;i=parseFloat(i),i>=1&&(4.4>i&&(d.isOldAndroid=!0),d.androidVersion=i),d.isMobileOpera=/opera mini|opera mobi/i.test(f)}for(var j,k,l=["transform","perspective","animationName"],m=["","webkit","Moz","ms","O"],n=0;4>n;n++){c=m[n];for(var o=0;3>o;o++)j=l[o],k=c+(c?j.charAt(0).toUpperCase()+j.slice(1):j),!d[j]&&k in b&&(d[j]=k);c&&!d.raf&&(c=c.toLowerCase(),d.raf=window[c+"RequestAnimationFrame"],d.raf&&(d.caf=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]))}if(!d.raf){var p=0;d.raf=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-p)),d=window.setTimeout(function(){a(b+c)},c);return p=b+c,d},d.caf=function(a){clearTimeout(a)}}return d.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,e.features=d,d}};e.detectFeatures(),e.features.oldIE&&(e.bind=function(a,b,c,d){b=b.split(" ");for(var e,f=(d?"detach":"attach")+"Event",g=function(){c.handleEvent.call(c)},h=0;h<b.length;h++)if(e=b[h])if("object"==typeof c&&c.handleEvent){if(d){if(!c["oldIE"+e])return!1}else c["oldIE"+e]=g;a[f]("on"+e,c["oldIE"+e])}else a[f]("on"+e,c)});var f=this,g=25,h=3,i={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(a){return"A"===a.tagName},getDoubleTapZoom:function(a,b){return a?1:b.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};e.extend(i,d);var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la=function(){return{x:0,y:0}},ma=la(),na=la(),oa=la(),pa={},qa=0,ra={},sa=la(),ta=0,ua=!0,va=[],wa={},xa=!1,ya=function(a,b){e.extend(f,b.publicMethods),va.push(a)},za=function(a){var b=_b();return a>b-1?a-b:0>a?b+a:a},Aa={},Ba=function(a,b){return Aa[a]||(Aa[a]=[]),Aa[a].push(b)},Ca=function(a){var b=Aa[a];if(b){var c=Array.prototype.slice.call(arguments);c.shift();for(var d=0;d<b.length;d++)b[d].apply(f,c)}},Da=function(){return(new Date).getTime()},Ea=function(a){ia=a,f.bg.style.opacity=a*i.bgOpacity},Fa=function(a,b,c,d,e){(!xa||e&&e!==f.currItem)&&(d/=e?e.fitRatio:f.currItem.fitRatio),a[E]=u+b+"px, "+c+"px"+v+" scale("+d+")"},Ga=function(a){da&&(a&&(s>f.currItem.fitRatio?xa||(lc(f.currItem,!1,!0),xa=!0):xa&&(lc(f.currItem),xa=!1)),Fa(da,oa.x,oa.y,s))},Ha=function(a){a.container&&Fa(a.container.style,a.initialPosition.x,a.initialPosition.y,a.initialZoomLevel,a)},Ia=function(a,b){b[E]=u+a+"px, 0px"+v},Ja=function(a,b){if(!i.loop&&b){var c=m+(sa.x*qa-a)/sa.x,d=Math.round(a-sb.x);(0>c&&d>0||c>=_b()-1&&0>d)&&(a=sb.x+d*i.mainScrollEndFriction)}sb.x=a,Ia(a,n)},Ka=function(a,b){var c=tb[a]-ra[a];return na[a]+ma[a]+c-c*(b/t)},La=function(a,b){a.x=b.x,a.y=b.y,b.id&&(a.id=b.id)},Ma=function(a){a.x=Math.round(a.x),a.y=Math.round(a.y)},Na=null,Oa=function(){Na&&(e.unbind(document,"mousemove",Oa),e.addClass(a,"pswp--has_mouse"),i.mouseUsed=!0,Ca("mouseUsed")),Na=setTimeout(function(){Na=null},100)},Pa=function(){e.bind(document,"keydown",f),N.transform&&e.bind(f.scrollWrap,"click",f),i.mouseUsed||e.bind(document,"mousemove",Oa),e.bind(window,"resize scroll",f),Ca("bindEvents")},Qa=function(){e.unbind(window,"resize",f),e.unbind(window,"scroll",r.scroll),e.unbind(document,"keydown",f),e.unbind(document,"mousemove",Oa),N.transform&&e.unbind(f.scrollWrap,"click",f),U&&e.unbind(window,p,f),Ca("unbindEvents")},Ra=function(a,b){var c=hc(f.currItem,pa,a);return b&&(ca=c),c},Sa=function(a){return a||(a=f.currItem),a.initialZoomLevel},Ta=function(a){return a||(a=f.currItem),a.w>0?i.maxSpreadZoom:1},Ua=function(a,b,c,d){return d===f.currItem.initialZoomLevel?(c[a]=f.currItem.initialPosition[a],!0):(c[a]=Ka(a,d),c[a]>b.min[a]?(c[a]=b.min[a],!0):c[a]<b.max[a]?(c[a]=b.max[a],!0):!1)},Va=function(){if(E){var b=N.perspective&&!G;return u="translate"+(b?"3d(":"("),void(v=N.perspective?", 0px)":")")}E="left",e.addClass(a,"pswp--ie"),Ia=function(a,b){b.left=a+"px"},Ha=function(a){var b=a.fitRatio>1?1:a.fitRatio,c=a.container.style,d=b*a.w,e=b*a.h;c.width=d+"px",c.height=e+"px",c.left=a.initialPosition.x+"px",c.top=a.initialPosition.y+"px"},Ga=function(){if(da){var a=da,b=f.currItem,c=b.fitRatio>1?1:b.fitRatio,d=c*b.w,e=c*b.h;a.width=d+"px",a.height=e+"px",a.left=oa.x+"px",a.top=oa.y+"px"}}},Wa=function(a){var b="";i.escKey&&27===a.keyCode?b="close":i.arrowKeys&&(37===a.keyCode?b="prev":39===a.keyCode&&(b="next")),b&&(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||(a.preventDefault?a.preventDefault():a.returnValue=!1,f[b]()))},Xa=function(a){a&&(X||W||ea||S)&&(a.preventDefault(),a.stopPropagation())},Ya=function(){f.setScrollOffset(0,e.getScrollY())},Za={},$a=0,_a=function(a){Za[a]&&(Za[a].raf&&I(Za[a].raf),$a--,delete Za[a])},ab=function(a){Za[a]&&_a(a),Za[a]||($a++,Za[a]={})},bb=function(){for(var a in Za)Za.hasOwnProperty(a)&&_a(a)},cb=function(a,b,c,d,e,f,g){var h,i=Da();ab(a);var j=function(){if(Za[a]){if(h=Da()-i,h>=d)return _a(a),f(c),void(g&&g());f((c-b)*e(h/d)+b),Za[a].raf=H(j)}};j()},db={shout:Ca,listen:Ba,viewportSize:pa,options:i,isMainScrollAnimating:function(){return ea},getZoomLevel:function(){return s},getCurrentIndex:function(){return m},isDragging:function(){return U},isZooming:function(){return _},setScrollOffset:function(a,b){ra.x=a,M=ra.y=b,Ca("updateScrollOffset",ra)},applyZoomPan:function(a,b,c,d){oa.x=b,oa.y=c,s=a,Ga(d)},init:function(){if(!j&&!k){var c;f.framework=e,f.template=a,f.bg=e.getChildByClass(a,"pswp__bg"),J=a.className,j=!0,N=e.detectFeatures(),H=N.raf,I=N.caf,E=N.transform,L=N.oldIE,f.scrollWrap=e.getChildByClass(a,"pswp__scroll-wrap"),f.container=e.getChildByClass(f.scrollWrap,"pswp__container"),n=f.container.style,f.itemHolders=y=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],y[0].el.style.display=y[2].el.style.display="none",Va(),r={resize:f.updateSize,scroll:Ya,keydown:Wa,click:Xa};var d=N.isOldIOSPhone||N.isOldAndroid||N.isMobileOpera;for(N.animationName&&N.transform&&!d||(i.showAnimationDuration=i.hideAnimationDuration=0),c=0;c<va.length;c++)f["init"+va[c]]();if(b){var g=f.ui=new b(f,e);g.init()}Ca("firstUpdate"),m=m||i.index||0,(isNaN(m)||0>m||m>=_b())&&(m=0),f.currItem=$b(m),(N.isOldIOSPhone||N.isOldAndroid)&&(ua=!1),a.setAttribute("aria-hidden","false"),i.modal&&(ua?a.style.position="fixed":(a.style.position="absolute",a.style.top=e.getScrollY()+"px")),void 0===M&&(Ca("initialLayout"),M=K=e.getScrollY());var l="pswp--open ";for(i.mainClass&&(l+=i.mainClass+" "),i.showHideOpacity&&(l+="pswp--animate_opacity "),l+=G?"pswp--touch":"pswp--notouch",l+=N.animationName?" pswp--css_animation":"",l+=N.svg?" pswp--svg":"",e.addClass(a,l),f.updateSize(),o=-1,ta=null,c=0;h>c;c++)Ia((c+o)*sa.x,y[c].el.style);L||e.bind(f.scrollWrap,q,f),Ba("initialZoomInEnd",function(){f.setContent(y[0],m-1),f.setContent(y[2],m+1),y[0].el.style.display=y[2].el.style.display="block",i.focus&&a.focus(),Pa()}),f.setContent(y[1],m),f.updateCurrItem(),Ca("afterInit"),ua||(w=setInterval(function(){$a||U||_||s!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),e.addClass(a,"pswp--visible")}},close:function(){j&&(j=!1,k=!0,Ca("close"),Qa(),bc(f.currItem,null,!0,f.destroy))},destroy:function(){Ca("destroy"),Wb&&clearTimeout(Wb),a.setAttribute("aria-hidden","true"),a.className=J,w&&clearInterval(w),e.unbind(f.scrollWrap,q,f),e.unbind(window,"scroll",f),yb(),bb(),Aa=null},panTo:function(a,b,c){c||(a>ca.min.x?a=ca.min.x:a<ca.max.x&&(a=ca.max.x),b>ca.min.y?b=ca.min.y:b<ca.max.y&&(b=ca.max.y)),oa.x=a,oa.y=b,Ga()},handleEvent:function(a){a=a||window.event,r[a.type]&&r[a.type](a)},goTo:function(a){a=za(a);var b=a-m;ta=b,m=a,f.currItem=$b(m),qa-=b,Ja(sa.x*qa),bb(),ea=!1,f.updateCurrItem()},next:function(){f.goTo(m+1)},prev:function(){f.goTo(m-1)},updateCurrZoomItem:function(a){if(a&&Ca("beforeChange",0),y[1].el.children.length){var b=y[1].el.children[0];da=e.hasClass(b,"pswp__zoom-wrap")?b.style:null}else da=null;ca=f.currItem.bounds,t=s=f.currItem.initialZoomLevel,oa.x=ca.center.x,oa.y=ca.center.y,a&&Ca("afterChange")},invalidateCurrItems:function(){x=!0;for(var a=0;h>a;a++)y[a].item&&(y[a].item.needsUpdate=!0)},updateCurrItem:function(a){if(0!==ta){var b,c=Math.abs(ta);if(!(a&&2>c)){f.currItem=$b(m),xa=!1,Ca("beforeChange",ta),c>=h&&(o+=ta+(ta>0?-h:h),c=h);for(var d=0;c>d;d++)ta>0?(b=y.shift(),y[h-1]=b,o++,Ia((o+2)*sa.x,b.el.style),f.setContent(b,m-c+d+1+1)):(b=y.pop(),y.unshift(b),o--,Ia(o*sa.x,b.el.style),f.setContent(b,m+c-d-1-1));if(da&&1===Math.abs(ta)){var e=$b(z);e.initialZoomLevel!==s&&(hc(e,pa),lc(e),Ha(e))}ta=0,f.updateCurrZoomItem(),z=m,Ca("afterChange")}}},updateSize:function(b){if(!ua&&i.modal){var c=e.getScrollY();if(M!==c&&(a.style.top=c+"px",M=c),!b&&wa.x===window.innerWidth&&wa.y===window.innerHeight)return;wa.x=window.innerWidth,wa.y=window.innerHeight,a.style.height=wa.y+"px"}if(pa.x=f.scrollWrap.clientWidth,pa.y=f.scrollWrap.clientHeight,Ya(),sa.x=pa.x+Math.round(pa.x*i.spacing),sa.y=pa.y,Ja(sa.x*qa),Ca("beforeResize"),void 0!==o){for(var d,g,j,k=0;h>k;k++)d=y[k],Ia((k+o)*sa.x,d.el.style),j=m+k-1,i.loop&&_b()>2&&(j=za(j)),g=$b(j),g&&(x||g.needsUpdate||!g.bounds)?(f.cleanSlide(g),f.setContent(d,j),1===k&&(f.currItem=g,f.updateCurrZoomItem(!0)),g.needsUpdate=!1):-1===d.index&&j>=0&&f.setContent(d,j),g&&g.container&&(hc(g,pa),lc(g),Ha(g));x=!1}t=s=f.currItem.initialZoomLevel,ca=f.currItem.bounds,ca&&(oa.x=ca.center.x,oa.y=ca.center.y,Ga(!0)),Ca("resize")},zoomTo:function(a,b,c,d,f){b&&(t=s,tb.x=Math.abs(b.x)-oa.x,tb.y=Math.abs(b.y)-oa.y,La(na,oa));var g=Ra(a,!1),h={};Ua("x",g,h,a),Ua("y",g,h,a);var i=s,j={x:oa.x,y:oa.y};Ma(h);var k=function(b){1===b?(s=a,oa.x=h.x,oa.y=h.y):(s=(a-i)*b+i,oa.x=(h.x-j.x)*b+j.x,oa.y=(h.y-j.y)*b+j.y),f&&f(b),Ga(1===b)};c?cb("customZoomTo",0,1,c,d||e.easing.sine.inOut,k):k(1)}},eb=30,fb=10,gb={},hb={},ib={},jb={},kb={},lb=[],mb={},nb=[],ob={},pb=0,qb=la(),rb=0,sb=la(),tb=la(),ub=la(),vb=function(a,b){return a.x===b.x&&a.y===b.y},wb=function(a,b){return Math.abs(a.x-b.x)<g&&Math.abs(a.y-b.y)<g},xb=function(a,b){return ob.x=Math.abs(a.x-b.x),ob.y=Math.abs(a.y-b.y),Math.sqrt(ob.x*ob.x+ob.y*ob.y)},yb=function(){Y&&(I(Y),Y=null)},zb=function(){U&&(Y=H(zb),Pb())},Ab=function(){return!("fit"===i.scaleMode&&s===f.currItem.initialZoomLevel)},Bb=function(a,b){return a&&a!==document?a.getAttribute("class")&&a.getAttribute("class").indexOf("pswp__scroll-wrap")>-1?!1:b(a)?a:Bb(a.parentNode,b):!1},Cb={},Db=function(a,b){return Cb.prevent=!Bb(a.target,i.isClickableElement),Ca("preventDragEvent",a,b,Cb),Cb.prevent},Eb=function(a,b){return b.x=a.pageX,b.y=a.pageY,b.id=a.identifier,b},Fb=function(a,b,c){c.x=.5*(a.x+b.x),c.y=.5*(a.y+b.y)},Gb=function(a,b,c){if(a-P>50){var d=nb.length>2?nb.shift():{};d.x=b,d.y=c,nb.push(d),P=a}},Hb=function(){var a=oa.y-f.currItem.initialPosition.y;return 1-Math.abs(a/(pa.y/2))},Ib={},Jb={},Kb=[],Lb=function(a){for(;Kb.length>0;)Kb.pop();return F?(ka=0,lb.forEach(function(a){0===ka?Kb[0]=a:1===ka&&(Kb[1]=a),ka++})):a.type.indexOf("touch")>-1?a.touches&&a.touches.length>0&&(Kb[0]=Eb(a.touches[0],Ib),a.touches.length>1&&(Kb[1]=Eb(a.touches[1],Jb))):(Ib.x=a.pageX,Ib.y=a.pageY,Ib.id="",Kb[0]=Ib),Kb},Mb=function(a,b){var c,d,e,g,h=0,j=oa[a]+b[a],k=b[a]>0,l=sb.x+b.x,m=sb.x-mb.x;return c=j>ca.min[a]||j<ca.max[a]?i.panEndFriction:1,j=oa[a]+b[a]*c,!i.allowPanToNext&&s!==f.currItem.initialZoomLevel||(da?"h"!==fa||"x"!==a||W||(k?(j>ca.min[a]&&(c=i.panEndFriction,h=ca.min[a]-j,d=ca.min[a]-na[a]),(0>=d||0>m)&&_b()>1?(g=l,0>m&&l>mb.x&&(g=mb.x)):ca.min.x!==ca.max.x&&(e=j)):(j<ca.max[a]&&(c=i.panEndFriction,h=j-ca.max[a],d=na[a]-ca.max[a]),(0>=d||m>0)&&_b()>1?(g=l,m>0&&l<mb.x&&(g=mb.x)):ca.min.x!==ca.max.x&&(e=j))):g=l,"x"!==a)?void(ea||Z||s>f.currItem.fitRatio&&(oa[a]+=b[a]*c)):(void 0!==g&&(Ja(g,!0),Z=g===mb.x?!1:!0),ca.min.x!==ca.max.x&&(void 0!==e?oa.x=e:Z||(oa.x+=b.x*c)),void 0!==g)},Nb=function(a){if(!("mousedown"===a.type&&a.button>0)){if(Zb)return void a.preventDefault();if(!T||"mousedown"!==a.type){if(Db(a,!0)&&a.preventDefault(),Ca("pointerDown"),F){var b=e.arraySearch(lb,a.pointerId,"id");0>b&&(b=lb.length),lb[b]={x:a.pageX,y:a.pageY,id:a.pointerId}}var c=Lb(a),d=c.length;$=null,bb(),U&&1!==d||(U=ga=!0,e.bind(window,p,f),R=ja=ha=S=Z=X=V=W=!1,fa=null,Ca("firstTouchStart",c),La(na,oa),ma.x=ma.y=0,La(jb,c[0]),La(kb,jb),mb.x=sa.x*qa,nb=[{x:jb.x,y:jb.y}],P=O=Da(),Ra(s,!0),yb(),zb()),!_&&d>1&&!ea&&!Z&&(t=s,W=!1,_=V=!0,ma.y=ma.x=0,La(na,oa),La(gb,c[0]),La(hb,c[1]),Fb(gb,hb,ub),tb.x=Math.abs(ub.x)-oa.x,tb.y=Math.abs(ub.y)-oa.y,aa=ba=xb(gb,hb))}}},Ob=function(a){if(a.preventDefault(),F){var b=e.arraySearch(lb,a.pointerId,"id");if(b>-1){var c=lb[b];c.x=a.pageX,c.y=a.pageY}}if(U){var d=Lb(a);if(fa||X||_)$=d;else if(sb.x!==sa.x*qa)fa="h";else{var f=Math.abs(d[0].x-jb.x)-Math.abs(d[0].y-jb.y);Math.abs(f)>=fb&&(fa=f>0?"h":"v",$=d)}}},Pb=function(){if($){var a=$.length;if(0!==a)if(La(gb,$[0]),ib.x=gb.x-jb.x,ib.y=gb.y-jb.y,_&&a>1){if(jb.x=gb.x,jb.y=gb.y,!ib.x&&!ib.y&&vb($[1],hb))return;La(hb,$[1]),W||(W=!0,Ca("zoomGestureStarted"));var b=xb(gb,hb),c=Ub(b);c>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(ja=!0);var d=1,e=Sa(),g=Ta();if(e>c)if(i.pinchToClose&&!ja&&t<=f.currItem.initialZoomLevel){var h=e-c,j=1-h/(e/1.2);Ea(j),Ca("onPinchClose",j),ha=!0}else d=(e-c)/e,d>1&&(d=1),c=e-d*(e/3);else c>g&&(d=(c-g)/(6*e),d>1&&(d=1),c=g+d*e);0>d&&(d=0),aa=b,Fb(gb,hb,qb),ma.x+=qb.x-ub.x,ma.y+=qb.y-ub.y,La(ub,qb),oa.x=Ka("x",c),oa.y=Ka("y",c),R=c>s,s=c,Ga()}else{if(!fa)return;if(ga&&(ga=!1,Math.abs(ib.x)>=fb&&(ib.x-=$[0].x-kb.x),Math.abs(ib.y)>=fb&&(ib.y-=$[0].y-kb.y)),jb.x=gb.x,jb.y=gb.y,0===ib.x&&0===ib.y)return;if("v"===fa&&i.closeOnVerticalDrag&&!Ab()){ma.y+=ib.y,oa.y+=ib.y;var k=Hb();return S=!0,Ca("onVerticalDrag",k),Ea(k),void Ga()}Gb(Da(),gb.x,gb.y),X=!0,ca=f.currItem.bounds;var l=Mb("x",ib);l||(Mb("y",ib),Ma(oa),Ga())}}},Qb=function(a){if(N.isOldAndroid){if(T&&"mouseup"===a.type)return;a.type.indexOf("touch")>-1&&(clearTimeout(T),T=setTimeout(function(){T=0},600))}Ca("pointerUp"),Db(a,!1)&&a.preventDefault();var b;if(F){var c=e.arraySearch(lb,a.pointerId,"id");if(c>-1)if(b=lb.splice(c,1)[0],navigator.pointerEnabled)b.type=a.pointerType||"mouse";else{var d={4:"mouse",2:"touch",3:"pen"};b.type=d[a.pointerType],b.type||(b.type=a.pointerType||"mouse")}}var g,h=Lb(a),j=h.length;if("mouseup"===a.type&&(j=0),2===j)return $=null,!0;1===j&&La(kb,h[0]),0!==j||fa||ea||(b||("mouseup"===a.type?b={x:a.pageX,y:a.pageY,type:"mouse"}:a.changedTouches&&a.changedTouches[0]&&(b={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY,type:"touch"})),Ca("touchRelease",a,b));var k=-1;if(0===j&&(U=!1,e.unbind(window,p,f),yb(),_?k=0:-1!==rb&&(k=Da()-rb)),rb=1===j?Da():-1,g=-1!==k&&150>k?"zoom":"swipe",_&&2>j&&(_=!1,1===j&&(g="zoomPointerUp"),Ca("zoomGestureEnded")),$=null,X||W||ea||S)if(bb(),Q||(Q=Rb()),Q.calculateSwipeSpeed("x"),S){var l=Hb();if(l<i.verticalDragRange)f.close();else{var m=oa.y,n=ia;cb("verticalDrag",0,1,300,e.easing.cubic.out,function(a){oa.y=(f.currItem.initialPosition.y-m)*a+m,Ea((1-n)*a+n),Ga()}),Ca("onVerticalDrag",1)}}else{if((Z||ea)&&0===j){var o=Tb(g,Q);if(o)return;g="zoomPointerUp"}if(!ea)return"swipe"!==g?void Vb():void(!Z&&s>f.currItem.fitRatio&&Sb(Q))}},Rb=function(){var a,b,c={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(d){nb.length>1?(a=Da()-P+50,b=nb[nb.length-2][d]):(a=Da()-O,b=kb[d]),c.lastFlickOffset[d]=jb[d]-b,c.lastFlickDist[d]=Math.abs(c.lastFlickOffset[d]),c.lastFlickDist[d]>20?c.lastFlickSpeed[d]=c.lastFlickOffset[d]/a:c.lastFlickSpeed[d]=0,Math.abs(c.lastFlickSpeed[d])<.1&&(c.lastFlickSpeed[d]=0),c.slowDownRatio[d]=.95,c.slowDownRatioReverse[d]=1-c.slowDownRatio[d],c.speedDecelerationRatio[d]=1},calculateOverBoundsAnimOffset:function(a,b){c.backAnimStarted[a]||(oa[a]>ca.min[a]?c.backAnimDestination[a]=ca.min[a]:oa[a]<ca.max[a]&&(c.backAnimDestination[a]=ca.max[a]),void 0!==c.backAnimDestination[a]&&(c.slowDownRatio[a]=.7,c.slowDownRatioReverse[a]=1-c.slowDownRatio[a],c.speedDecelerationRatioAbs[a]<.05&&(c.lastFlickSpeed[a]=0,c.backAnimStarted[a]=!0,cb("bounceZoomPan"+a,oa[a],c.backAnimDestination[a],b||300,e.easing.sine.out,function(b){oa[a]=b,Ga()}))))},calculateAnimOffset:function(a){c.backAnimStarted[a]||(c.speedDecelerationRatio[a]=c.speedDecelerationRatio[a]*(c.slowDownRatio[a]+c.slowDownRatioReverse[a]-c.slowDownRatioReverse[a]*c.timeDiff/10),c.speedDecelerationRatioAbs[a]=Math.abs(c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]),c.distanceOffset[a]=c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]*c.timeDiff,oa[a]+=c.distanceOffset[a])},panAnimLoop:function(){return Za.zoomPan&&(Za.zoomPan.raf=H(c.panAnimLoop),c.now=Da(),c.timeDiff=c.now-c.lastNow,c.lastNow=c.now,c.calculateAnimOffset("x"),c.calculateAnimOffset("y"),Ga(),c.calculateOverBoundsAnimOffset("x"),c.calculateOverBoundsAnimOffset("y"),c.speedDecelerationRatioAbs.x<.05&&c.speedDecelerationRatioAbs.y<.05)?(oa.x=Math.round(oa.x),oa.y=Math.round(oa.y),Ga(),void _a("zoomPan")):void 0}};return c},Sb=function(a){return a.calculateSwipeSpeed("y"),ca=f.currItem.bounds,a.backAnimDestination={},a.backAnimStarted={},Math.abs(a.lastFlickSpeed.x)<=.05&&Math.abs(a.lastFlickSpeed.y)<=.05?(a.speedDecelerationRatioAbs.x=a.speedDecelerationRatioAbs.y=0,a.calculateOverBoundsAnimOffset("x"),a.calculateOverBoundsAnimOffset("y"),!0):(ab("zoomPan"),a.lastNow=Da(),void a.panAnimLoop())},Tb=function(a,b){var c;ea||(pb=m);var d;if("swipe"===a){var g=jb.x-kb.x,h=b.lastFlickDist.x<10;g>eb&&(h||b.lastFlickOffset.x>20)?d=-1:-eb>g&&(h||b.lastFlickOffset.x<-20)&&(d=1)}var j;d&&(m+=d,0>m?(m=i.loop?_b()-1:0,j=!0):m>=_b()&&(m=i.loop?0:_b()-1,j=!0),(!j||i.loop)&&(ta+=d,qa-=d,c=!0));var k,l=sa.x*qa,n=Math.abs(l-sb.x);return c||l>sb.x==b.lastFlickSpeed.x>0?(k=Math.abs(b.lastFlickSpeed.x)>0?n/Math.abs(b.lastFlickSpeed.x):333,k=Math.min(k,400),k=Math.max(k,250)):k=333,pb===m&&(c=!1),ea=!0,Ca("mainScrollAnimStart"),cb("mainScroll",sb.x,l,k,e.easing.cubic.out,Ja,function(){bb(),ea=!1,pb=-1,(c||pb!==m)&&f.updateCurrItem(),Ca("mainScrollAnimComplete")}),c&&f.updateCurrItem(!0),c},Ub=function(a){return 1/ba*a*t},Vb=function(){var a=s,b=Sa(),c=Ta();b>s?a=b:s>c&&(a=c);var d,g=1,h=ia;return ha&&!R&&!ja&&b>s?(f.close(),!0):(ha&&(d=function(a){Ea((g-h)*a+h)}),f.zoomTo(a,0,200,e.easing.cubic.out,d),!0)};ya("Gestures",{publicMethods:{initGestures:function(){var a=function(a,b,c,d,e){A=a+b,B=a+c,C=a+d,D=e?a+e:""};F=N.pointerEvent,F&&N.touch&&(N.touch=!1),F?navigator.pointerEnabled?a("pointer","down","move","up","cancel"):a("MSPointer","Down","Move","Up","Cancel"):N.touch?(a("touch","start","move","end","cancel"),G=!0):a("mouse","down","move","up"),p=B+" "+C+" "+D,q=A,F&&!G&&(G=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),f.likelyTouchDevice=G,r[A]=Nb,r[B]=Ob,r[C]=Qb,D&&(r[D]=r[C]),N.touch&&(q+=" mousedown",p+=" mousemove mouseup",r.mousedown=r[A],r.mousemove=r[B],r.mouseup=r[C]),G||(i.allowPanToNext=!1)}}});var Wb,Xb,Yb,Zb,$b,_b,ac,bc=function(b,c,d,g){Wb&&clearTimeout(Wb),Zb=!0,Yb=!0;var h;b.initialLayout?(h=b.initialLayout,b.initialLayout=null):h=i.getThumbBoundsFn&&i.getThumbBoundsFn(m);var j=d?i.hideAnimationDuration:i.showAnimationDuration,k=function(){_a("initialZoom"),d?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(Ea(1),c&&(c.style.display="block"),e.addClass(a,"pswp--animated-in"),Ca("initialZoom"+(d?"OutEnd":"InEnd"))),g&&g(),Zb=!1};if(!j||!h||void 0===h.x)return Ca("initialZoom"+(d?"Out":"In")),s=b.initialZoomLevel,La(oa,b.initialPosition),Ga(),a.style.opacity=d?0:1,Ea(1),void(j?setTimeout(function(){k()},j):k());var n=function(){var c=l,g=!f.currItem.src||f.currItem.loadError||i.showHideOpacity;b.miniImg&&(b.miniImg.style.webkitBackfaceVisibility="hidden"),d||(s=h.w/b.w,oa.x=h.x,oa.y=h.y-K,f[g?"template":"bg"].style.opacity=.001,Ga()),ab("initialZoom"),d&&!c&&e.removeClass(a,"pswp--animated-in"),g&&(d?e[(c?"remove":"add")+"Class"](a,"pswp--animate_opacity"):setTimeout(function(){e.addClass(a,"pswp--animate_opacity")},30)),Wb=setTimeout(function(){if(Ca("initialZoom"+(d?"Out":"In")),d){var f=h.w/b.w,i={x:oa.x,y:oa.y},l=s,m=ia,n=function(b){1===b?(s=f,oa.x=h.x,oa.y=h.y-M):(s=(f-l)*b+l,oa.x=(h.x-i.x)*b+i.x,oa.y=(h.y-M-i.y)*b+i.y),Ga(),g?a.style.opacity=1-b:Ea(m-b*m)};c?cb("initialZoom",0,1,j,e.easing.cubic.out,n,k):(n(1),Wb=setTimeout(k,j+20))}else s=b.initialZoomLevel,La(oa,b.initialPosition),Ga(),Ea(1),g?a.style.opacity=1:Ea(1),Wb=setTimeout(k,j+20)},d?25:90)};n()},cc={},dc=[],ec={index:0,errorMsg:\'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>\',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Xb.length}},fc=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},gc=function(a,b,c){var d=a.bounds;d.center.x=Math.round((cc.x-b)/2),d.center.y=Math.round((cc.y-c)/2)+a.vGap.top,d.max.x=b>cc.x?Math.round(cc.x-b):d.center.x,d.max.y=c>cc.y?Math.round(cc.y-c)+a.vGap.top:d.center.y,d.min.x=b>cc.x?0:d.center.x,d.min.y=c>cc.y?a.vGap.top:d.center.y},hc=function(a,b,c){if(a.src&&!a.loadError){var d=!c;if(d&&(a.vGap||(a.vGap={top:0,bottom:0}),Ca("parseVerticalMargin",a)),cc.x=b.x,cc.y=b.y-a.vGap.top-a.vGap.bottom,d){var e=cc.x/a.w,f=cc.y/a.h;a.fitRatio=f>e?e:f;var g=i.scaleMode;"orig"===g?c=1:"fit"===g&&(c=a.fitRatio),c>1&&(c=1),a.initialZoomLevel=c,a.bounds||(a.bounds=fc())}if(!c)return;return gc(a,a.w*c,a.h*c),d&&c===a.initialZoomLevel&&(a.initialPosition=a.bounds.center),a.bounds}return a.w=a.h=0,a.initialZoomLevel=a.fitRatio=1,a.bounds=fc(),a.initialPosition=a.bounds.center,a.bounds},ic=function(a,b,c,d,e,g){b.loadError||d&&(b.imageAppended=!0,lc(b,d,b===f.currItem&&xa),c.appendChild(d),g&&setTimeout(function(){b&&b.loaded&&b.placeholder&&(b.placeholder.style.display="none",b.placeholder=null)},500))},jc=function(a){a.loading=!0,a.loaded=!1;var b=a.img=e.createEl("pswp__img","img"),c=function(){a.loading=!1,a.loaded=!0,a.loadComplete?a.loadComplete(a):a.img=null,b.onload=b.onerror=null,b=null};return b.onload=c,b.onerror=function(){a.loadError=!0,c()},b.src=a.src,b},kc=function(a,b){return a.src&&a.loadError&&a.container?(b&&(a.container.innerHTML=""),a.container.innerHTML=i.errorMsg.replace("%url%",a.src),!0):void 0},lc=function(a,b,c){if(a.src){b||(b=a.container.lastChild);var d=c?a.w:Math.round(a.w*a.fitRatio),e=c?a.h:Math.round(a.h*a.fitRatio);a.placeholder&&!a.loaded&&(a.placeholder.style.width=d+"px",a.placeholder.style.height=e+"px"),b.style.width=d+"px",b.style.height=e+"px"}},mc=function(){if(dc.length){for(var a,b=0;b<dc.length;b++)a=dc[b],a.holder.index===a.index&&ic(a.index,a.item,a.baseDiv,a.img,!1,a.clearPlaceholder);dc=[]}};ya("Controller",{publicMethods:{lazyLoadItem:function(a){a=za(a);var b=$b(a);b&&(!b.loaded&&!b.loading||x)&&(Ca("gettingData",a,b),b.src&&jc(b))},initController:function(){e.extend(i,ec,!0),f.items=Xb=c,$b=f.getItemAt,_b=i.getNumItemsFn,ac=i.loop,_b()<3&&(i.loop=!1),Ba("beforeChange",function(a){var b,c=i.preload,d=null===a?!0:a>=0,e=Math.min(c[0],_b()),g=Math.min(c[1],_b());for(b=1;(d?g:e)>=b;b++)f.lazyLoadItem(m+b);for(b=1;(d?e:g)>=b;b++)f.lazyLoadItem(m-b)}),Ba("initialLayout",function(){f.currItem.initialLayout=i.getThumbBoundsFn&&i.getThumbBoundsFn(m)}),Ba("mainScrollAnimComplete",mc),Ba("initialZoomInEnd",mc),Ba("destroy",function(){for(var a,b=0;b<Xb.length;b++)a=Xb[b],a.container&&(a.container=null),a.placeholder&&(a.placeholder=null),a.img&&(a.img=null),a.preloader&&(a.preloader=null),a.loadError&&(a.loaded=a.loadError=!1);dc=null})},getItemAt:function(a){return a>=0&&void 0!==Xb[a]?Xb[a]:!1},allowProgressiveImg:function(){return i.forceProgressiveLoading||!G||i.mouseUsed||screen.width>1200},setContent:function(a,b){i.loop&&(b=za(b));var c=f.getItemAt(a.index);c&&(c.container=null);var d,g=f.getItemAt(b);if(!g)return void(a.el.innerHTML="");Ca("gettingData",b,g),a.index=b,a.item=g;var h=g.container=e.createEl("pswp__zoom-wrap");if(!g.src&&g.html&&(g.html.tagName?h.appendChild(g.html):h.innerHTML=g.html),kc(g),hc(g,pa),!g.src||g.loadError||g.loaded)g.src&&!g.loadError&&(d=e.createEl("pswp__img","img"),d.style.opacity=1,d.src=g.src,lc(g,d),ic(b,g,h,d,!0));else{if(g.loadComplete=function(c){if(j){if(a&&a.index===b){if(kc(c,!0))return c.loadComplete=c.img=null,hc(c,pa),Ha(c),void(a.index===m&&f.updateCurrZoomItem());c.imageAppended?!Zb&&c.placeholder&&(c.placeholder.style.display="none",c.placeholder=null):N.transform&&(ea||Zb)?dc.push({item:c,baseDiv:h,img:c.img,index:b,holder:a,clearPlaceholder:!0}):ic(b,c,h,c.img,ea||Zb,!0)}c.loadComplete=null,c.img=null,Ca("imageLoadComplete",b,c)}},e.features.transform){var k="pswp__img pswp__img--placeholder";k+=g.msrc?"":" pswp__img--placeholder--blank";var l=e.createEl(k,g.msrc?"img":"");g.msrc&&(l.src=g.msrc),lc(g,l),h.appendChild(l),g.placeholder=l}g.loading||jc(g),f.allowProgressiveImg()&&(!Yb&&N.transform?dc.push({item:g,baseDiv:h,img:g.img,index:b,holder:a}):ic(b,g,h,g.img,!0,!0))}Yb||b!==m?Ha(g):(da=h.style,bc(g,d||g.img)),a.el.innerHTML="",a.el.appendChild(h)},cleanSlide:function(a){a.img&&(a.img.onload=a.img.onerror=null),a.loaded=a.loading=a.img=a.imageAppended=!1}}});var nc,oc={},pc=function(a,b,c){var d=document.createEvent("CustomEvent"),e={origEvent:a,target:a.target,releasePoint:b,pointerType:c||"touch"};d.initCustomEvent("pswpTap",!0,!0,e),a.target.dispatchEvent(d)};ya("Tap",{publicMethods:{initTap:function(){Ba("firstTouchStart",f.onTapStart),Ba("touchRelease",f.onTapRelease),Ba("destroy",function(){oc={},nc=null})},onTapStart:function(a){a.length>1&&(clearTimeout(nc),nc=null)},onTapRelease:function(a,b){if(b&&!X&&!V&&!$a){var c=b;if(nc&&(clearTimeout(nc),nc=null,wb(c,oc)))return void Ca("doubleTap",c);if("mouse"===b.type)return void pc(a,b,"mouse");var d=a.target.tagName.toUpperCase();if("BUTTON"===d||e.hasClass(a.target,"pswp__single-tap"))return void pc(a,b);La(oc,c),nc=setTimeout(function(){pc(a,b),nc=null},300)}}}});var qc;ya("DesktopZoom",{publicMethods:{initDesktopZoom:function(){L||(G?Ba("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function(b){qc={};var c="wheel mousewheel DOMMouseScroll";Ba("bindEvents",function(){e.bind(a,c,f.handleMouseWheel)}),Ba("unbindEvents",function(){qc&&e.unbind(a,c,f.handleMouseWheel)}),f.mouseZoomedIn=!1;var d,g=function(){f.mouseZoomedIn&&(e.removeClass(a,"pswp--zoomed-in"),f.mouseZoomedIn=!1),1>s?e.addClass(a,"pswp--zoom-allowed"):e.removeClass(a,"pswp--zoom-allowed"),h()},h=function(){d&&(e.removeClass(a,"pswp--dragging"),d=!1)};Ba("resize",g),Ba("afterChange",g),Ba("pointerDown",function(){f.mouseZoomedIn&&(d=!0,e.addClass(a,"pswp--dragging"))}),Ba("pointerUp",h),b||g()},handleMouseWheel:function(a){if(s<=f.currItem.fitRatio)return i.modal&&(!i.closeOnScroll||$a||U?a.preventDefault():E&&Math.abs(a.deltaY)>2&&(l=!0,f.close())),!0;if(a.stopPropagation(),qc.x=0,"deltaX"in a)1===a.deltaMode?(qc.x=18*a.deltaX,qc.y=18*a.deltaY):(qc.x=a.deltaX,qc.y=a.deltaY);else if("wheelDelta"in a)a.wheelDeltaX&&(qc.x=-.16*a.wheelDeltaX),a.wheelDeltaY?qc.y=-.16*a.wheelDeltaY:qc.y=-.16*a.wheelDelta;else{if(!("detail"in a))return;qc.y=a.detail}Ra(s,!0);var b=oa.x-qc.x,c=oa.y-qc.y;(i.modal||b<=ca.min.x&&b>=ca.max.x&&c<=ca.min.y&&c>=ca.max.y)&&a.preventDefault(),f.panTo(b,c)},toggleDesktopZoom:function(b){b=b||{x:pa.x/2+ra.x,y:pa.y/2+ra.y};var c=i.getDoubleTapZoom(!0,f.currItem),d=s===c;f.mouseZoomedIn=!d,f.zoomTo(d?f.currItem.initialZoomLevel:c,b,333),e[(d?"remove":"add")+"Class"](a,"pswp--zoomed-in")}}});var rc,sc,tc,uc,vc,wc,xc,yc,zc,Ac,Bc,Cc,Dc={history:!0,galleryUID:1},Ec=function(){return Bc.hash.substring(1)},Fc=function(){rc&&clearTimeout(rc),tc&&clearTimeout(tc)},Gc=function(){var a=Ec(),b={};if(a.length<5)return b;var c,d=a.split("&");for(c=0;c<d.length;c++)if(d[c]){var e=d[c].split("=");e.length<2||(b[e[0]]=e[1])}if(i.galleryPIDs){var f=b.pid;for(b.pid=0,c=0;c<Xb.length;c++)if(Xb[c].pid===f){b.pid=c;break}}else b.pid=parseInt(b.pid,10)-1;return b.pid<0&&(b.pid=0),b},Hc=function(){if(tc&&clearTimeout(tc),$a||U)return void(tc=setTimeout(Hc,500));uc?clearTimeout(sc):uc=!0;var a=m+1,b=$b(m);b.hasOwnProperty("pid")&&(a=b.pid);var c=xc+"&gid="+i.galleryUID+"&pid="+a;yc||-1===Bc.hash.indexOf(c)&&(Ac=!0);var d=Bc.href.split("#")[0]+"#"+c;Cc?"#"+c!==window.location.hash&&history[yc?"replaceState":"pushState"]("",document.title,d):yc?Bc.replace(d):Bc.hash=c,yc=!0,sc=setTimeout(function(){uc=!1},60)};ya("History",{publicMethods:{initHistory:function(){if(e.extend(i,Dc,!0),i.history){Bc=window.location,Ac=!1,zc=!1,yc=!1,xc=Ec(),Cc="pushState"in history,xc.indexOf("gid=")>-1&&(xc=xc.split("&gid=")[0],xc=xc.split("?gid=")[0]),Ba("afterChange",f.updateURL),Ba("unbindEvents",function(){e.unbind(window,"hashchange",f.onHashChange)});var a=function(){wc=!0,zc||(Ac?history.back():xc?Bc.hash=xc:Cc?history.pushState("",document.title,Bc.pathname+Bc.search):Bc.hash=""),Fc()};Ba("unbindEvents",function(){l&&a()}),Ba("destroy",function(){wc||a()}),Ba("firstUpdate",function(){m=Gc().pid});var b=xc.indexOf("pid=");b>-1&&(xc=xc.substring(0,b),"&"===xc.slice(-1)&&(xc=xc.slice(0,-1))),setTimeout(function(){j&&e.bind(window,"hashchange",f.onHashChange)},40)}},onHashChange:function(){return Ec()===xc?(zc=!0,void f.close()):void(uc||(vc=!0,f.goTo(Gc().pid),vc=!1))},updateURL:function(){Fc(),vc||(yc?rc=setTimeout(Hc,800):Hc())}}}),e.extend(f,db)};return a});\n'},3998:e=>{e.exports='/**\n * twig.js\n * https://github.com/schmittjoh/twig.js\n *\n * (C) 2011 Johannes M. Schmitt <schmittjoh@gmail.com>\n * Licensed under the Apache 2.0 License.\n *\n * Portions of this code are from the Google Closure Library received\n * from the Closure Authors under the Apache 2.0 License.\n */\n(function() {function e(a){return function(){return this[a]}}var g,k=this;function m(a,b,c){a=a.split(".");c=c||k;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]?c[d]:c[d]={}:c[d]=b}\nfunction n(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";\nelse if("function"==b&&"undefined"==typeof a.call)return"object";return b}function p(a){return"array"==n(a)}function q(a){return"string"==typeof a}function r(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var t="closure_uid_"+(1E9*Math.random()>>>0),u=0;function v(a,b,c){return a.call.apply(a.bind,arguments)}\nfunction w(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function x(a,b,c){x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:w;return x.apply(null,arguments)}function y(a,b){m(a,b,void 0)};var z=/&/g,A=/</g,B=/>/g,C=/\\"/g,D=/[&<>\\"]/,E={"\\x00":"\\\\0","\\b":"\\\\b","\\f":"\\\\f","\\n":"\\\\n","\\r":"\\\\r","\\t":"\\\\t","\\x0B":"\\\\x0B",\'"\':\'\\\\"\',"\\\\":"\\\\\\\\"},F={"\'":"\\\\\'"};function G(a,b){null!=a&&this.append.apply(this,arguments)}G.prototype.b="";G.prototype.append=function(a,b,c){this.b+=a;if(null!=b)for(var d=1;d<arguments.length;d++)this.b+=arguments[d];return this};G.prototype.toString=e("b");function H(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function I(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function J(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function K(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return c}function L(a){var b={},c;for(c in a)b[c]=a[c];return b}var M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");\nfunction N(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var h=0;h<M.length;h++)c=M[h],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var O=Array.prototype,P=O.indexOf?function(a,b,c){return O.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(q(a))return q(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Q=O.forEach?function(a,b,c){O.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=q(a)?a.split(""):a,h=0;h<d;h++)h in f&&b.call(c,f[h],h,a)};\nfunction aa(a){for(var b={},c=0,d=0;d<a.length;){var f=a[d++],h=r(f)?"o"+(f[t]||(f[t]=++u)):(typeof f).charAt(0)+f;Object.prototype.hasOwnProperty.call(b,h)||(b[h]=!0,a[c++]=f)}a.length=c};var ba=x,t="twig_ui_"+Math.floor(2147483648*Math.random()).toString(36);function R(a){return null===a||!1===a||void 0===a||0===a?!0:S(a)?0===T(a):!1}function U(a,b){N.apply(null,Array.prototype.slice.call(arguments,0));return a}function S(a){return p(a)||q(a)||r(a)}function T(a){if(p(a))a=a.length;else if(q(a))a=a.length;else if(r(a)){var b=0,c;for(c in a)b++;a=b}else a=("number"===typeof a?a.toString():"").length;return a}function V(a,b,c){p(a)?Q(a,b,c):H(a,b,c)}\nfunction W(a){return a.replace(/[\\.\\\\+*?\\[\\]<>(){}^$=!|:-]/g,"\\\\$\\x26")};function X(a){this.env_=a;this.c=[];this.m={}}g=X.prototype;g.s=e("c");g.D=function(a){this.c=a};g.L=function(a){this.m=a};g.getParent=function(a){a=this.getParent_(a);return!1===a?!1:this.env_.d(a)};g.C=function(a,b,c){if(a in this.m){var d=new G;this.m[a](d,b,c||{});return d.toString()}d=this.getParent(b);if(!1!==d)return d.k(a,b,c);throw Error("The template \'"+this.o()+"\' has no parent, and no trait defining the block \'"+a+"\'.");};\ng.k=function(a,b,c){if(c&&a in c){var d=new G,f=c[a];delete c[a];f(d,b,c);return d.toString()}if(a in this.c)return d=new G,this.c[a](d,b,c||null),d.toString();d=this.getParent(b);return!1!==d?d.k(a,b,c):""};g.j=function(a,b){var c=new G;this.render_(c,a||{},b||{});return c.toString()};\ng.q=function(a,b,c,d){if(!a["get"+b])throw Error("The macro "+b+" is not defined in "+a.o()+".");if(void 0===d)return a["get"+b].apply(a,c);throw Error("Positional arguments, or default values in macro arguments are not supported, yet.");};function Y(a){this.r=a}Y.prototype.toString=e("r");function Z(a,b,c,d,f){if(f&&b instanceof Y)return b.toString();b=null==b?"":String(b);if(ca===c){a=String(b);if(a.quote)b=a.quote();else{b=[\'"\'];for(c=0;c<a.length;c++){var h=a.charAt(c),l=h.charCodeAt(0);d=b;f=c+1;var s;if(!(s=E[h])){if(!(31<l&&127>l))if(h in F)h=F[h];else if(h in E)h=F[h]=E[h];else{l=h;s=h.charCodeAt(0);if(31<s&&127>s)l=h;else{if(256>s){if(l="\\\\x",16>s||256<s)l+="0"}else l="\\\\u",4096>s&&(l+="0");l+=s.toString(16).toUpperCase()}h=F[h]=l}s=h}d[f]=s}b.push(\'"\');b=b.join("")}return b.substring(1,\nb.length-1)}if(!c||da===c)return a=b,D.test(a)&&(-1!=a.indexOf("\\x26")&&(a=a.replace(z,"\\x26amp;")),-1!=a.indexOf("\\x3c")&&(a=a.replace(A,"\\x26lt;")),-1!=a.indexOf("\\x3e")&&(a=a.replace(B,"\\x26gt;")),-1!=a.indexOf(\'"\')&&(a=a.replace(C,"\\x26quot;"))),a;if(ea===c)return encodeURIComponent(b);throw Error("The type \'"+c+"\' is not supported.");}var da="html",ca="js",ea="url";function $(){this.a={};this.g={};this.h={};this.l={};this.f={};this.e={};this.p=!1;this.M="UTF-8"}g=$.prototype;g.j=function(a,b){var c=this.d(a);return c.j.call(c,U({},this.e,b||{}))};g.filter=function(a,b,c){if(!(a in this.g))throw Error("The filter \'"+a+"\' does not exist.");return this.g[a].apply(null,Array.prototype.slice.call(arguments,1))};\ng.w=function(a,b,c){if(!(a in this.h))throw Error("The function \'"+a+"\' does not exist.");return this.h[a].apply(null,Array.prototype.slice.call(arguments,1))};g.test=function(a,b,c){if(!(a in this.l))throw Error("The test \'"+a+"\' does not exist.");return this.l[a].apply(null,Array.prototype.slice.call(arguments,1))};g.escape=function(a,b,c,d){return Z(0,a,b,0,d)};\ng.A=function(a,b,c){var d=this.d(a),f=d["get"+b];if(!f)throw Error("The macro \'"+b+"\' does not exist on template \'"+d.o()+"\'.");return f.apply(d,Array.prototype.slice.call(arguments,2)).toString()};g.G=function(a,b){this.g[a]=b};g.H=function(a,b){this.h[a]=b};g.K=function(a,b){this.l[a]=b};g.J=function(a){this.e=a};g.I=function(a,b){this.e[a]=b};g.u=e("e");g.i=function(){this.p=!0;H(this.a,function(a){a.i()},this)};g.v=function(a){return a in this.a};\ng.getExtension=function(a){if(!(a in this.a))throw Error(\'The "\'+a+\'" extension is not enabled.\');return this.a[a]};g.n=function(a){this.a[a.getName()]=a};g.B=function(a){delete this.a[a]};g.F=function(a){H(a,function(a){this.n(a)})};g.t=e("a");g.d=function(a){var b=a[t]||(a[t]=++u);if(b in this.f)return this.f[b];!1===this.p&&this.i();a=new a(this);return this.f[b]=a};window.Twig=new $;y("goog.provide",function(a){m(a)});y("goog.require",function(){});y("twig.templates",{});\ny("twig.attr",function(a,b,c,d,f){d=d||"any";f=void 0!==f?f:!1;if(!r(a)&&!p(a))return f?!1:null;if(b in a){if("array"!==d&&"function"==n(a[b]))return f?!0:a[b].apply(a,c||[]);if("method"!==d)return f?!0:a[b]}if("array"===d||p(a))return f?!1:null;b=b.toLowerCase();var h="get"+b,l="is"+b;return(b=K(a,function(a,b){b=b.toLowerCase();return b===h||b===l}))&&"function"==n(a[b])?f?!0:a[b].apply(a,c||[]):f?!1:null});y("twig.bind",ba);\ny("twig.inherits",function(a,b){function c(){}c.prototype=b.prototype;a.N=b.prototype;a.prototype=new c});y("twig.extend",U);y("twig.spaceless",function(a){return a.replace(/>[\\s\\xa0]+</g,"\\x3e\\x3c").replace(/^[\\s\\xa0]+|[\\s\\xa0]+$/g,"")});y("twig.range",function(a,b){for(var c=[];a<=b;a+=1)c.push(a);return c});y("twig.contains",function(a,b){var c;if(p(a))c=0<=P(a,b);else if(q(a))c=-1!=a.indexOf(b)&&(""!==b||""===a);else a:{for(c in a)if(a[c]==b){c=!0;break a}c=!1}return c});y("twig.countable",S);\ny("twig.count",T);y("twig.forEach",V);y("twig.empty",R);y("twig.createObj",function(a){for(var b={},c=0;c<arguments.length;c+=2)b[arguments[c]]=arguments[c+1];return b});y("twig.pregQuote",W);y("twig.filter.capitalize",function(a,b){return b.charAt(0).toUpperCase()+b.substring(1)});y("twig.filter.escape",Z);y("twig.filter.first",function(a,b){return p(b)?b[0]:r(b)?b[Object.keys(b)[0]]:q(b)?b.charAt(0):""});y("twig.filter.length",function(a,b){return T(b)});\ny("twig.filter.def",function(a,b){return R(a)?b||"":a});y("twig.filter.replace",function(a,b){for(var c in b){var d;d=W(c);a=a.replace(RegExp(d,"g"),b[c])}return a});y("twig.filter.join",function(a,b){var c=b||"",d=new G,f=!0;V(a,function(a){f||d.append(c);f=!1;d.append(a)});return d.toString()});y("twig.filter.keys",J);y("twig.filter.upper",function(a,b){return b.toUpperCase()});y("twig.filter.lower",function(a,b){return b.toLowerCase()});\ny("twig.filter.nl2br",function(a){return a.replace(/\\n/g,"\\x3cbr /\\x3e")});y("twig.filter.abs",function(a){return Math.abs(a)});y("twig.filter.title",function(a,b){return b.split(" ").map(function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}).join(" ")});y("twig.filter.trim",function(a,b){var c="\\n ";a+="";b&&(c=W(b));a=a.replace(RegExp("^["+c+"]+"),"");return a=a.replace(RegExp("["+c+"]+$"),"")});y("twig.filter.json_encode",function(a){return JSON.stringify(a)});\ny("twig.filter.last",function(a,b){if(p(b))return b[b.length-1];if(r(b)){var c=Object.keys(b);return b[c[c.length-1]]}return q(b)?b.charAt(b.length-1):""});y("twig.filter.reverse",function(a,b){if(p(b))return b.reverse();if(r(b)){for(var c={},d=J(b).reverse(),f=0;f<d.length;f++)c[d[f]]=b[d[f]];return c}return q(b)?b.split("").reverse().join(""):b});\ny("twig.filter.batch",function(a,b,c){for(var d=Array(Math.ceil(a.length/b)),f=d.length*b,h=0;h<f;h++){var l=Math.floor(h/b);"undefined"===typeof d[l]&&(d[l]=[]);"undefined"!==typeof a[h]?d[l].push(a[h]):q(c)&&d[l].push(c)}return d});y("twig.filter.merge",function(a,b){var c=[];p(a)&&p(b)?(c=a.concat(b),aa(c)):r(a)&&r(b)&&(c=L(a),H(b,function(a,b){c[b]=a}));return c});y("twig.functions.max",function(a){return p(a)?Math.max.apply(null,a):r(a)?Math.max.apply(null,I(a)):Math.max.apply(null,arguments)});\ny("twig.functions.min",function(a){return p(a)?Math.min.apply(null,a):r(a)?Math.min.apply(null,I(a)):Math.min.apply(null,arguments)});y("twig.functions.random",function(a,b){return p(b)||q(b)?b[Math.floor(Math.random()*b.length)]:"number"==typeof b?Math.floor(Math.random()*b):null===b||"undefined"===typeof b?Math.floor(2147483647*Math.random()):""});y("twig.StringBuffer",G);G.prototype.append=G.prototype.append;G.prototype.toString=G.prototype.toString;y("twig.Environment",$);\n$.prototype.createTemplate=$.prototype.d;$.prototype.filter=$.prototype.filter;$.prototype.invoke=$.prototype.w;$.prototype.test=$.prototype.test;$.prototype.escape=$.prototype.escape;$.prototype.macro=$.prototype.A;$.prototype.setFilter=$.prototype.G;$.prototype.setFunction=$.prototype.H;$.prototype.setTest=$.prototype.K;$.prototype.render=$.prototype.j;$.prototype.getGlobals=$.prototype.u;$.prototype.setGlobals=$.prototype.J;$.prototype.setGlobal=$.prototype.I;$.prototype.initRuntime=$.prototype.i;\n$.prototype.hasExtension=$.prototype.v;$.prototype.getExtension=$.prototype.getExtension;$.prototype.addExtension=$.prototype.n;$.prototype.removeExtension=$.prototype.B;$.prototype.setExtensions=$.prototype.F;$.prototype.getExtensions=$.prototype.t;y("twig.Template",X);X.prototype.setTraits=X.prototype.L;X.prototype.setBlocks=X.prototype.D;X.prototype.getBlocks=X.prototype.s;X.prototype.renderParentBlock=X.prototype.C;X.prototype.renderBlock=X.prototype.k;X.prototype.callMacro=X.prototype.q;\ny("twig.Markup",Y);})();\n'},9971:e=>{e.exports='/*     Underscore.js 1.6.0\n     http://underscorejs.org\n     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n     Underscore may be freely distributed under the MIT license.\nCopyright (c) 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative\nReporters & Editors\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the "Software"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,g=e.filter,d=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,w=Object.keys,_=i.bind,j=function(n){return n instanceof j?n:this instanceof j?void(this._wrapped=n):new j(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):n._=j,j.VERSION="1.6.0";var A=j.each=j.forEach=function(n,t,e){if(null==n)return n;if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a=j.keys(n),u=0,i=a.length;i>u;u++)if(t.call(e,n[a[u]],a[u],n)===r)return;return n};j.map=j.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var O="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=j.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},j.reduceRight=j.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=j.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=j.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},j.find=j.detect=function(n,t,r){var e;return k(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},j.filter=j.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},j.reject=function(n,t,r){return j.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},j.every=j.all=function(n,t,e){t||(t=j.identity);var u=!0;return null==n?u:d&&n.every===d?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var k=j.some=j.any=function(n,t,e){t||(t=j.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};j.contains=j.include=function(n,t){return null==n?!1:y&&n.indexOf===y?n.indexOf(t)!=-1:k(n,function(n){return n===t})},j.invoke=function(n,t){var r=o.call(arguments,2),e=j.isFunction(t);return j.map(n,function(n){return(e?t:n[t]).apply(n,r)})},j.pluck=function(n,t){return j.map(n,j.property(t))},j.where=function(n,t){return j.filter(n,j.matches(t))},j.findWhere=function(n,t){return j.find(n,j.matches(t))},j.max=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);var e=-1/0,u=-1/0;return A(n,function(n,i,a){var o=t?t.call(r,n,i,a):n;o>u&&(e=n,u=o)}),e},j.min=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);var e=1/0,u=1/0;return A(n,function(n,i,a){var o=t?t.call(r,n,i,a):n;u>o&&(e=n,u=o)}),e},j.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=j.random(r++),e[r-1]=e[t],e[t]=n}),e},j.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=j.values(n)),n[j.random(n.length-1)]):j.shuffle(n).slice(0,Math.max(0,t))};var E=function(n){return null==n?j.identity:j.isFunction(n)?n:j.property(n)};j.sortBy=function(n,t,r){return t=E(t),j.pluck(j.map(n,function(n,e,u){return{value:n,index:e,criteria:t.call(r,n,e,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=E(r),A(t,function(i,a){var o=r.call(e,i,a,t);n(u,o,i)}),u}};j.groupBy=F(function(n,t,r){j.has(n,t)?n[t].push(r):n[t]=[r]}),j.indexBy=F(function(n,t,r){n[t]=r}),j.countBy=F(function(n,t){j.has(n,t)?n[t]++:n[t]=1}),j.sortedIndex=function(n,t,r,e){r=E(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},j.toArray=function(n){return n?j.isArray(n)?o.call(n):n.length===+n.length?j.map(n,j.identity):j.values(n):[]},j.size=function(n){return null==n?0:n.length===+n.length?n.length:j.keys(n).length},j.first=j.head=j.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:0>t?[]:o.call(n,0,t)},j.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},j.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},j.rest=j.tail=j.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},j.compact=function(n){return j.filter(n,j.identity)};var M=function(n,t,r){return t&&j.every(n,j.isArray)?c.apply(r,n):(A(n,function(n){j.isArray(n)||j.isArguments(n)?t?a.apply(r,n):M(n,t,r):r.push(n)}),r)};j.flatten=function(n,t){return M(n,t,[])},j.without=function(n){return j.difference(n,o.call(arguments,1))},j.partition=function(n,t){var r=[],e=[];return A(n,function(n){(t(n)?r:e).push(n)}),[r,e]},j.uniq=j.unique=function(n,t,r,e){j.isFunction(t)&&(e=r,r=t,t=!1);var u=r?j.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:j.contains(a,r))||(a.push(r),i.push(n[e]))}),i},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(n){var t=o.call(arguments,1);return j.filter(j.uniq(n),function(n){return j.every(t,function(t){return j.contains(t,n)})})},j.difference=function(n){var t=c.apply(e,o.call(arguments,1));return j.filter(n,function(n){return!j.contains(t,n)})},j.zip=function(){for(var n=j.max(j.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=j.pluck(arguments,""+r);return t},j.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},j.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=j.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},j.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},j.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var R=function(){};j.bind=function(n,t){var r,e;if(_&&n.bind===_)return _.apply(n,o.call(arguments,1));if(!j.isFunction(n))throw new TypeError;return r=o.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(o.call(arguments)));R.prototype=n.prototype;var u=new R;R.prototype=null;var i=n.apply(u,r.concat(o.call(arguments)));return Object(i)===i?i:u}},j.partial=function(n){var t=o.call(arguments,1);return function(){for(var r=0,e=t.slice(),u=0,i=e.length;i>u;u++)e[u]===j&&(e[u]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},j.bindAll=function(n){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return A(t,function(t){n[t]=j.bind(n[t],n)}),n},j.memoize=function(n,t){var r={};return t||(t=j.identity),function(){var e=t.apply(this,arguments);return j.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},j.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},j.defer=function(n){return j.delay.apply(j,[n,1].concat(o.call(arguments,1)))},j.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var c=function(){o=r.leading===!1?0:j.now(),a=null,i=n.apply(e,u),e=u=null};return function(){var l=j.now();o||r.leading!==!1||(o=l);var f=t-(l-o);return e=this,u=arguments,0>=f?(clearTimeout(a),a=null,o=l,i=n.apply(e,u),e=u=null):a||r.trailing===!1||(a=setTimeout(c,f)),i}},j.debounce=function(n,t,r){var e,u,i,a,o,c=function(){var l=j.now()-a;t>l?e=setTimeout(c,t-l):(e=null,r||(o=n.apply(i,u),i=u=null))};return function(){i=this,u=arguments,a=j.now();var l=r&&!e;return e||(e=setTimeout(c,t)),l&&(o=n.apply(i,u),i=u=null),o}},j.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},j.wrap=function(n,t){return j.partial(t,n)},j.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},j.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},j.keys=function(n){if(!j.isObject(n))return[];if(w)return w(n);var t=[];for(var r in n)j.has(n,r)&&t.push(r);return t},j.values=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},j.pairs=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},j.invert=function(n){for(var t={},r=j.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},j.functions=j.methods=function(n){var t=[];for(var r in n)j.isFunction(n[r])&&t.push(r);return t.sort()},j.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},j.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},j.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)j.contains(r,u)||(t[u]=n[u]);return t},j.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]===void 0&&(n[r]=t[r])}),n},j.clone=function(n){return j.isObject(n)?j.isArray(n)?n.slice():j.extend({},n):n},j.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof j&&(n=n._wrapped),t instanceof j&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(j.isFunction(a)&&a instanceof a&&j.isFunction(o)&&o instanceof o)&&"constructor"in n&&"constructor"in t)return!1;r.push(n),e.push(t);var c=0,f=!0;if("[object Array]"==u){if(c=n.length,f=c==t.length)for(;c--&&(f=S(n[c],t[c],r,e)););}else{for(var s in n)if(j.has(n,s)&&(c++,!(f=j.has(t,s)&&S(n[s],t[s],r,e))))break;if(f){for(s in t)if(j.has(t,s)&&!c--)break;f=!c}}return r.pop(),e.pop(),f};j.isEqual=function(n,t){return S(n,t,[],[])},j.isEmpty=function(n){if(null==n)return!0;if(j.isArray(n)||j.isString(n))return 0===n.length;for(var t in n)if(j.has(n,t))return!1;return!0},j.isElement=function(n){return!(!n||1!==n.nodeType)},j.isArray=x||function(n){return"[object Array]"==l.call(n)},j.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){j["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),j.isArguments(arguments)||(j.isArguments=function(n){return!(!n||!j.has(n,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(n){return"function"==typeof n}),j.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},j.isNaN=function(n){return j.isNumber(n)&&n!=+n},j.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},j.isNull=function(n){return null===n},j.isUndefined=function(n){return n===void 0},j.has=function(n,t){return f.call(n,t)},j.noConflict=function(){return n._=t,this},j.identity=function(n){return n},j.constant=function(n){return function(){return n}},j.property=function(n){return function(t){return t[n]}},j.matches=function(n){return function(t){if(t===n)return!0;for(var r in n)if(n[r]!==t[r])return!1;return!0}},j.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},j.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},j.now=Date.now||function(){return(new Date).getTime()};var T={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#x27;"}};T.unescape=j.invert(T.escape);var I={escape:new RegExp("["+j.keys(T.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(T.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(n){j[n]=function(t){return null==t?"":(""+t).replace(I[n],function(t){return T[n][t]})}}),j.result=function(n,t){if(null==n)return void 0;var r=n[t];return j.isFunction(r)?r.call(n):r},j.mixin=function(n){A(j.functions(n),function(t){var r=j[t]=n[t];j.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),z.call(this,r.apply(j,n))}})};var N=0;j.uniqueId=function(n){var t=++N+"";return n?n+t:t},j.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};var q=/(.)^/,B={"\'":"\'","\\\\":"\\\\","\\r":"r","\\n":"n","    ":"t","\\u2028":"u2028","\\u2029":"u2029"},D=/\\\\|\'|\\r|\\n|\\t|\\u2028|\\u2029/g;j.template=function(n,t,r){var e;r=j.defaults({},r,j.templateSettings);var u=new RegExp([(r.escape||q).source,(r.interpolate||q).source,(r.evaluate||q).source].join("|")+"|$","g"),i=0,a="__p+=\'";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(D,function(n){return"\\\\"+B[n]}),r&&(a+="\'+\\n((__t=("+r+"))==null?\'\':_.escape(__t))+\\n\'"),e&&(a+="\'+\\n((__t=("+e+"))==null?\'\':__t)+\\n\'"),u&&(a+="\';\\n"+u+"\\n__p+=\'"),i=o+t.length,t}),a+="\';\\n",r.variable||(a="with(obj||{}){\\n"+a+"}\\n"),a="var __t,__p=\'\',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,\'\');};\\n"+a+"return __p;\\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,j);var c=function(n){return e.call(this,n,j)};return c.source="function("+(r.variable||"obj")+"){\\n"+a+"}",c},j.chain=function(n){return j(n).chain()};var z=function(n){return this._chain?j(n).chain():n};j.mixin(j),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];j.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],z.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];j.prototype[n]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return j})}).call(this);\n'},5964:e=>{e.exports='/* Copyright (c) 2010 Noah Sloan, http://github.com/iamnoah/writeCapture\rPermission is hereby granted, free of charge, to any person obtaining a copy\rof this software and associated documentation files (the "Software"), to deal\rin the Software without restriction, including without limitation the rights\rto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\rcopies of the Software, and to permit persons to whom the Software is\rfurnished to do so, subject to the following conditions:\r\rThe above copyright notice and this permission notice shall be included in\rall copies or substantial portions of the Software.\r*/\r(function(E,a){var j=a.document;function A(Q){var Z=j.createElement("div");j.body.insertBefore(Z,null);E.replaceWith(Z,\'<script type="text/javascript">\'+Q+"<\\/script>")}E=E||(function(Q){return{ajax:Q.ajax,$:function(Z){return Q(Z)[0]},replaceWith:function(Z,ad){var ac=Q(Z)[0];var ab=ac.nextSibling,aa=ac.parentNode;Q(ac).remove();if(ab){Q(ab).before(ad)}else{Q(aa).append(ad)}},onLoad:function(Z){Q(Z)},copyAttrs:function(af,ab){var ad=Q(ab),aa=af.attributes;for(var ac=0,Z=aa.length;ac<Z;ac++){if(aa[ac]&&aa[ac].value){try{ad.attr(aa[ac].name,aa[ac].value)}catch(ae){}}}}}})(a.jQuery);E.copyAttrs=E.copyAttrs||function(){};E.onLoad=E.onLoad||function(){throw"error: autoAsync cannot be used without jQuery or defining writeCaptureSupport.onLoad"};function P(ab,aa){for(var Z=0,Q=ab.length;Z<Q;Z++){if(aa(ab[Z])===false){return}}}function v(Q){return Object.prototype.toString.call(Q)==="[object Function]"}function p(Q){return Object.prototype.toString.call(Q)==="[object String]"}function u(aa,Z,Q){return Array.prototype.slice.call(aa,Z||0,Q||aa&&aa.length)}function D(ab,aa){var Q=false;P(ab,Z);function Z(ac){return !(Q=aa(ac))}return Q}function L(Q){this._queue=[];this._children=[];this._parent=Q;if(Q){Q._addChild(this)}}L.prototype={_addChild:function(Q){this._children.push(Q)},push:function(Q){this._queue.push(Q);this._bubble("_doRun")},pause:function(){this._bubble("_doPause")},resume:function(){this._bubble("_doResume")},_bubble:function(Z){var Q=this;while(!Q[Z]){Q=Q._parent}return Q[Z]()},_next:function(){if(D(this._children,Q)){return true}function Q(aa){return aa._next()}var Z=this._queue.shift();if(Z){Z()}return !!Z}};function i(Q){if(Q){return new L(Q)}L.call(this);this.paused=0}i.prototype=(function(){function Q(){}Q.prototype=L.prototype;return new Q()})();i.prototype._doRun=function(){if(!this.running){this.running=true;try{while(this.paused<1&&this._next()){}}finally{this.running=false}}};i.prototype._doPause=function(){this.paused++};i.prototype._doResume=function(){this.paused--;this._doRun()};function M(){}M.prototype={_html:"",open:function(){this._opened=true;if(this._delegate){this._delegate.open()}},write:function(Q){if(this._closed){return}this._written=true;if(this._delegate){this._delegate.write(Q)}else{this._html+=Q}},writeln:function(Q){this.write(Q+"\\n")},close:function(){this._closed=true;if(this._delegate){this._delegate.close()}},copyTo:function(Q){this._delegate=Q;Q.foobar=true;if(this._opened){Q.open()}if(this._written){Q.write(this._html)}if(this._closed){Q.close()}}};var e=(function(){var Q={f:j.getElementById};try{Q.f.call(j,"abc");return true}catch(Z){return false}})();function I(Q){P(Q,function(Z){var aa=j.getElementById(Z.id);if(!aa){l("<proxyGetElementById - finish>","no element in writen markup with id "+Z.id);return}P(Z.el.childNodes,function(ab){aa.appendChild(ab)});if(aa.contentWindow){a.setTimeout(function(){Z.el.contentWindow.document.copyTo(aa.contentWindow.document)},1)}E.copyAttrs(Z.el,aa)})}function s(Z,Q){if(Q&&Q[Z]===false){return false}return Q&&Q[Z]||o[Z]}function x(Z,ai){var ae=[],ad=s("proxyGetElementById",ai),ag=s("writeOnGetElementById",ai),Q={write:j.write,writeln:j.writeln,finish:function(){},out:""};Z.state=Q;j.write=ah;j.writeln=aa;if(ad||ag){Q.getEl=j.getElementById;j.getElementById=ab;if(ag){findEl=af}else{findEl=ac;Q.finish=function(){I(ae)}}}function ah(aj){Q.out+=aj}function aa(aj){Q.out+=aj+"\\n"}function ac(ak){var aj=j.createElement("div");ae.push({id:ak,el:aj});aj.contentWindow={document:new M()};return aj}function af(al){var aj=E.$(Z.target);var ak=j.createElement("div");aj.parentNode.insertBefore(ak,aj);E.replaceWith(ak,Q.out);Q.out="";return e?Q.getEl.call(j,al):Q.getEl(al)}function ab(ak){var aj=e?Q.getEl.call(j,ak):Q.getEl(ak);return aj||findEl(ak)}return Q}function V(Q){j.write=Q.write;j.writeln=Q.writeln;if(Q.getEl){j.getElementById=Q.getEl}return Q.out}function N(Q){return Q&&Q.replace(/^\\s*<!(\\[CDATA\\[|--)/,"").replace(/(\\]\\]|--)>\\s*$/,"")}function b(){}function d(Z,Q){console.error("Error",Q,"executing code:",Z)}var l=v(a.console&&console.error)?d:b;function S(aa,Z,Q){var ab=x(Z,Q);try{A(N(aa))}catch(ac){l(aa,ac)}finally{V(ab)}return ab}function O(Z){var Q=/^(\\w+:)?\\/\\/([^\\/?#]+)/.exec(Z);return Q&&(Q[1]&&Q[1]!=location.protocol||Q[2]!=location.host)}function T(Q){return new RegExp(Q+"=(?:([\\"\'])([\\\\s\\\\S]*?)\\\\1|([^\\\\s>]+))","i")}function k(Q){var Z=T(Q);return function(aa){var ab=Z.exec(aa)||[];return ab[2]||ab[3]}}var r=/(<script[\\s\\S]*?>)([\\s\\S]*?)<\\/script>/ig,n=T("src"),X=k("src"),q=k("type"),Y=k("language"),C="__document_write_ajax_callbacks__",B="__document_write_ajax_div-",g="window[\'"+C+"\'][\'%d\']();",m=a[C]={},w=\'<script type="text/javascript">\'+g+"<\\/script>",H=0;function c(){return(++H).toString()}function G(Z,aa){var Q;if(v(Z)){Q=Z;Z=null}Z=Z||{};Q=Q||Z&&Z.done;Z.done=aa?function(){aa(Q)}:Q;return Z}var z=new i();var y=[];var f=window._debugWriteCapture?function(){}:function(Q,aa,Z){y.push({type:Q,src:aa,data:Z})};var K=window._debugWriteCapture?function(){}:function(){y.push(arguments)};function W(Q){var Z=c();m[Z]=function(){Q();delete m[Z]};return Z}function J(Q){return w.replace(/%d/,W(Q))}function R(ac,ag,aa,ae){var ad=aa&&new i(aa)||z;ag=G(ag);var ab=s("done",ag);var Q="";var Z=s("fixUrls",ag);if(!v(Z)){Z=function(ah){return ah}}if(v(ab)){Q=J(function(){ad.push(ab)})}return ac.replace(r,af)+Q;function af(aj,av,ai){var an=X(av),am=q(av)||"",aB=Y(av)||"",aA=(!am&&!aB)||am.toLowerCase().indexOf("javascript")!==-1||aB.toLowerCase().indexOf("javascript")!==-1;f("replace",an,aj);if(!aA){return aj}var aw=W(ap),ao=B+aw,au,al={target:"#"+ao,parent:ae};function ap(){ad.push(au)}if(an){an=Z(an);av=av.replace(n,"");if(O(an)){au=az}else{if(s("asyncAll",ag)){au=ay()}else{au=at}}}else{au=ax}function ax(){ah(ai)}function at(){E.ajax({url:an,type:"GET",dataType:"text",async:false,success:function(aC){ah(aC)}})}function ak(aE,aC,aD){l("<XHR for "+an+">",aD);ad.resume()}function aq(){return J(function(){ad.resume()})}function ay(){var aE,aD;function aC(aG,aF){if(!aE){aD=aG;return}try{ah(aG,aq())}catch(aH){l(aG,aH)}}E.ajax({url:an,type:"GET",dataType:"text",async:true,success:aC,error:ak});return function(){aE=true;if(aD){ah(aD)}else{ad.pause()}}}function az(aC){var aE=x(al,ag);ad.pause();f("pause",an);E.ajax({url:an,type:"GET",dataType:"script",success:aD,error:ak});function aD(aH,aG,aF){f("out",an,aE.out);ar(V(aE),J(aE.finish)+aq());f("resume",an)}}function ah(aD,aC){var aE=S(aD,al,ag);aC=J(aE.finish)+(aC||"");ar(aE.out,aC)}function ar(aD,aC){E.replaceWith(al.target,R(aD,null,ad,al)+(aC||""))}return\'<div style="display: none" id="\'+ao+\'"></div>\'+av+g.replace(/%d/,aw)+"<\\/script>"}}function F(Z,aa){var Q=z;P(Z,function(ab){Q.push(ac);function ac(){ab.action(R(ab.html,ab.options,Q),ab)}});if(aa){Q.push(aa)}}function U(Q){var Z=Q;while(Z&&Z.nodeType===1){Q=Z;Z=Z.lastChild;while(Z&&Z.nodeType!==1){Z=Z.previousSibling}}return Q}function h(Q){var aa=j.write,ad=j.writeln,Z,ab=[];j.writeln=function(ae){j.write(ae+"\\n")};var ac;j.write=function(af){var ae=U(j.body);if(ae!==Z){Z=ae;ab.push(ac={el:ae,out:[]})}ac.out.push(af)};E.onLoad(function(){var ah,ak,af,aj,ai;Q=G(Q);ai=Q.done;Q.done=function(){j.write=aa;j.writeln=ad;if(ai){ai()}};for(var ag=0,ae=ab.length;ag<ae;ag++){ah=ab[ag].el;ak=j.createElement("div");ah.parentNode.insertBefore(ak,ah.nextSibling);af=ab[ag].out.join("");aj=ae-ag===1?R(af,Q):R(af);E.replaceWith(ak,aj)}})}var t="writeCapture";var o=a[t]={_original:a[t],fixUrls:function(Q){return Q.replace(/&amp;/g,"&")},noConflict:function(){a[t]=this._original;return this},debug:y,proxyGetElementById:false,_forTest:{Q:i,GLOBAL_Q:z,$:E,matchAttr:k,slice:u,capture:x,uncapture:V,captureWrite:S},replaceWith:function(Q,aa,Z){E.replaceWith(Q,R(aa,Z))},html:function(Q,ab,Z){var aa=E.$(Q);aa.innerHTML="<span/>";E.replaceWith(aa.firstChild,R(ab,Z))},load:function(Q,aa,Z){E.ajax({url:aa,dataType:"text",type:"GET",success:function(ab){o.html(Q,ab,Z)}})},autoAsync:h,sanitize:R,sanitizeSerial:F}})(this.writeCaptureSupport,this);(function(g,d,n){var c={html:h};g.each(["append","prepend","after","before","wrap","wrapAll","replaceWith","wrapInner"],function(){c[this]=i(this)});function a(q){return Object.prototype.toString.call(q)=="[object String]"}function p(u,t,s,r){if(arguments.length==0){return o.call(this)}var q=c[u];if(u=="load"){return l.call(this,t,s,r)}if(!q){j(u)}return b.call(this,t,s,q)}g.fn.writeCapture=p;var k="__writeCaptureJsProxied-fghebd__";function o(){if(this[k]){return this}var r=this;function q(){var t=this,s=false;this[k]=true;g.each(c,function(v){var u=r[v];if(!u){return}t[v]=function(y,x,w){if(!s&&a(y)){try{s=true;return p.call(t,v,y,x,w)}finally{s=false}}return u.apply(t,arguments)}});this.pushStack=function(){return o.call(r.pushStack.apply(t,arguments))};this.endCapture=function(){return r}}q.prototype=r;return new q()}function b(t,s,u){var q,r=this;if(s&&s.done){q=s.done;delete s.done}else{if(g.isFunction(s)){q=s;s=null}}d.sanitizeSerial(g.map(this,function(v){return{html:t,options:s,action:function(w){u.call(v,w)}}}),q&&function(){q.call(r)}||q);return this}function h(q){g(this).html(q)}function i(q){return function(r){g(this)[q](r)}}function l(t,s,v){var r=this,q,u=t.indexOf(" ");if(u>=0){q=t.slice(u,t.length);t=t.slice(0,u)}if(g.isFunction(v)){s=s||{};s.done=v}return g.ajax({url:t,type:s&&s.type||"GET",dataType:"html",data:s&&s.params,complete:f(r,s,q)})}function f(r,s,q){return function(u,t){if(t=="success"||t=="notmodified"){var v=m(u.responseText,q);b.call(r,v,s,h)}}}var e=/jquery-writeCapture-script-placeholder-(\\d+)-wc/g;function m(s,r){if(!r||!s){return s}var t=0,q={};return g("<div/>").append(s.replace(/<script(.|\\s)*?\\/script>/g,function(u){q[t]=u;return"jquery-writeCapture-script-placeholder-"+(t++)+"-wc"})).find(r).html().replace(e,function(u,v){return q[v]})}function j(q){throw"invalid method parameter "+q}g.writeCapture=d})(jQuery,writeCapture.noConflict());\r'},9292:e=>{e.exports="/* eslint-disable */\n(function () {\n    'use strict';\n\n    BaseKit.Globals.Profile = Backbone.Model.extend({\n        idAttribute: 'ref',\n\n        save: function () {\n\n        }\n    });\n}());\n"},6593:e=>{e.exports="/**\n * This app.js is where lightweight pieces of the App object which are needed\n * everywhere, including published mobile sites, belong.\n */\n\nvar App = App || {};\nApp.i18n = App.i18n || {};\n\n(function() {\n\tApp.getParam = function (name) {\n\t\tvar regex = new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)'),\n\t        parentWindow = (window.parent === window.top) ? window.parent : window.parent.parent,\n\t        results = null;\n\n        try {\n            results = regex.exec(parentWindow.location.search);\n        } catch (e) {\n        }\n\n\t\tif (results && results[1])\n\t\t{\n\t\t\treturn decodeURIComponent(results[1]);\n\t\t}\n\n\t\treturn null;\n    };\n\n    App.resetCookieConsent = function() {\n        localStorage.removeItem('bk-cookie-warning');\n        localStorage.removeItem('bk-cookie-warning-analytics');\n        localStorage.removeItem('bk-cookie-warning-preferences');\n        localStorage.removeItem('bk-cookie-warning-advertising');\n        $.ajax('/_bk/revoke', {method: 'POST'});\n        location.reload();\n    };\n\n\tApp.flow = function(state, data, topFrame) {\n        var flowEngineUrl = App.frontEndBucket.protocol\n\t\t    + '://flow.'\n\t\t\t+ App.brand.domain\n\t\t\t+ '/'\n\t\t\t+ state;\n\n\t\t$.ajax(flowEngineUrl, {\n\t\t\tasync: true,\n\t\t\tdata: data,\n\t\t\tdataType: 'jsonp',\n\t\t\tsuccess: function(response) {\n\t\t\t\tvar redirectUrl = response.url;\n\n                if (topFrame) {\n                    window.top.location.href = redirectUrl;\n                    return;\n                }\n\n                window.location.href = redirectUrl;\n\t\t\t}\n\t\t});\n\t}\n\n\tApp.t = function (key, fallback) {\n\t\tvar $lib = $ || bk$,\n\t\t\ttranslateIt = App.getParam('translate'),\n\t\t\tbase = fallback || '',\n\t\t\tparts, section, args, translated, values = 'DEFAULT', keypart, thisTrans, defaultString = true;\n\n\t\t// Extract the section from the key\n\t\tif (key)\n\t\t{\n\t\t\tparts = key.split('.');\n\t\t\tsection = parts.shift();\n\t\t\tkeypart = parts.join('.');\n\t\t}\n\n\t\tif (typeof App.i18n[section] !== \"undefined\" && typeof App.i18n[section][keypart] !== \"undefined\")\n\t\t{\n\t\t\tif (App.i18n[section][keypart].length > 0)\n\t\t\t{\n\t\t\t\tbase = App.i18n[section][keypart];\n                defaultString = false;\n\t\t\t}\n\t\t}\n\n\t\targs = [].slice.call(arguments, 1);\n        args = $lib.map(args, function (n) {\n            return n;\n        });\n\n        if (defaultString && App.frontEndBucket && parseInt(App.frontEndBucket.useDefaultTranslations, 10) === 0) {\n            return key;\n        }\n\n\t\ttranslated = base.replace(/%([0-9]+)/g, function (match, found, offset, original)\n\t\t{\n\t\t\treturn args[found] !== undefined ? args[found] : '';\n\t\t});\n\n\t\tif (translateIt === \"debugvalues\")\n\t\t{\n\t\t\tthisTrans = (App.i18n[section] !== undefined && App.i18n[section][keypart] !== undefined) ? App.i18n[section][keypart] : undefined;\n\n\t\t\tif (thisTrans === '')\n\t\t\t{\n\t\t\t\tvalues = 'MASTER';\n\t\t\t}\n\t\t\telse if (thisTrans)\n\t\t\t{\n\t\t\t\tvalues = 'TRANSLATED';\n\t\t\t}\n\n\t\t\treturn values;\n\t\t}\n\t\t// For checking key names (helpful for checking DB driven keys)\n\t\telse if (translateIt === \"debugkeys\")\n\t\t{\n\t\t\treturn key;\n\t\t}\n\n\t\treturn translated;\n\t};\n\n\tApp.formatUrl  = function(string) {\n\t       if (typeof string === 'string')\n\t       {\n\t\t       string = string.replace(/[^a-zA-Z0-9 -]/g, '') // remove invalid chars\n\t\t       .replace(/\\s+/g, '-') // collapse whitespace and replace by -\n\t\t       .toLowerCase();\n\t\t       // remove any trailing hyphens\n\t\t       return (string.charAt(string.length-1) === '-') ? string.substring(0, (string.length-1)) : string;\n\t       }\n\t};\n\n    App.localizedcurrency = function (price, currencyCode) {\n        const formattedPrice = typeof price === 'number' ? price : parseFloat(price);\n        const formattedLocale = App.user.languageCode.replace(/_/g, '-');\n\n        return new Intl.NumberFormat(\n            formattedLocale,\n            { style: 'currency', currency: currencyCode }\n        ).format(formattedPrice);\n    }\n\n    App.truncateText = function(toTruncate, charLimit=200, appendWith='...') {\n\n        const split = toTruncate.split('');\n        if (split.length <= charLimit) { return toTruncate; }\n\n        const limited = split.slice(0, charLimit);\n        const joined = limited.join('');\n\n        return `${joined}${appendWith}`;\n    }\n\n\tApp.formatBlogDate = function (iso_date, lang) {\n        var locale = lang || App.user.languageCode,\n            formatted;\n\n        if (typeof iso_date !== 'string') {\n            return false;\n        }\n\n        const dateTimeOptions = {\n            day: '2-digit',\n            month: 'long',\n            year: 'numeric',\n        };\n        formatted = new Intl.DateTimeFormat(locale, dateTimeOptions).format(new Date(iso_date));\n\n        return formatted;\n\t};\n\n\tApp.getPHPDate = function (format, date) {\n\t\tvar d = new Date(date);\n\n\t\tif (typeof format !== 'string') {\n\t\t\tformat = 'c';\n\t\t}\n\n\t\treturn d.format(format);\n\t};\n\n\tApp.stringFormat = function (string) {\n        var i;\n        for( i = 1; i < arguments.length; i++ ) {\n            string = string.replace(/%s/, arguments[i]);\n        }\n        return string;\n    };\n\n\t/**\n\t * Asynchronously returns a function that will render the given template\n\t *\n\t * This is a replacement for our old \"Twig.render\" function which\n\t * performed the above task. This function is an adapter between the API\n\t * we have already been using to render JS Twig templates, and the API\n\t * of the twig.js compiler's version of the global Twig object.\n\t *\n\t * Essentially, the purpose of this function is to enable a smooth\n\t * transition to twig.js without necessitating a big refactor of all the\n\t * already existing code that renders Twig templates client-side.\n\t *\n\t * @param string templateName  The name of the template to render\n\t * @param function callback    A callback to execute when the template is ready\n\t * @return function            A function that will render the template when called\n\t */\n\tApp.render = function(templateName, callback) {\n\t\tvar constructor = null;\n\n        if (Twig.hasOwnProperty('templates')) {\n            constructor = Twig.templates[templateName];\n        }\n\n\t\tif (typeof constructor === 'function')\n\t\t{\n\t\t\tcallback(generateTemplateCallbackClosure(constructor));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tloadTemplateFromServer(templateName, function(constructor)\n\t\t\t{\n\t\t\t\tif (typeof constructor !== 'function')\n\t\t\t\t{\n\t\t\t\t\tthrow new Error('Failed to load template: ' + templateName);\n\t\t\t\t}\n\t\t\t\tcallback(generateTemplateCallbackClosure(constructor));\n\t\t\t});\n\t\t}\n\t};\n\n\tApp.templateQueues = {};\n\n\tfunction generateTemplateCallbackClosure(templateConstructor) {\n\t\treturn function(parameters)\n\t\t{\n\t\t\treturn Twig.render(templateConstructor, parameters);\n\t\t};\n\t}\n\n\tfunction loadTemplateFromServer(templateName, callback) {\n\t\tif (typeof App.templateQueues[templateName] === 'undefined')\n\t\t{\n\t\t\tApp.templateQueues[templateName] = [callback];\n\t\t\tsendTemplateRequest(templateName);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tApp.templateQueues[templateName].push(callback);\n\t\t}\n\t}\n\n\tfunction sendTemplateRequest(templateName) {\n\t\tvar templateUrl = App.assetBaseUrl()\n\t\t\t+ '/twig-templates/'\n\t\t\t+ templateName;\n\n\t\t$.ajax(\n\t\t{\n\t\t\turl: templateUrl,\n\t\t\tcache: false,\n\t\t\tdataType: 'script',\n\t\t\tsuccess: function()\n\t\t\t{\n\t\t\t\tprocessTemplateQueue(templateName);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction processTemplateQueue(templateName) {\n\t\tvar constructor = Twig.templates[templateName];\n\t\twhile (App.templateQueues[templateName].length > 0)\n\t\t{\n\t\t\tApp.templateQueues[templateName].shift()(constructor);\n\t\t}\n\t}\n\n    function siteOwnerCookiesHaveBeenDeclined() {\n        return !!(window.App.frontEndBucket?.metadata?.siteOwnerCookiesDeclined);\n    }\n\n    /**\n     * AB: this function assumes the api call returns errors in the way Adrian first designed so they can be translatable, if you want to use this function make sure api call returns messageTemplates on errors, if it doesnt ask someone on the platform team, i do believe its not a hard change\n     * @param  <object> response\n     * @return <array>  array of mapped error text replacements\n     */\n    App.getErrorsFromResponse = function (response) {\n        var phraseAppNameSpace = 'global_v7.errors.',\n            errorMessages = [],\n            responseObj;\n\n        if (response.responseText) {\n            responseObj = jQuery.parseJSON(response.responseText);\n\n            if (responseObj.messageTemplates) {\n                $.each(responseObj.messageTemplates, function (field, errorTemplates) {\n                    $.each(errorTemplates.templates, function (type, template) {\n                        var replacements = [],\n                            args = [phraseAppNameSpace + type, template],\n                            message,\n                            messageObj = {};\n\n                        // if there are replacements\n                        if (errorTemplates.values) {\n                            $.each(errorTemplates.values[type], function (i, stringValue) {\n                                replacements.push(stringValue);\n                            });\n                        }\n\n                        args = args.concat(replacements);\n                        message = App.t.apply(App, args);\n\n                        messageObj.field = field;\n                        messageObj.message = message;\n\n                        errorMessages.push(messageObj);\n                    });\n                });\n            }\n        }\n\n        return errorMessages;\n    };\n\n    App.appcuesTrack = function(trackName) {\n        if (siteOwnerCookiesHaveBeenDeclined()) {\n            return\n        }\n\n        if (window.Appcues) {\n            window.Appcues.track(trackName);\n        }\n    };\n\n    App.mixpanelTrack = function (trackName, mpVars) {\n        if (siteOwnerCookiesHaveBeenDeclined()) {\n            return\n        }\n\n        var deferred = jQuery ? jQuery.Deferred() : bk$.Deferred(),\n            mixpanelEnv,\n            userRef,\n            userEmail,\n            subscriptionPackageRef,\n            mixpanelUserId,\n            baseObject,\n            tracker;\n\n            try {\n                if (App && App.mixpanelToken) {\n                    baseObject = App;\n                    tracker = mixpanel;\n                } else if (window.parent && window.parent.App && window.parent.App.mixpanelToken) {\n                    baseObject = window.parent.App;\n                    tracker = window.parent.mixpanel;\n                } else {\n                    return deferred.resolve();\n                }\n            }\n            catch(err) {\n                return deferred.resolve();\n            }\n\n            mixpanelEnv = baseObject.frontEndBucket.mixpanelEnv;\n            userRef = baseObject.user.ref;\n            userEmail = baseObject.user.email;\n            subscriptionPackageRef = baseObject.user.subscriptionPackageRef;\n            mixpanelUserId = mixpanelEnv + '-' + userRef;\n\n        if (baseObject.hasOwnProperty('brand') && baseObject.brand.capabilities.mixPanelTracking === '0') {\n            return deferred.resolve();\n        }\n\n        const isMixpanelInit = !tracker.hasOwnProperty('init');\n        if (\n            mixpanelEnv !== undefined &&\n            mixpanelEnv &&\n            userEmail.match(/@basekit\\.com$/i) === null &&\n            isMixpanelInit\n        ) {\n            tracker.register({\n                userRef: userRef,\n                primaryDomain: getSitePrimaryDomain(),\n                subscriptionPackageRef: subscriptionPackageRef,\n                env: mixpanelEnv,\n                brand: baseObject.brand.name,\n                codeVersion: baseObject.frontEndBucket.codeVersion,\n                productVersion: baseObject.user.productVersion,\n                languageCode: baseObject.user.languageCode,\n                compatibilityMode: baseObject.frontEndBucket.V10CompatibilityMode,\n            });\n            tracker.identify(mixpanelUserId);\n            tracker.track(trackName, mpVars, function() {\n                deferred.resolve();\n            });\n        } else {\n            return deferred.resolve();\n        }\n\n        return deferred.promise();\n    };\n\n    App.intercomTrack = function (trackName, mpVars) {\n        if (siteOwnerCookiesHaveBeenDeclined()) {\n            return\n        }\n\n        var deferred = jQuery ? jQuery.Deferred() : bk$.Deferred(),\n            userEmail,\n            baseObject,\n            tracker;\n\n        try {\n            if (App && App.frontEndBucket) {\n                baseObject = App;\n                tracker = Intercom;\n            } else if (window.parent && window.parent.App && window.parent.App.frontEndBucket) {\n                baseObject = window.parent.App;\n                tracker = window.parent.Intercom;\n            } else {\n                return deferred.resolve();\n            }\n        }\n        catch(err) {\n            return deferred.resolve();\n        }\n\n        if (baseObject.hasOwnProperty('brand') && baseObject.brand.capabilities.enableIntercom !== '1') {\n            return deferred.resolve();\n        }\n\n        userEmail = baseObject.user.email;\n        if (window.Intercom && userEmail.match(/@basekit\\.com$/i) === null) {\n            tracker('trackEvent', trackName, mpVars);\n            setTimeout(function() {\n                deferred.resolve();\n            }, 200);\n        } else {\n            return deferred.resolve();\n        }\n\n        return deferred.promise();\n    };\n\n\tApp.stripUrlScheme = function(url) {\n        if (typeof url === \"string\") {\n            return url.replace(/^http:/, '');\n        } else {\n            return url;\n        }\n    };\n\n    App.getPort = function () {\n        var port = '',\n            parts = window.location.href.split(':'),\n            lastPart,\n            https = window.location.href.substr(0, 5) === 'https';\n        if (parts.length === 3) {\n            lastPart = parts[2].replace(/[^0-9]/, '');\n            if (!https && lastPart !== \"80\") {\n                port = lastPart;\n            } else if (https && lastPart !== \"443\") {\n                port = lastPart;\n            }\n        }\n        return port;\n    };\n\n    App.assetBaseUrl = function (protocol) {\n        var port;\n\n        if (protocol === '//') {\n            return '//' + App.frontEndBucket.assetDomain + '/' + App.frontEndBucket.assetVersion;\n        }\n\n        if (typeof protocol === \"undefined\") {\n            protocol = App.frontEndBucket.protocol;\n        }\n\n        port = App.getPort();\n        return protocol + '://' + App.frontEndBucket.assetDomain + (port !== '' ? ':' + port : '') + '/' + App.frontEndBucket.assetVersion;\n    };\n\n    App.customWidgetAsset = function (widgetType, asset) {\n        var widget = widgetType.slice('widget.'.length);\n        var Server = window.Server;\n        if (!Server) {\n            Server = Editor.Site.Dom.window.Server;\n        }\n        var version = Server.customWidgetVersions[widget];\n        return '//' + Server.customWidgetsDomain + '/'+widget+'/'+version+'/' + asset;\n    };\n\n    function getSitePrimaryDomain () {\n        var primaryDomain = '';\n\n        if (window.Editor && window.Editor.Site) {\n            primaryDomain = Editor.Site.primaryDomain;\n        } else if (window.parent.Editor && window.parent.Editor.Site) {\n            primaryDomain = window.parent.Editor.Site.primaryDomain;\n        } else if (window.App) {\n            if (window.App.site && window.App.site.primaryDomain) {\n                primaryDomain = window.App.site.primaryDomain.domainName;\n            }\n        } else if (window.parent.App) {\n            if (window.parent.App.site && window.parent.App.site.primaryDomain) {\n                primaryDomain = window.parent.App.site.primaryDomain.domainName;\n            }\n        }\n\n        return primaryDomain;\n    }\n\n    App.getAssetUrl = function (asset, backupUrl, scale) {\n        if (asset === null || typeof asset === 'undefined' || assetUsesResizer(scale) || assetUrlDiffersToBackupUrl(asset, backupUrl)) {\n            return backupUrl;\n        }\n        if (asset.compression !== undefined && asset.compression === 'complete') {\n            return asset.compressedUrl\n        }\n        return asset.url\n    };\n\n    function assetUsesResizer(scale) {\n        var resizerTypes = ['icon', 'thumbnail', 'small'];\n\n        if (scale === null) {\n            return false;\n        }\n        if (resizerTypes.indexOf(scale) !== -1) {\n            return true;\n        }\n        return false;\n    }\n\n    function assetUrlDiffersToBackupUrl(asset, backupUrl)\n    {\n        if (typeof backupUrl === 'undefined' || backupUrl === null || backupUrl ==='') {\n            return false;\n        }\n        return (App.stripUrlScheme(backupUrl) !== App.stripUrlScheme(asset.url));\n    }\n\n    App.baseUrlGeneratorFactory = App.baseUrlGeneratorFactory || {};\n    App.baseUrlGeneratorFactory.create = function () {\n        var protocol;\n        var brandDomain;\n        var accountHolder;\n        // globals whack-a-mole\n        if (typeof App.session !== \"undefined\") {\n            protocol = App.session.get('protocol');\n            brandDomain = App.session.get('domain');\n        } else if (typeof App.frontEndBucket !== \"undefined\") {\n            protocol = App.frontEndBucket.protocol;\n            brandDomain = App.frontEndBucket.domain;\n        }\n\n        if (typeof App.user !== \"undefined\") {\n            accountHolder = App.user;\n        }\n\n        function BaseUrlGenerator(protocol, brand) {\n            this.protocol = protocol;\n            this.brand = brand;\n\n            this.generate = function (subdomain, protocol) {\n                if (typeof protocol === \"undefined\") {\n                    protocol = this.protocol;\n                }\n\n                if (protocol !== '//') {\n                    protocol = protocol + '://';\n                }\n\n                var url = protocol + 'home.' + this.brand['domain'];\n                return url;\n            };\n        }\n\n        return new BaseUrlGenerator(protocol, { domain: brandDomain });\n    };\n\n    App.enableFrames = function() {\n        if (window.Server.app && window.Server.app.mode === 'published'){\n            var frames = document.querySelectorAll('.js-consent-gated-iframe');\n            for (var i = 0; i < frames.length; i++) {\n                frames[i].setAttribute('src', frames[i].dataset.src);\n            }\n        }\n    };\n\n    App.makeStreamedRequest = async function(url, options, handleChunk){\n        let progress = '';\n\n        const optionsToUse = options || {};\n        optionsToUse.headers = optionsToUse.headers || {};\n        optionsToUse.headers['Content-Type'] = 'text/event-stream'\n\n        try {\n\n            const response = await fetch(url, optionsToUse);\n\n            if(!response.ok) {\n                const errorJSON = await response.json();\n\n                if(errorJSON.message && errorJSON.status) {\n                    throw { message: errorJSON.message, status: errorJSON.status };\n                } else {\n                    throw new Error(errorJSON);\n                }\n            }\n\n            const reader = response.body.pipeThrough(new TextDecoderStream()).getReader()\n\n            while (true) {\n                const {value, done} = await reader.read();\n\n                if (done) { break; }\n\n                progress += value;\n                handleChunk(value);\n            }\n\n            return progress;\n        } catch (e) {\n            // Ignore the abort error.\n            if (e && e.name === 'AbortError') {\n                return;\n            }\n            throw e;\n        }\n    };\n\n    const events = {\n        addClass,\n        createElement,\n        disableExternalLinks,\n        getClassListContains,\n        getElementExists,\n        getFooterHeight,\n        getHostname,\n        getLastRowHeight,\n        getScrollY,\n        getUrl,\n        removeAttribute,\n        removeClass,\n        removeElement,\n        removeJQEventHandler,\n        scrollToTop,\n        setStyle,\n        setAttribute,\n        addEventNotifier,\n        hideWidgetPanel,\n        addEventNotifierToChildren,\n        templateChosen,\n    };\n    \n    function attachMessageHandler(options = {}) {\n        if (options.attachedBy) {\n            console.log(`Message handler added by ${options.attachedBy}`)\n        }\n\n        window.addEventListener('message', receiveMessage, false);\n    }\n    \n    function receiveMessage(event) {\n        if (!event.data.type) {\n            return;\n        }\n        if (!events[event.data.type]) {\n            return;\n        }\n\n        events[event.data.type](event);\n    }\n\n    function addClass(event) {\n        const el = document.querySelector(event.data.payload.target);\n        if (el) {\n            el.classList.add(event.data.payload.className);\n        }\n    }\n\n    function createElement(event) {\n        const {\n            className,\n            element,\n            innerHTML,\n            target,\n        } = event.data.payload;\n        const iframeTarget = document.querySelector(target);\n        const newElement = document.createElement(element);\n        if (className) {\n            newElement.className = className;\n        }\n\n        if (innerHTML) {\n            newElement.innerHTML = innerHTML;\n        }\n\n        iframeTarget.appendChild(newElement);\n    }\n\n    function disableExternalLinks() {\n        const hostname = window.location.hostname;\n        const links = window.document.querySelectorAll('a');\n        [...links].forEach((link) => {\n            if (link.target === '_blank') {\n                return;\n            }\n\n            if (!link.hostname || (link.hostname === hostname)) {\n                return;\n            }\n\n            link.addEventListener('click', (event) => {\n                event.preventDefault();\n                return false;\n            });\n        });\n    }\n\n    function getClassListContains(event) {\n        const classListContains = document.querySelector(\n            event.data.payload.target\n        ).classList.contains(event.data.payload.className);\n        event.ports[0].postMessage({ type: event.data.type, response: classListContains });\n    }\n\n    function getElementExists(event) {\n        const elementExists = !!document.querySelector(event.data.payload.target);\n        event.ports[0].postMessage({ type: event.data.type, response: elementExists });\n    }\n\n    function getHostname(event) {\n        event.ports[0].postMessage({ type: event.data.type, response: window.location.hostname });\n    }\n\n    function getScrollY(event) {\n        event.ports[0].postMessage({ type: event.data.type, response: window.scrollY });\n    }\n    \n    function getUrl(event) {\n        event.ports[0].postMessage({ type: event.data.type, response: window.location.href });\n    }\n\n    function removeClass(event) {\n        const el = document.querySelector(event.data.payload.target);\n\n        if(el) {\n            el.classList.remove(event.data.payload.className);\n        }\n    }\n\n    function removeElement(event) {\n        const targetNode = document.querySelector(event.data.payload.target);\n\n        if (event.data.payload.removeChildNodes) {\n            while (targetNode?.firstChild) {\n                targetNode.removeChild(targetNode.firstChild);\n            }\n            return;\n        }\n\n        targetNode?.parentNode.removeChild(targetNode);\n    }\n\n    function removeJQEventHandler(event) {\n        const $lib = $ || bk$;\n        $lib(event.data.payload.target).off(event.data.payload.eventName);\n    }\n\n    function scrollToTop(event) {\n        const notify = () => {\n            event.ports[0].postMessage({ type: event.data.type, response: true });\n        };\n\n        const scrollHandler = (scrollEvent) => {\n            if (window.scrollY !== 0) {\n                return;\n            }\n\n            scrollEvent.currentTarget.removeEventListener('scroll', scrollHandler);\n\n            setTimeout(notify, 150);\n        };\n\n        window.addEventListener('scroll', scrollHandler);\n        window.scrollTo({\n            top: 0,\n            left: 0,\n            behavior: 'smooth',\n        });\n    }\n\n    function setStyle(event) {\n        document.querySelector(\n            event.data.payload.target\n        ).style.setProperty(event.data.payload.property, event.data.payload.value);\n    }\n\n    function getFooterHeight(event) {\n        const footerElement = document.querySelector('#page-zones__footer');\n        const footerHeight = footerElement.getBoundingClientRect().height;\n        event.ports[0].postMessage({ type: event.data.type, response: footerHeight });\n    }\n\n    function getLastRowHeight(event) {\n        const mainRowsSelector = '#page-zones__main .js-widget[data-name=\"row\"]';\n        const rowElements = document.querySelectorAll(mainRowsSelector);\n\n        if (rowElements.length < 1) {\n            event.ports[0].postMessage({ type: event.data.type, response: 0 });\n            return;\n        }\n\n        const lastRow = rowElements[rowElements.length - 1];\n        const lastRowHeight = lastRow.getBoundingClientRect().height;\n\n        event.ports[0].postMessage({ type: event.data.type, response: lastRowHeight });\n    }\n\n    function addEventNotifier(event) {\n        const { target, type, notifyEventType } = event.data.payload;\n        const iframeTarget = document.querySelector(target);\n\n        if (iframeTarget) {\n            iframeTarget.addEventListener(type, function () {\n                App.sendCrossOriginMessage(\n                    notifyEventType,\n                    event.target.parent.window\n                );\n            });\n        }\n    }\n\n    function addEventNotifierToChildren(event) {\n        const { type, notifyEventType, childSelector } = event.data.payload;\n\n        const childItems= document.querySelectorAll(childSelector);\n\n        const extractDatasetItemsToNotify = (dataset) =>\n            Object.entries(dataset)\n                    .filter(([key, value]) => key.startsWith('notify'))\n                    .reduce((acc, [key, value]) => {\n                        let newKey = key.slice(6);\n                        newKey = newKey.charAt(0).toLowerCase() + newKey.slice(1);\n                        return Object.assign(acc, {\n                            [newKey]: value\n                        })\n                    }, {});\n\n        childItems.forEach(childItem => {\n            childItem.addEventListener(type, function (e) {\n\n                const payload = extractDatasetItemsToNotify(e.currentTarget.dataset);\n\n                App.sendCrossOriginMessage(\n                    notifyEventType,\n                    event.target.parent.window,\n                    payload\n                );\n            });\n        });\n    }\n\n    function templateChosen(event) {\n        App.templateChosen(event.data.payload.templateId);\n    }\n\n    function removeAttribute(event) {\n        const el = document.querySelector(event.data.payload.target)\n        if(el) {\n            el.removeAttribute(event.data.payload.attribute);\n        }\n    }\n\n    function setAttribute(event) {\n        const el = document.querySelector(event.data.payload.target)\n        if(el) {\n            el.setAttribute(event.data.payload.attribute, event.data.payload.value);\n        }\n    }\n\n    function hideWidgetPanel(event) {\n        const closeButton = document.querySelector('.js-close-widget-overlay-panel');\n        if (closeButton) {\n            closeButton.click();\n        }\n    }\n        \n    App.attachCrossOriginMessageHandler = {\n        attachMessageHandler,\n    };\n\n\n    if (!App.sendCrossOriginMessage) {\n        // Being consumed in location without the benefit of module bundling etc (thumbnail_preview_iframe.twig)\n        App.sendCrossOriginMessage = (type, target, payload) => new Promise((res, rej) => {\n            const message = {type, payload};\n            const channel = new MessageChannel();\n            channel.port1.onmessage = ({data}) => {\n                channel.port1.close();\n                if (data.error) {\n                    rej(data.error);\n                } else {\n                    res(data.response);\n                }\n            }\n            target.postMessage(message, '*', [channel.port2]);\n        });\n    }\n})();\n\n// Enable cookie gated widget when cookie consent is disabled\n(function(App) {\n    const editorVersion = window.Server ? window.Server.editorVersion : null;\n    const serverCookieWarningUrl = window.Server ? window.Server.cookieWarningUrl : null;\n\n    if (editorVersion === 'ten' && !serverCookieWarningUrl) {\n        App.enableFrames();\n    }\n})(App);\n"},4642:e=>{e.exports=function(e){function t(e){"undefined"!==typeof console&&(console.error||console.log)("[Script Loader]",e)}function n(){return"undefined"!==typeof attachEvent&&"undefined"===typeof addEventListener}try{"undefined"!==typeof execScript&&n()?execScript(e):"undefined"!==typeof eval?eval.call(null,e):t("EvalError: No eval function available")}catch(e){t(e)}}},912:(e,t,n)=>{n(4642)(n(3999))},4311:(e,t,n)=>{n(4642)(n(2258))},8924:(e,t,n)=>{n(4642)(n(9437))},3926:(e,t,n)=>{n(4642)(n(3205))},1437:(e,t,n)=>{n(4642)(n(4290))},2579:(e,t,n)=>{n(4642)(n(2278))},5064:(e,t,n)=>{n(4642)(n(3883))},2584:(e,t,n)=>{n(4642)(n(9815))},9049:(e,t,n)=>{n(4642)(n(9908))},7249:(e,t,n)=>{n(4642)(n(3998))},4976:(e,t,n)=>{n(4642)(n(9971))},8475:(e,t,n)=>{n(4642)(n(5964))},1903:(e,t,n)=>{n(4642)(n(9292))},4768:(e,t,n)=>{n(4642)(n(6593))}};var t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};e[i].call(r.exports,r,r.exports,n);return r.exports}n(2579);n(8924);n(4768);n(912);n(7249);n(4311);n(8475);n(4976);n(1437);n(5064);n(3926);n(1903);n(9049);n(2584);n(9333);n(985);n(4675);n(3953);n(4113);n(6937);n(2407);n(4743);n(6377);n(6875);n(3067);n(2661);n(1703);n(1595);n(3667);n(4719);n(4607);n(6893);n(6671);n(4371);n(5711);n(5457);n(315);n(457);n(7239);n(3109);n(7503);n(6189);n(3523);n(3159);n(3045);n(2227);n(7911);n(7727);n(6589);n(4243);n(9884);n(3349);n(4479);n(9207);n(8141);n(5919);n(9331);n(5299);n(4017);n(2493);n(4159);n(8223);n(707);n(3183);n(4991);n(5303);n(9403);n(1039);n(2559);n(3385);n(5231);n(7085);n(439);n(7803);n(2623);n(7135);n(8621);n(2189);n(9871);n(1619);n(7765);n(9019);n(7195);n(2675);n(5345);n(4737);n(5267);n(4029);n(8589);n(5351);n(6001);n(8477);n(8981);n(7689);n(1769);n(5631);n(5705);n(3669);n(7865);n(6507);n(8301);n(4691);n(9649);n(3351);n(7641);n(415);n(1173);n(257);n(4151);n(7909);n(9745);n(809);n(7199);n(3461);n(4823);n(5689);n(6247);n(6825);n(753);n(8591);n(2345);n(8181);n(1397);n(1419);n(4847);n(3817);n(5161);n(8245);n(2855);n(9769);n(2953);n(353);n(8029);n(8659);n(9089);n(7977);n(9465);n(5715);n(2905);n(7535);n(3665);n(557);n(3225);n(1753);n(8479);n(5887);var i=n(8745)})();